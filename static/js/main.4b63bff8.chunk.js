(this.webpackJsonpjsBenchIt=this.webpackJsonpjsBenchIt||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(43),s=n.n(o),c=(n(56),n(7)),i=n(1),l=n.n(i),u=n(6),d=n(11),h=n(2),m=n(5),p=n(3),v=n(4),f=n(8),g=/([a-z])([A-Z])/g,b=function(e,t,n){return"".concat(t,"-").concat(n)},E=function(e){return e.replace(g,b).toLowerCase()};function y(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,o=n;r<o.length;r++){var s=o[r];if("string"===typeof s)e.push(s);else for(var c=0,i=Object.entries(s);c<i.length;c++){var l=Object(f.a)(i[c],2),u=l[0],d=l[1];d&&e.push(E(u))}}return e.join(" ")}function w(e){return r.a.createElement("input",{type:"text",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder,value:e.value})}function k(e,t){for(var n=new URL(e),a=new URLSearchParams(n.search),r=0,o=Object.entries(t);r<o.length;r++){var s=Object(f.a)(o[r],2),c=s[0],i=s[1];void 0===i?a.delete(c):a.set(c,i)}return n.search=a.toString(),n.href}var j=n(10),O={};function S(e,t){var n=O[e];n||(n=[],O[e]=n),x(e,t),n.push(t)}function x(e,t){var n=O[e];if(n){var a=n.indexOf(t);a>=0&&n.splice(a,1)}}window.addEventListener("message",(function(e){var t=e.data,n=t.type,a=t.data,r=O[n];if(r){var o,s=Object(j.a)(r);try{for(s.s();!(o=s.n()).done;){(0,o.value)(a)}}catch(c){s.e(c)}finally{s.f()}}}));var C=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).handleResize=function(t){e.iframeRef.current.style.height="".concat(t.height,"px")},e.iframeRef=r.a.createRef(),e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){S("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){x("resize",this.handleResize)}},{key:"shouldComponentUpdate",value:function(e){return e.disqusId!==this.disqusId}},{key:"render",value:function(){var e=this.props,t=e.disqusId,n=k("https://jsbenchit.devcomments.org/comments.html",{disqusId:t,title:e.title});return r.a.createElement("div",null,t?r.a.createElement("iframe",{ref:this.iframeRef,title:"comments",src:n}):[])}}]),n}(r.a.Component);function N(e){return r.a.createElement("div",{className:"comments"},r.a.createElement("hr",null),e.disqusId?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comment-notes"},"Use ",r.a.createElement("b",null,"<pre><code>"),"code goes here",r.a.createElement("b",null,"</code></pre>")," for code blocks"),r.a.createElement(C,{disqusId:e.disqusId,title:e.title})):[])}var M=n(13),z=n(30),L=function(e){return JSON.parse(e.files["jsBenchIt.json"].content)},I=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).pat="",e.user={},e.unAuthorizedOctokit=new z.a({userAgent:"jsBenchIt v0.0.1"}),e}return Object(m.a)(n,[{key:"_updateUserData",value:function(e){if(e.owner){this.user.name=e.owner.login,this.user.avatarURL=e.owner.avatar_url;var t=new Event("userdata");t.data=Object(c.a)({},this.user),this.dispatchEvent(t)}}},{key:"setPat",value:function(e){e!==this.pat&&(this.pat=e,this.authorizedOctokit=new z.a({auth:e,userAgent:"jsBenchIt v0.0.1"}))}},{key:"getUserGists",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return!!e.files["jsBenchIt.json"]})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAnonGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,a=n.data,r=n.rawData,this._updateUserData(r),e.abrupt("return",{data:a,rawData:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.octokit.gists.get({gist_id:t});case 2:return n=e.sent,this._updateUserData(n.data),e.abrupt("return",L(n.data));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.gists.create({description:t.title,public:!0,files:{"jsBenchIt.json":{content:JSON.stringify(t)}}});case 2:return n=e.sent,this._updateUserData(n.data),e.abrupt("return",{id:n.data.id,name:n.data.description,date:n.data.updated_at});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(r.length>2&&void 0!==r[2])||r[2],e.next=3,this.authorizedOctokit.gists.update({gist_id:t,description:n.title,files:{"jsBenchIt.json":{content:JSON.stringify(n),filename:"jsBenchIt.json"}}});case 3:return a=e.sent,e.abrupt("return",{id:a.data.id,name:a.data.description,date:a.data.updated_at});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"octokit",get:function(){return this.authorizedOctokit||this.unAuthorizedOctokit}}]),n}(Object(M.a)(EventTarget));function R(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",{data:L(a),rawData:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){function e(){Object(h.a)(this,e),this.itemToSubscriptionMap=new Map}return Object(m.a)(e,[{key:"subscribe",value:function(e,t){this.unsubscribe(e,t);var n=this.itemToSubscriptionMap.get(e);n||(n=[],this.itemToSubscriptionMap.set(e,n)),n.push(t)}},{key:"unsubscribe",value:function(e,t){var n=this.itemToSubscriptionMap.get(e);if(n){var a=n.indexOf(t);a>=0&&(n.splice(a,1),0===n.length&&this.itemToSubscriptionMap.delete(e))}}},{key:"notify",value:function(e){var t=this.itemToSubscriptionMap.get(e);if(t){var n,a=Object(j.a)(t.slice());try{for(a.s();!(n=a.n()).done;){(0,n.value)()}}catch(r){a.e(r)}finally{a.f()}}}}]),e}();var U=new(function(){function e(t){var n=this;Object(h.a)(this,e),this._handleNewValue=function(e){var t=e.key;if(t.startsWith(n.prefix)){var a=t.substr(n.prefix.length);n.subscriptionManager.notify(a)}},this.prefix="".concat(t,"-"),this.subscriptionManager=new T,window.addEventListener("storage",this._handleNewValue)}return Object(m.a)(e,[{key:"_addPrefix",value:function(e){return"".concat(this.prefix).concat(e)}},{key:"subscribe",value:function(e,t){this.subscriptionManager.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){this.subscriptionManager.unsubscribe(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);if(t){var a=sessionStorage.getItem(n);if(a)return a}return localStorage.getItem(n)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._addPrefix(e);n&&sessionStorage.setItem(a,t),localStorage.setItem(a,t),this.subscriptionManager.notify(e)}},{key:"delete",value:function(e,t){var n=this._addPrefix(e);t&&sessionStorage.removeItem(n),localStorage.removeItem(n)}},{key:"cleanup",value:function(){window.removeEventListener("storage",this._handleNewValue)}}]),e}())("jsbenchit"),_=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){27===t.keyCode&&e.props.onClose()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,a=e.onClose;return r.a.createElement("div",{onClick:a,className:"dialog"},r.a.createElement("div",{tabIndex:"-1",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"dialog-heading"},r.a.createElement("div",{className:"dialog-title"},t),r.a.createElement("div",{className:"dialog-close"},r.a.createElement("button",{onClick:a},"X"))),r.a.createElement("div",{className:"dialog-content"},n)))}}]),n}(r.a.Component);function D(e){var t=e.onClose;return r.a.createElement(_,{title:"jsBenchIt",onClose:t},r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"Add your test cases, click ",r.a.createElement("code",null,"Run"),"."),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b"},"Click here for an example"),"."),r.a.createElement("h2",null,"Contribute, Fix, Enhance!"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsbenchit"},"https://github.com/greggman/jsbenchit")),r.a.createElement("p",null,"Also see ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org"},"jsgist.org")),r.a.createElement("h2",null,"Saving"),r.a.createElement("p",null,"You can save your tests in multiple ways."),r.a.createElement("ol",null,r.a.createElement("li",null,"To a github gist using your github account."),r.a.createElement("li",null,"Save it manually into github",r.a.createElement("p",null,"Copy the JSON. Go to github. Create a new gist. Name the file",r.a.createElement("code",null,"jsBenchIt.json"),' Paste the JSON in. Pick "Create public gist".'),r.a.createElement("p",null,"Note the id in the URL after you create the gist."),r.a.createElement("p",null,"Create a url in the form ",r.a.createElement("code",null,"https://jsbenchit.org/?src=<gist_id>"),"."),r.a.createElement("p",null,"Example: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b"},"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b"))),r.a.createElement("li",null,"Save it manually somewhere else.",r.a.createElement("p",null,"If there's some other service that will provide a string via http get then copy and save the JSON there then create a URL in the form of ",r.a.createElement("code",null,"https://jsbenchit.org/?src=<url>"),". Note: you will have to escape the URL although if just paste it into your browser it will likely do the conversion for you.")),r.a.createElement("li",null,"Save it as a bookmark or link",r.a.createElement("p",null,"In the SaveAs dialog there's a link that contains all the data for your benchmark."))),r.a.createElement("h2",null,"Comparing across browsers"),r.a.createElement("p",null,"Saving saves the results of the benchmark so if you want to compare across browsers:"),r.a.createElement("h3",null,"With Personal Access Token"),r.a.createElement("ol",null,r.a.createElement("li",null,"Create your benchmark"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Save a new gist using Personal Access Token"),r.a.createElement("li",null,"Copy URL to another browser"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Save over old gist using Personal Access Token")),r.a.createElement("p",null,"Repeat steps 4, 5, 6 on other browsers."),r.a.createElement("h3",null,"With URL"),r.a.createElement("ol",null,r.a.createElement("li",null,"Create your benchmark"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Pick Save and copy the URL"),r.a.createElement("li",null,"Copy URL to another browser"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Pick Save and copy the URL")),r.a.createElement("p",null,"Repeat steps 4, 5, 6 on other browsers."),r.a.createElement("p",null,"Note: In general it only makes sense to compare results of browsers on the same machine.")))}var P=n(23),V=n.n(P),J=n(47),G=(new V.a).compile(J),W={};function B(e){var t=W[e]||{subscriptions:new Set};return W[e]=t,t}function q(e,t){var n=B(e);return void 0!==t&&(n.value=t),n}function K(e){return W[e].value}function F(e,t){var n=W[e];if(!n)throw new Error("no such track value: ".concat(e));n.value=t;var a,r=Object(d.a)(n.subscriptions.keys()),o=Object(j.a)(r);try{for(o.s();!(a=o.n()).done;){(0,a.value)(t,e)}}catch(s){o.e(s)}finally{o.f()}}function H(e,t){B(e).subscriptions.add(t)}function X(e,t){B(e).subscriptions.delete(t)}var $,Y={title:"My Test",initialization:"// runs once",setup:"// runs before each test",tests:[{name:"test 1",code:"// put test code here",results:{},platforms:{}},{name:"test 2",code:"// put test code here",results:{},platforms:{}}]};function Z(){return JSON.parse(JSON.stringify(Y))}q("dataVersion",0),q("updateVersion",0),q("resultsVersion",0),q("testsVersion",0);var Q=function(e){return F(e,K(e)+1)},ee=function(e){return Q("dataVersion")},te=function(e){return Q("resultsVersion")},ne=function(e){return Q("testsVersion")};function ae(){var e="test ".concat($.tests.length+1);$.tests.push({name:e,code:"// ".concat(e),results:{},platforms:{}}),ee(),ne()}var re=new T;function oe(){return $.tests}function se(e,t){var n=$.tests[e];n.name=t,ee(),te(),re.notify(n)}function ce(e,t){var n=$.tests[e];n.code=t,ee(),re.notify(n)}function ie(e,t,n){var a=$.tests[e];a.results=t,a.platforms[n]=t,ee(),te()}function le(e){!function(e){if(!G(e))throw new Error("data not valid:\n".concat(G.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))))}(e),$=e,Q("updateVersion"),ee(),ne(),te()}function ue(){var e,t=Object(j.a)($.tests);try{for(t.s();!(e=t.n()).done;){e.value.results={}}}catch(n){t.e(n)}finally{t.f()}ee(),te()}function de(e){return(t=e.results)&&!t.error&&!t.aborted;var t}function he(e){var t,n=e.hz,a=void 0===n?0:n,r=e.stats,o=void 0===r?{numSamples:0,rme:0}:r,s=(t=a.toFixed(a<100?2:0),t=String(t).split("."),"".concat(t[0].replace(/(?=(?:\d{3})+$)(?!\b)/g,",")).concat(t[1]?".".concat(t[1]):"")),c=o.rme.toFixed(2);return"".concat(s," ops/sec \xb1").concat(c,"% (runs: ").concat(o.numSamples,")")}le(Z());var me=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{};function pe(e){var t,n,a,o=me.matches,s=e.max,i=e.test,l=e.result,u=i.name,d=l.aborted,h=l.hz,m=void 0===h,p=d?"aborted":m?"not run":he(l),v=h/s,f=d||m?"100%":"".concat((100*v).toFixed(1),"%"),g=d||m?{}:{background:(t=1/7-v/7,n=1,a=o?.4:.8,"hsl(".concat(360*t|0,", ").concat(100*n|0,"%, ").concat(100*a|0,"%)"))};return r.a.createElement("div",{className:y("result",{aborted:d,unRun:m})},r.a.createElement("div",{className:"result-bar",style:Object(c.a)({width:f},g)}),r.a.createElement("div",{className:"result-info",style:{}},r.a.createElement("div",{className:"result-name"},u),r.a.createElement("div",{className:"result-result"},p)))}function ve(e){var t=e.tests,n=e.getResultFn,a=t.filter(de).reduce((function(e,t){return Math.max(e,n(t).hz||0)}),0);return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(pe,{max:a,test:e,result:n(e),key:"res".concat(t)})})))}var fe=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){H("resultsVersion",this.handleChange)}},{key:"componentWillUnmount",value:function(){X("resultsVersion",this.handleChange)}},{key:"render",value:function(){var e=oe();return r.a.createElement("div",{className:"results"},r.a.createElement("div",null,"Latest Results:"),r.a.createElement(ve,{tests:e,getResultFn:function(e){return e.results}}))}}]),n}(r.a.Component),ge={type:"object",properties:{name:{type:"string"},date:{type:"string"}},required:["name","date"]},be={$schema:"http://json-schema.org/schema#",type:"object",additionalProperties:ge},Ee=new V.a,ye=Ee.compile(be),we=Ee.compile(ge);function ke(){try{var e=JSON.parse(U.get("gists"));if(!ye(e))throw U.delete("gists"),new Error;return e}catch(t){return{}}}function je(e,t,n){var a={name:t,date:n};if(!we(a))throw new Error("gist not valid:\n".concat(we.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));var r=Object(c.a)({},K("gists"));r[e]=a,F("gists",r),Oe(r)}function Oe(e){U.set("gists",JSON.stringify(e))}function Se(e){if(!ye(e))throw new Error("gists not valid:\n".concat(we.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));F("gists",e),Oe(e)}q("gists",ke()),U.subscribe("gists",(function(){F("gists",ke())}));var xe=r.a.createContext(),Ce=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).onPatChange=function(t){e.forceUpdate(),e.context.oauthManager.pat()&&e.loadGists()},e.handleNewGists=function(t){e.setState({gists:t})},e.loadGists=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,o,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.context,r=a.addError,o=a.github,s=a.oauthManager,e.setState({loading:!0}),o.setPat(s.pat()),t.prev=3,t.next=6,o.getUserGists();case 6:c=t.sent,Se(c.reduce((function(e,t){return e[t.id]={name:t.description,date:t.updated_at},e}),{})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),r("could not load gists: ".concat(t.t0));case 14:e.setState({loading:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,gists:K("gists")},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this.context.oauthManager;H("gists",this.handleNewGists),e.subscribe(this.onPatChange)}},{key:"componentWillUnmount",value:function(){var e=this.context.oauthManager;X("gists",this.handleNewGists),e.unsubscribe(this.onPatChange)}},{key:"renderLogin",value:function(){var e=this.context.oauthManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderLoad",value:function(){var e=this.context.oauthManager,t=this.state,n=t.gists,a=t.loading,o=!!e.pat()&&!a,s=Object.entries(n).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return{id:n,name:a.name,date:a.date}})).sort((function(e,t){return t.date<e.date?-1:t.date>e.date?1:0}));return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("button",{className:y({disabled:!o}),onClick:this.loadGists},s.length?"Reload":"Load"," Your Gists")),s.length?r.a.createElement("table",{className:"gists"},r.a.createElement("tbody",null,s.map((function(e,t){return r.a.createElement("tr",{key:"g".concat(t)},r.a.createElement("td",null,r.a.createElement("a",{href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent(e.id))},e.name)),r.a.createElement("td",null,e.date.substring(0,10)))})))):[])}},{key:"render",value:function(){return this.context.oauthManager.pat()?this.renderLoad():this.renderLogin()}}]),n}(r.a.Component);Ce.contextType=xe;var Ne=n(48),Me=(n(96),n(97),n(98),n(42),n(99),n(102),n(103),window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{}),ze=function(){};function Le(e){var t=e.value,n=e.hackKey,o=e.options,s=void 0===o?{}:o,i=e.onValueChange,l=void 0===i?ze:i,u=Object(a.useState)(t),d=Object(f.a)(u,2),h=d[0],m=d[1],p=Me.matches;return r.a.createElement(Ne.Controlled,{key:n,value:h,options:Object(c.a)({mode:"javascript",scrollbarStyle:"overlay",theme:p?"material":"eclipse"},s.editor&&s.editor),onBeforeChange:function(e,t,n){m(n)},onChange:function(e,t,n){l(n)}})}function Ie(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),o=n[0],s=n[1],c=Object(a.useContext)(xe).addError;return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100px"}},r.a.createElement(Le,{value:o,onValueChange:s})),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){var t=e.onLoad;try{le(JSON.parse(o)),t()}catch(n){c("bad json: ".concat(n))}}},"Load JSON")))}function Re(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),o=n[0],s=n[1],c=Object(a.useContext)(xe).addError;function i(){return(i=Object(u.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.onLoad,t.prev=1,t.next=4,fetch(o);case 4:return a=t.sent,t.next=7,a.json();case 7:le(t.sent),n(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c("could not load url: ".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(w,{value:o,onChange:s,placeholder:"url-to-json"}),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return i.apply(this,arguments)}},"Load URL")))}function Ae(e){var t=e.heading,n=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"section-heading"},t),r.a.createElement("div",{className:"section-content"},n))}function Te(e){var t=e.data,n=e.onLoad,a=e.onClose;return r.a.createElement(_,{title:"Load",onClose:a},r.a.createElement(Ae,{heading:"Load Gist"},r.a.createElement(Ce,{data:t,onLoad:n})),r.a.createElement(Ae,{heading:"Load URL"},r.a.createElement(Re,{data:t,onLoad:n})),r.a.createElement(Ae,{heading:"Load JSON"},r.a.createElement(Ie,{data:t,onLoad:n})))}var Ue=n(29),_e=n(31),De=new TextEncoder,Pe=new TextDecoder,Ve=function(e){return e.startsWith("cb64,")||e.startsWith("b64,")};function Je(e){var t=e.startsWith("cb64,"),n=t?"cb64,":"b64,",a=e.substr(n.length).replace(/-/g,"+").replace(/_/g,"/"),r=new Uint8Array(Object(Ue.decode)(a)),o=t?Object(_e.b)(r):r,s=Pe.decode(o);return JSON.parse(s)}var Ge=/^[a-z0-9]+$/i,We=function(e){return Ge.test(e)};function Be(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(l.a.mark((function e(t,n){var a,r,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!We(t)){e.next=9;break}return e.next=3,n?n.getAnonGist(t):R(t);case 3:return a=e.sent,r=a.data,o=a.rawData,e.abrupt("return",{data:r,id:t,rawData:o});case 9:if(!Ve(t)){e.next=13;break}return e.abrupt("return",{data:Je(t)});case 13:return e.next=15,fetch(t);case 15:return s=e.sent,e.next=18,s.json();case 18:return c=e.sent,e.abrupt("return",{data:c});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=n(50);function Fe(e){var t=e.value,n=e.hackKey,o=e.heading,s=e.extra,c=void 0===s?[]:s,i=e.options,l=void 0===i?{}:i,u=e.onValueChange,d=Object(a.useState)(!1!==e.show),h=Object(f.a)(d,2),m=h[0],p=h[1],v=!m;return r.a.createElement("div",{className:"code-area"},r.a.createElement("div",{className:"expander"},r.a.createElement("div",{className:"hider",onClick:function(){return p(!m)}},m?"\u25bc":"\u25c0"),o),r.a.createElement("div",{className:y("hidee",{hideeHide:v})},r.a.createElement(Ke.a,{handleClasses:{bottom:"resize-handle-horizontal"},handleStyles:{bottom:{bottom:"0px",position:"initial"}},style:{position:"relative"},defaultSize:{height:200},minHeight:20,enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}},r.a.createElement(Le,{hackKey:n,value:t,options:l,onValueChange:u})),c))}function He(e){var t=e.title,n=e.hackKey,a=r.a.createElement("div",{className:"named"},t);return r.a.createElement(Fe,Object.assign({hackKey:n,heading:a},e))}var Xe=function(e){return Object.entries(e).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join(",")};var $e=function(){function e(t){var n=this;Object(h.a)(this,e),this.requestToken=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={client:"60cb8be0ee81d9bf51a5",code:t.code,endPoint:"https://github.com/login/oauth/access_token"},r=k("https://auth.jsbenchit.org/oauth-helper",a),e.next=5,fetch(r);case 5:return o=e.sent,e.next=8,o.json();case 8:if((s=e.sent).access_token){e.next=11;break}throw new Error(JSON.stringify(s));case 11:n._storageManager.set("pat",s.access_token),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){n._storageManager.delete("pat")},this.login=function(){n._closePopup(),n.state="".concat(Date.now(),"-").concat(Math.random());var e=k("https://github.com/login/oauth/authorize",{client_id:"60cb8be0ee81d9bf51a5",scope:"gist",state:n.state});n.popup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width||500,a=t.height||500,r={width:n,height:a,top:window.screenY+(window.outerHeight-a)/2.5,left:window.screenX+(window.outerWidth-n)/2};return window.open(e,"_blank",Xe(r))}(e)},this._popup=void 0,this._state=void 0,this._storageManager=t,S("auth",(function(e){n._closePopup(),e.state===n.state&&n.requestToken(e)}))}return Object(m.a)(e,[{key:"pat",value:function(){return this._storageManager.get("pat")}},{key:"subscribe",value:function(e){this._storageManager.subscribe("pat",e)}},{key:"unsubscribe",value:function(e){this._storageManager.unsubscribe("pat",e)}},{key:"_closePopup",value:function(){this.popup&&(this.popup.close(),this.popup=void 0)}}]),e}(),Ye=n(24),Ze=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){H("resultsVersion",this.handleChange)}},{key:"componentWillUnmount",value:function(){X("resultsVersion",this.handleChange)}},{key:"render",value:function(){var e=oe(),t=Object(d.a)(e.reduce((function(e,t){return Object.keys(t.platforms).reduce((function(e,t){return e.add(t),e}),e)}),new Set));return r.a.createElement("div",null,t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"By Platform:"),r.a.createElement("div",null,t.map((function(t,n){return r.a.createElement("div",{key:"plat".concat(n),className:"results"},r.a.createElement("div",null,Object(Ye.parse)(t).description,r.a.createElement("div",{className:"delete",onClick:function(){!function(e){var t,n=Object(j.a)($.tests);try{for(n.s();!(t=n.n()).done;){delete t.value.platforms[e]}}catch(a){n.e(a)}finally{n.f()}ee(),te()}(t)}},"\u24e7")),r.a.createElement(ve,{tests:e.filter((function(e){return e.platforms[t]})),getResultFn:function(e){return e.platforms[t]}}))})))):[])}}]),n}(r.a.Component),Qe=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).onPATChange=function(){e.forceUpdate()},e.saveNew=Object(u.a)(l.a.mark((function t(){var n,a,r,o,s,c,i,u,d,h,m,p,v;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.oauthManager,r=n.github,o=n.addError,e.setState({saving:!0}),s=e.props,c=s.data,i=s.onSave,u=s.onClose,d=!1,r.setPat(a.pat()),t.prev=5,t.next=8,r.createGist(c);case 8:h=t.sent,m=h.id,p=h.name,v=h.date,je(m,p,v),i(m),d=!0,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),o("could not create gist: ".concat(t.t0));case 20:e.setState({saving:!1}),d&&u();case 22:case"end":return t.stop()}}),t,null,[[5,17]])}))),e.saveOverExisting=Object(u.a)(l.a.mark((function t(){var n,a,r,o,s,c,i,u,d,h,m,p,v;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.oauthManager,r=n.github,o=n.addError,e.setState({saving:!0}),s=e.props,c=s.data,i=s.gistId,u=s.onClose,d=!1,r.setPat(a.pat()),t.prev=5,t.next=8,r.updateGist(i,c);case 8:h=t.sent,m=h.id,p=h.name,v=h.date,je(m,p,v),d=!0,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o("could not update gist: ".concat(t.t0));case 19:e.setState({saving:!1}),d&&u();case 21:case"end":return t.stop()}}),t,null,[[5,16]])}))),e.state={saving:!1},e}return Object(m.a)(n,[{key:"renderLogin",value:function(){var e=this.context.oauthManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderSave",value:function(){var e=this.state.saving,t=this.context.oauthManager.pat(),n=this.props.gistId,a=t&&n;return r.a.createElement("div",null,r.a.createElement("button",{className:y({disabled:e}),"data-type":"new",onClick:this.saveNew},"Save to New Gist"),r.a.createElement("button",{className:y({disabled:!a||e}),"data-type":"update",onClick:this.saveOverExisting},"Update Current Gist"))}},{key:"render",value:function(){return this.context.oauthManager.pat()?this.renderSave():this.renderLogin()}}]),n}(r.a.Component);function et(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("div",null,"Copy the text below, paste into the load ui or put somewhere on the net and make your own URL with ",r.a.createElement("code",null,window.location.origin,"?src=url-to-json"),"."),r.a.createElement("pre",{style:{userSelect:"all"}},JSON.stringify(t)),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent("".concat(window.location.origin,"/example.json")))},"Example")))}function tt(e){var t=function(e){var t=JSON.stringify(e),n=De.encode(t),a=Object(_e.a)(n),r=a.length<n.length,o=Object(Ue.encode)(r?a:n).replace(/\+/g,"-").replace(/\//g,"_");return"".concat(r?"cb64,":"b64,").concat(o)}(e.data),n="".concat(window.location.origin,"?src=").concat(encodeURIComponent(t));return r.a.createElement("div",null,r.a.createElement("div",null,"Copy / bookmark the link below"),r.a.createElement("a",{className:"bookmark",href:n,target:"_blank",rel:"noopener noreferrer"},n))}function nt(e){var t=e.data,n=e.gistId,a=e.onSave,o=e.onClose;return r.a.createElement(_,{title:"Save As",onClose:o},r.a.createElement(Ae,{heading:"Save As Gist"},r.a.createElement(Qe,{gistId:n,data:t,onSave:a,onClose:o})),r.a.createElement(Ae,{heading:"Save As URL"},r.a.createElement(tt,{data:t})),r.a.createElement(Ae,{heading:"Save As JSON"},r.a.createElement(et,{data:t})))}Qe.contextType=xe;var at=n(9),rt=n(49);function ot(e,t){var n=e/t|0,a=e%t,r=new Array(t).fill(n);if(0===a)return r;if(a<=t/2|0){var o=t/a|0,s=o/2|0;return r.map((function(e,t){return e+(t%o===s?1:0)}))}var c=t/(t-a)|0,i=c/2|0;return r.map((function(e,t){return e+(1-(t%c===i?1:0))}))}var st=function(e,t){return e.touches?e.touches[0][t]:e[t]};var ct=function(e){return"horizontal"===e?{dimension:"width",clientAxis:"clientX",position:"left",positionEnd:"right",clientSize:"clientWidth",style:{width:"100%",display:"flex"}}:{dimension:"height",clientAxis:"clientY",position:"top",positionEnd:"bottom",clientSize:"clientHeight",style:{}}};function it(e){var t=e.startSizes,n=e.currentSizes,a=e.prevPaneNdx,r=e.gutterSize,o=e.minSize,s=e.deltaPX,c=e.outerSizePX,i=n.length,l=ot((i-1)*r,i),u=a+1,h=Math.ceil(t[a]*c)-l[a],m=h+(Math.ceil(t[u]*c)-l[u]),p=Math.min(Math.max(o,h+s),m-o),v=m-p;return[].concat(Object(d.a)(n.slice(0,a)),[(p+l[a])/c,(v+l[u])/c],Object(d.a)(n.slice(a+2,n.length)))}var lt=function(e){return e.preventDefault()},ut=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleMouseDownAndTouchStart=function(e){(0,a.props.onMouseDownAndTouchStart)(e)},a.elementRef=r.a.createRef(),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this.elementRef.current;e.addEventListener("mousedown",this.handleMouseDownAndTouchStart,{passive:!1}),e.addEventListener("touchstart",this.handleMouseDownAndTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){var e=this.elementRef.current;e.removeEventListener("mousedown",this.handleMouseDownAndTouchStart),e.removeEventListener("touchstart",this.handleMouseDownAndTouchStart)}},{key:"render",value:function(){var e=this.props,t=e.direction,n=e.dragging,a=e.current,o=e.style;return r.a.createElement("div",{ref:this.elementRef,className:"gutter gutter-".concat(t," ").concat(n&&a?"gutter-dragging":""),style:o})}}]),n}(r.a.Component),dt=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(h.a)(this,n),(a=t.call(this,e))._setSizes=function(e){a.setState({sizes:e})},a.handleMouseUpAndTouchEnd=function(){document.removeEventListener("mousemove",a.handleMouseAndTouchMove),document.removeEventListener("mouseup",a.handleMouseUpAndTouchEnd),document.removeEventListener("touchmove",a.handleMouseAndTouchMove),document.removeEventListener("touchend",a.handleMouseUpAndTouchEnd),a.setState({dragging:!1})},a.handleMouseAndTouchMove=function(e){lt(e);var t=a.props,n=t.gutterSize,r=void 0===n?10:n,o=t.direction,s=void 0===o?"horizontal":o,c=t.minSize,i=void 0===c?10:c,l=t.computeNewSizesFn,u=void 0===l?it:l,d=t.onSetSizes,h=t.sizes,m=a.state,p=m.prevPaneNdx,v=m.mouseStart,f=m.startSizes,g=m.sizes,b=d||a._setSizes,E=d?h:g,y=ct(s),w=y.clientAxis,k=y.clientSize;b(u({startSizes:f,currentSizes:E,prevPaneNdx:p,gutterSize:r,minSize:i,deltaPX:st(e,w)-v,outerSizePX:a.elementRef.current[k]}))},a.handleMouseDownAndTouchStart=function(e){console.log("split mouse down"),lt(e);var t=a.props.direction,n=ct(void 0===t?"horizontal":t).clientAxis;document.addEventListener("mousemove",a.handleMouseAndTouchMove,{passive:!1}),document.addEventListener("mouseup",a.handleMouseUpAndTouchEnd),document.addEventListener("touchmove",a.handleMouseAndTouchMove,{passive:!1}),document.addEventListener("touchend",a.handleMouseUpAndTouchEnd);var r=(Array.prototype.indexOf.call(e.target.parentElement.children,e.target)-1)/2;a.setState({startSizes:a.state.sizes.slice(),mouseStart:st(e,n),prevPaneNdx:r,dragging:!0})},a.recomputeSizes=function(){var e=a.state.sizes,t=a.props,n=(t.minSize,t.direction),o=(t.gutterSize,ct(n).clientSize),s=r.a.Children.count(a.props.children),c=s<e.length?function(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t}))}(e.slice(0,s)):function(e,t,n,a,r){return new Array(t).fill(1/t)}(0,s,0,0,a.elementRef.current.parentElement[o]);a._setSizes(c)};var o=r.a.Children.count(e.children),s=1/o;return a.state={sizes:new Array(o).fill(s)},a.elementRef=r.a.createRef(),a}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.children,n=e.onSetSizes,a=this.state.sizes;if(!n){var o=r.a.Children.count(t);a.length!==o&&setTimeout(this.recomputeSizes)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.direction,o=void 0===a?"horizontal":a,s=t.gutterSize,i=void 0===s?10:s,l=t.sizes,u=t.onSetSizes,d=(t.minSize,Object(rt.a)(t,["children","direction","gutterSize","sizes","onSetSizes","minSize"])),h=this.state,m=h.dragging,p=h.prevPaneNdx,v=h.sizes,f=ct(o),g=f.dimension,b=f.style,E=u?l:v,y=r.a.Children.count(n),w=i*(y-1),k=Object(at.a)({},g,"".concat(i,"px")),j=ot(w,y),O=0,S=!0,x=[];return r.a.Children.forEach(n,(function(t,n){if(!r.a.isValidElement(t))return null;S||x.push(r.a.createElement(ut,{key:"gutter".concat(x.length),direction:o,dragging:m,current:m&&O===p+1,style:k,onMouseDownAndTouchStart:e.handleMouseDownAndTouchStart}));var a=Object(at.a)({},g,"calc(".concat(100*E[O],"% - ").concat(j[O],"px)"));x.push(r.a.createElement("div",{key:"pane".concat(x.length),style:a},r.a.cloneElement(t))),S=!1,++O})),r.a.createElement("div",Object.assign({className:"split",ref:this.elementRef,style:Object(c.a)(Object(c.a)(Object(c.a)({},this.props.style),b),m&&{userSelect:"none"})},d),x,m?r.a.createElement("style",null,"iframe ","{","pointer-events: none !important;","}"):[])}}]),n}(r.a.Component),ht=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e.handleTitleChange=function(t){se(e.props.testNdx,t)},e.handleValueChange=function(t){ce(e.props.testNdx,t)},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){!function(e,t){re.subscribe(e,t)}(this.props.test,this.handleChange)}},{key:"componentWillUnmount",value:function(){!function(e,t){re.unsubscribe(e,t)}(this.props.test,this.handleChange)}},{key:"render",value:function(){var e=this.props,t=e.desc,n=e.test,a=e.hackKey,o=n.name,s=r.a.createElement(w,{placeholder:t,value:o,onChange:this.handleTitleChange});return r.a.createElement(Fe,Object.assign({key:a,value:n.code},this.props,{heading:s,onValueChange:this.handleValueChange}))}}]),n}(r.a.Component),mt=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"abort",value:function(){this._abortImpl&&this._abortImpl()}},{key:"run",value:function(e){var t=this;return new Promise(function(){var n=Object(u.a)(l.a.mark((function n(a,r){var o,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ue(),o=function(n){return new Promise((function(a,r){var o=document.createElement("iframe"),s=window.location.origin,i="\n          <".concat("script",' type="module" src="',s,'/error-reporter.js"></',"script",">\n          <","script",' src="').concat(s,'/3rdparty/lodash.js"></',"script",">\n          <","script",' src="').concat(s,'/3rdparty/platform.js"></',"script",">\n          <","script",' src="').concat(s,'/3rdparty/benchmark.js"></',"script",">\n          <","script",">\n          const model = ").concat(JSON.stringify(Object(c.a)(Object(c.a)({},e),{},{settings:Object(c.a)(Object(c.a)({},e.settings&&e.settings),{},{test:n})})),";\n          </","script",">\n          <","script",">\n          ").concat(e.initialization,"\n          </","script",">\n          <body>\n          </body>\n          <","script",' type="module" src="').concat(s,'/runner.js"></',"script",">\n          "),l={name:e.title,files:[{name:"html",content:i},{name:"css",content:""},{name:"javascript",content:""}]},u=function(e){u=function(){},x("uncaughtError",m),x("abort",p),x("error",v),x("cycle",f),x("complete",g),x("gimmeDaCodez",b),o.remove(),a(e)},d=function(){o.contentWindow&&o.contentWindow.postMessage({type:"abort"},"*"),u({success:!0,data:{message:"aborted"}})};t._abortImpl=d;var h=function(e){var n=parseInt(e.name),a=Object(c.a)({},e);delete a.id,delete a.name,ie(n,a,window.navigator.userAgent);var r=new Event("progress");r.data={testNdx:n},t.dispatchEvent(r)},m=function(e){d(),a({success:!1,data:e})},p=function(e){u({success:!0,data:{message:"aborted because of error"}})},v=function(e){h(e)},f=function(e){n||h(e)},g=function(e){u({success:!0,data:e})},b=function(){o.contentWindow.postMessage({type:"run",data:l},"*")};S("uncaughtError",m),S("abort",p),S("error",v),S("cycle",f),S("complete",g),S("gimmeDaCodez",b),o.src=k("https://jsbenchitrunner.devcomments.org/runner-03.html",Object(c.a)(Object(c.a)({},n&&{test:n}),{},{url:"https://jsbenchit.org/jsbenchit-runner.js"})),o.style.display="none",document.body.appendChild(o)}))},n.prev=2,n.next=5,o(!0);case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(2),a({success:!1,e:n.t0}),n.abrupt("return");case 11:return n.prev=11,n.next=14,o();case 14:s=n.sent,a(s),n.next=21;break;case 18:n.prev=18,n.t1=n.catch(11),r(n.t1);case 21:case"end":return n.stop()}}),n,null,[[2,7],[11,18]])})));return function(e,t){return n.apply(this,arguments)}}())}}]),n}(Object(M.a)(EventTarget)),pt=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){H("resultsVersion",this.handleChange)}},{key:"componentWillUnmount",value:function(){X("resultsVersion",this.handleChange)}},{key:"renderTests",value:function(){var e=oe(),t=0,n=Object(d.a)(e.reduce((function(e,t){return Object.keys(t.platforms).reduce((function(e,t){return e.add(t),e}),e)}),new Set)),a=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"By Test:"),r.a.createElement("div",null,e.map((function(e,a){return r.a.createElement("div",{key:"test".concat(a),className:"results"},r.a.createElement("div",null,e.name),r.a.createElement(ve,{tests:n.filter((function(t){return e.platforms[t]})).map((function(n){return++t,{name:Object(Ye.parse)(n).description,results:e.platforms[n]}})),getResultFn:function(e){return e.results}}))}))));return{numResults:t,components:a}}},{key:"render",value:function(){var e=this.renderTests(),t=e.numResults,n=e.components;return r.a.createElement("div",null,t?n:[])}}]),n}(r.a.Component),vt=(n(105),"jsBenchIt-backup"),ft=function(){return[]},gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?"".concat(t).concat(e).concat(n):""},bt=window.matchMedia("(prefers-color-scheme: dark)"),Et=function(){var e=window.location,t=Object.fromEntries(new URLSearchParams(e.search).entries()).src;return t?"".concat(encodeURIComponent(t)):""},yt=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).addMsg=function(t,n){switch(n){case"error":console.error(t);break;default:console.log(t)}e.setState({messages:[{msg:t,className:n}].concat(Object(d.a)(e.state.messages))}),setTimeout((function(){e.setState({messages:e.state.messages.slice(0,e.state.messages.length-1)})}),5e3)},e.addInfo=function(t){return e.addMsg(t,"info")},e.addError=function(t){return e.addMsg(t,"error")},e.closeDialog=function(){e.setState({dialog:ft})},e.handleNew=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(Z());case 1:case"end":return e.stop()}}),e)}))),e.handleRun=Object(u.a)(l.a.mark((function t(){var n,a,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({running:!0,testNum:0}),U.set(vt,JSON.stringify({href:window.location.href,data:$}),!0),console.log("--start--"),t.prev=3,(n=new mt).addEventListener("progress",(function(t){e.setState({testNum:t.data.testNdx+1})})),e.abort=n.abort.bind(n),t.next=9,n.run($);case 9:a=t.sent,r=a.success,o=a.data,r||e.addError("could not run benchmark:\n".concat(gt(null===o||void 0===o?void 0:o.message)).concat(gt(null===o||void 0===o?void 0:o.filename,":")).concat(gt(null===o||void 0===o?void 0:o.lineno,":")).concat(gt(null===o||void 0===o?void 0:o.colno,":"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),e.addError(t.t0);case 18:e.abort=void 0,U.delete(vt,!0),console.log("--done--"),e.setState({running:!1});case 22:case"end":return t.stop()}}),t,null,[[3,15]])}))),e.handleSave=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:e.renderSave});case 1:case"end":return t.stop()}}),t)}))),e.handleHelp=function(){e.setState({dialog:e.renderHelp})},e.handleLoad=function(){e.setState({dialog:e.renderLoad})},e.handleOnLoad=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:ft});case 1:case"end":return t.stop()}}),t)}))),e.handleOnSave=function(t){window.history.pushState({},"","".concat(window.location.origin,"?src=").concat(t)),e.setState({gistId:t})},e.handleAbort=function(){e.abort()},e.renderHelp=function(){return r.a.createElement(D,{onClose:e.closeDialog})},e.renderLoad=function(){return r.a.createElement(Te,{onLoad:e.handleOnLoad,onClose:e.closeDialog})},e.renderSave=function(){var t=$;return r.a.createElement(nt,{onSave:e.handleOnSave,onClose:e.closeDialog,gistId:e.state.gistId,data:t})},e.state={path:window.location.pathname,dark:bt.matches,disqusId:Et(),running:!1,loading:!1,dialog:ft,dataVersion:0,gistId:"",messages:[],userData:{},testNum:0},e.github=new I,e.testToKeyMap=new Map,e.oauthManager=new $e(U),e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.github.addEventListener("userdata",(function(t){e.setState({userData:t.data})})),q("path",window.location.pathname),H("path",(function(t){window.history.pushState({},"",t),e.setState({path:t})})),H("testsVersion",(function(t){e.setState({dataVersion:t})})),H("updateVersion",(function(t){e.setState({updateVersion:t})})),bt.addEventListener("change",(function(){e.setState({dark:bt.matches})}));var t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),n=U.get(vt,!0),a=!1;if(n){try{var r=JSON.parse(n);r.href===window.location.href&&(le(r.data),a=!0,this.addInfo("loaded backup from local storage"))}catch(o){}U.delete(vt,!0)}!a&&t.src&&this.loadData(t.src)}},{key:"loadData",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,Be(t,this.github);case 4:n=e.sent,a=n.data,r=n.id,le(a),r&&this.setState({gistId:t}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0),this.addError("could not load benchmark: src=".concat(t," ").concat(e.t0));case 15:this.setState({loading:!1});case 16:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTestKey",value:function(e){var t=this.testToKeyMap.get(e);return t||(t="".concat(Date.now(),"+").concat(Math.random()),this.testToKeyMap.set(e,t)),t}},{key:"render",value:function(){var e=this,t=$,n=this.state,a=n.running,o=n.loading,s=n.dialog,i=n.updateVersion,l=n.userData,u=n.testNum,d=a,h=Object(c.a)({},!a&&{display:"none"}),m=y({disabled:d});return r.a.createElement("div",{className:"App"},r.a.createElement(xe.Provider,{value:{github:this.github,oauthManager:this.oauthManager,addError:this.addError,addInfo:this.addInfo,storageManager:U}},r.a.createElement("div",{className:"head"},r.a.createElement("div",null,r.a.createElement("img",{src:"/resources/images/logo.svg",alt:"logo"}),"jsBenchIt.org",r.a.createElement("span",{className:"beta"},"(beta)")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsbenchit/"},r.a.createElement("img",{alt:"github",src:"/resources/images/octocat-icon.svg"})))),r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:y("left",{disabled:d})},r.a.createElement("div",{className:"name"},r.a.createElement(w,{value:t.title,onChange:function(e){return t=e,$.title=t,ee(),te(),void ne();var t}}),l.name?r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(l.name)},l.name)):[],l.avatarURL?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(l.name)},r.a.createElement("img",{className:"avatar",src:l.avatarURL,alt:"avatar"})):[])),r.a.createElement("div",{className:"right"},a?r.a.createElement("button",{tabIndex:"1",onClick:this.handleAbort},"Cancel"):r.a.createElement("button",{tabIndex:"1",onClick:this.handleRun},"Run"),r.a.createElement("button",{tabIndex:"1",className:m,onClick:this.handleSave},"Save"),r.a.createElement("button",{tabIndex:"1",className:m,onClick:this.handleNew},"New"),r.a.createElement("button",{tabIndex:"1",className:m,onClick:this.handleLoad},"Load"),r.a.createElement("button",{tabIndex:"1",className:m,onClick:this.handleHelp},"?"))),o?[]:r.a.createElement("div",{className:"bottom"},r.a.createElement(dt,{direction:"horizontal"},r.a.createElement("div",{className:"left"},r.a.createElement(He,{key:"n1".concat(i),title:"Initialization",value:t.initialization,show:t.initialization.length>0,onValueChange:function(e){return t=e,$.initialization=t,void ee();var t}}),r.a.createElement(He,{key:"n2".concat(i),title:"Before Each Test",value:t.setup,show:t.setup.length>0,onValueChange:function(e){return t=e,$.setup=t,void ee();var t}}),t.tests.map((function(t,n){var a=r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return function(e){$.tests.splice(e,1),ee(),ne(),te()}(n)}},"-"));return r.a.createElement(ht,{key:"ca".concat(e.getTestKey(t)),hackKey:i,desc:"Case ".concat(n+1),test:t,testNdx:n,extra:a})})),r.a.createElement("div",null,r.a.createElement("button",{onClick:ae},"+")),r.a.createElement("div",{className:"blocked",style:h},r.a.createElement("div",{className:"abort"},r.a.createElement("div",null,"Testing ",u+1," of ",t.tests.length),r.a.createElement("div",null,"Time remaining: ~",5*(t.tests.length-u),"s"),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleAbort},"Stop Benchmark"))))),r.a.createElement("div",{className:"right"},r.a.createElement(fe,null),r.a.createElement(Ze,null),r.a.createElement(pt,null)))),r.a.createElement(N,{disqusId:Et(),title:t.title}),s(),r.a.createElement("div",{className:"messages"},this.state.messages.map((function(e,t){var n=e.msg,a=e.className;return r.a.createElement("div",{className:a,key:"err".concat(t)},n)})))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/schema#","definitions":{"results":{"type":"object","properties":{"aborted":{"type":"boolean"},"count":{"type":"integer"},"cycles":{"type":"integer"},"hz":{"type":"number"},"stats":{"type":"object","properties":{"numSamples":{"type":"integer"},"rme":{"type:":"number"}},"required":["numSamples","rme"]},"times":{"type":"object"}}}},"type":"object","properties":{"title":{"type":"string"},"setup":{"type":"string"},"initialization":{"type":"string"},"tests":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"results":{"$ref":"#/definitions/results"},"platforms":{"type":"object","additionalProperties":{"$ref":"#/definitions/results"}}},"required":["name","code","results","platforms"]}}},"required":["title","setup","initialization","tests"]}')},51:function(e,t,n){e.exports=n(106)},56:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.4b63bff8.chunk.js.map