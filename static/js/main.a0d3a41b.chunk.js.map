{"version":3,"sources":["css-utils.js","EditLine.js","url.js","Disqus.js","Footer.js","GitHub.js","Dialog.js","Help.js","color-utils.js","model.js","Results.js","LatestResults.js","gists.js","utils.js","LoadGist.js","Code.js","LoadJSON.js","LoadURL.js","Section.js","Load.js","compression.js","loader.js","CodeArea.js","NamedCodeArea.js","Platforms.js","SaveAsGist.js","SaveAsJSON.js","SaveAsURL.js","Save.js","Split.js","TestArea.js","TestRunner.js","App.js","serviceWorker.js","index.js"],"names":["camelCaseRE","toDash","_","left","right","camelCaseToDash","s","replace","toLowerCase","classNames","names","args","arg","push","Object","entries","key","value","join","EditLine","props","type","onChange","e","target","placeholder","createURL","base","params","url","URL","searchParams","URLSearchParams","search","undefined","delete","set","toString","href","updateURL","window","location","history","replaceState","Disqus","handleMessage","data","iframeRef","current","style","height","React","createRef","addEventListener","this","removeEventListener","nextProps","disqusId","title","ref","src","Component","Footer","className","Fragment","getGistContent","gist","JSON","parse","files","content","GitHub","pat","user","unAuthorizedOctokit","Octokit","userAgent","owner","name","login","avatarURL","avatar_url","event","Event","dispatchEvent","authorizedOctokit","auth","paginate","gists","list","filter","gist_id","getAnonGist","rawData","_updateUserData","octokit","get","create","description","public","stringify","id","date","updated_at","update","filename","EventTarget","a","fetch","req","json","Dialog","handleKeyDown","keyCode","onClose","children","onClick","tabIndex","stopPropagation","Help","rel","validator","Ajv","compile","schema","trackedValues","getValueOrMakeNew","trackedValue","subscriptions","Set","add","initialValue","newValue","Error","fns","keys","fn","subscribe","newTestData","code","results","platforms","getNewTestData","notify","addTest","tests","length","setTestResult","ndx","platform","test","setData","newData","errors","map","message","dataPath","validate","clearAllTestResults","testResultsAreValid","error","aborted","formatResults","number","hz","stats","numSamples","rme","opsPerSec","toFixed","String","split","plusMinus","console","log","darkMatcher","matchMedia","Result","h","l","isDarkMode","matches","max","unRun","msg","zeroToOne","width","background","Results","reduce","Math","LatestResults","gistSchema","gistsSchema","ajv","gistsValidator","gistValidator","getStoredGists","localStorage","getItem","removeIem","addGist","model","saveGistsToLocalStorage","setItem","setGists","unsubscribe","noop","wait","ms","Promise","resolve","setTimeout","LoadGist","handlePATChange","setState","handleSubmit","preventDefault","loadGists","handleNewGists","loading","addError","github","state","setPat","getUserGists","gistArray","loggedIn","document","body","canLoad","sort","b","display","disabled","origin","encodeURIComponent","substring","Code","hackKey","options","onValueChange","useState","localValue","setLocalValue","mode","scrollbarStyle","theme","editor","onBeforeChange","LoadJSON","setJSON","onLoad","LoadURL","setUrl","Section","heading","Load","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","isCompressedBase64","startsWith","compressedBase64ToJSON","isCompressed","prefix","base64","substr","raw","Uint8Array","decode","bin","inflate","idRE","isGistId","loadGistFromSrc","res","CodeArea","extra","show","setShow","hideeHide","handleClasses","bottom","handleStyles","position","defaultSize","minHeight","enable","top","topRight","bottomRight","bottomLeft","topLeft","NamedCodeArea","Platforms","plat","SaveAsGist","saveFn","markToSaveNewGist","saveNew","markToUpdateGist","saveOverExisting","saving","onSave","success","createGist","gistId","updateGist","canSave","onSubmit","data-type","SaveAsJSON","userSelect","SaveAsURL","encode","compressed","deflate","useCompressed","jsonToCompressedBase64","Save","distribute","items","buckets","array","Array","fill","leap","halfLeap","v","i","getMouseOrTouchPosition","clientAxis","touches","getDirectionProps","direction","dimension","positionEnd","clientSize","computeNewSizes","startSizes","currentSizes","prevPaneNdx","gutterSize","minSize","deltaPX","outerSizePX","numPanes","gutterReservedSizesPX","nextPaneNdx","prevPaneStartSizePX","ceil","spaceUsedByBothElementsPX","prevPaneNewSizePX","min","nextPaneNewSizePX","slice","stopMobileBrowserFromScrolling","Gutter","handleMouseDownAndTouchStart","onMouseDownAndTouchStart","elementRef","elem","passive","dragging","GManSplit","_setSizes","sizes","handleMouseUpAndTouchEnd","handleMouseAndTouchMove","computeNewSizesFn","onSetSizes","propSizes","mouseStart","stateSizes","setSizes","prototype","indexOf","call","parentElement","recomputeSizes","numChildren","Children","count","newSizes","totalSize","sum","normalizeSizes","minSizePX","totalSizePX","addSpaceForChildren","size","rest","totalGutterSpace","gutterStyle","gutterReservedSizes","childNdx","first","newChildren","forEach","child","isValidElement","cloneElement","TestArea","desc","onTitleChange","TestRunner","_abortImpl","reject","runTests","iframe","createElement","html","settings","initialization","runnerData","cleanup","result","remove","abort","contentWindow","postMessage","updateTestResults","parseInt","navigator","testNdx","handlers","uncaughtError","cycle","complete","gimmeDaCodez","appendChild","backupKey","noJSX","stringOrEmpty","str","suffix","makeDisqusId","loc","fromEntries","App","addMsg","messages","addInfo","closeDialog","dialog","handleNew","handleRun","running","testNum","testRunner","bind","run","lineno","colno","removeItem","handleSave","renderSave","handleHelp","renderHelp","handleLoad","renderLoad","handleOnLoad","handleOnSave","pushState","handleAbort","path","pathname","dark","dataVersion","userData","updateVersion","query","backup","loaded","loadData","warn","hideStyle","disabledClass","alt","userName","init","setup","splice","async","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.a0d3a41b.chunk.js","sourcesContent":["const camelCaseRE = /([a-z])([A-Z])/g;\nconst toDash = (_, left, right) => `${left}-${right}`;\nconst camelCaseToDash = s => s.replace(camelCaseRE, toDash).toLowerCase();\n\nexport function classNames(...args) {\n  const names = [];\n  for (const arg of args) {\n    if (typeof arg === 'string') {\n      names.push(arg);\n    } else {\n      for (const [key, value] of Object.entries(arg)) {\n        if (value) {\n          names.push(camelCaseToDash(key));\n        }\n      }\n    }\n  }\n  return names.join(' ');\n}","import React from 'react';\n\nexport default function EditLine(props) {\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => {props.onChange(e.target.value)}}\n      placeholder={props.placeholder}\n      value={props.value} />\n  );\n}","export function createURL(base, params) {\n  const url = new URL(base);\n  const searchParams = new URLSearchParams(url.search);\n  for (const [key, value] of Object.entries(params)) {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  }\n  url.search = searchParams.toString();\n  return url.href;\n}\n\nexport function updateURL(params) {\n  const url = createURL(window.location.href, params);\n  window.history.replaceState({}, '', url.href);\n}\n\n","import React from 'react';\nimport {createURL} from './url.js';\n\n// Disqus is served from a separate domain in an iframe. In other words\n//\n// +--[jsbenchit.org]-----------------------------+\n// |                                              |\n// | +--[iframe src=jsbenchit.devcomments.org]--+ |\n// | |                                          | |\n// | | +--[iframe src=disqus.com]---+           | |\n// | | |                            |           | |\n// | | +----------------------------+           | |\n// | |                                          | |\n// | +------------------------------------------+ |\n// |                                              |\n// +----------------------------------------------+\n//\n// This is because disqus works by embedded script\n// so we can't let it be on our page directly\n// otherwise it could read our secrets\n//\nexport default class Disqus extends React.Component {\n  constructor() {\n    super();\n    this.iframeRef = React.createRef();\n  }\n  // Disqus's script creates an iframe and the content in the iframe\n  // communicates back to the main page to tell it the size of the iframe\n  // so the main page can adjust the iframe size. We do that same thing\n  // so our top page can just the size of the middle iframe in the\n  // diagram above.\n  handleMessage = (e) => {\n    const {type, data} = e.data;\n    switch (type) {\n      case 'resize':\n        this.iframeRef.current.style.height = `${data.height}px`;\n        break;\n      default:\n        break;\n    }\n  }\n  componentDidMount() {\n    window.addEventListener('message', this.handleMessage);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('message', this.handleMessage);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.disqusId !== this.disqusId;\n  }\n  render() {\n    const {disqusId, title} = this.props;\n    const url = createURL('https://jsbenchit.devcomments.org/comments.html', {disqusId, title});\n    return (\n      <div>\n        { disqusId ?\n          <iframe\n            ref={this.iframeRef}\n            title=\"comments\"\n            src={url}\n          /> : []\n        }\n      </div>\n    );\n  }\n}","\nimport React from 'react';\nimport Disqus from './Disqus.js';\n\nexport default function Footer(props) {\n  return (\n    <div className=\"comments\">\n      <hr/>\n      {/*\n      <div className=\"links\">\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=suggested+topic&template=suggest-topic.md&title=%5BSUGGESTION%5D\">Suggestion</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=&template=request.md&title=\">Request</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Issue</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Bug</a>?\n      </div>\n      */}\n      {\n        props.disqusId ? (\n          <React.Fragment>\n            <div className=\"comment-notes\">\n               Use <b>&lt;pre&gt;&lt;code&gt;</b>code goes here<b>&lt;/code&gt;&lt;/pre&gt;</b> for code blocks\n            </div>\n            <Disqus disqusId={props.disqusId} title={props.title} />\n          </React.Fragment>\n        ) : []\n      }\n    </div>\n  );\n}","import { Octokit } from '@octokit/rest';\n\nconst userAgent = 'jsBenchIt v0.0.1';\n\nconst getGistContent = gist => JSON.parse(gist.files['jsBenchIt.json'].content);\n\nexport default class GitHub extends EventTarget {\n  constructor() {\n    super();\n    this.pat = '';\n    this.user = {};\n    this.unAuthorizedOctokit = new Octokit({\n      userAgent,\n    });\n  }\n  get octokit() {\n    return this.authorizedOctokit || this.unAuthorizedOctokit;\n  }\n  _updateUserData(data) {\n    if (data.owner) {\n      this.user.name = data.owner.login;\n      this.user.avatarURL = data.owner.avatar_url;\n      const event = new Event('userdata');\n      event.data = {...this.user};\n      this.dispatchEvent(event);\n    }\n  }\n  setPat(pat) {\n    if (pat !== this.pat) {\n      this.pat = pat;\n      this.authorizedOctokit = new Octokit({\n        auth: pat,\n        userAgent,\n      });\n    }\n  }\n  async getUserGists() {\n    const gists = await this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);\n    return gists.filter(gist => !!gist.files['jsBenchIt.json']);\n    // return await this.authorizedOctokit.gists.list();\n  }\n  async getAnonGist(gist_id) {\n    const {data, rawData} = await getAnonGist(gist_id);\n    this._updateUserData(rawData);\n    return {data, rawData};\n  }\n  async getUserGist(gist_id) {\n    const gist = await this.octokit.gists.get({gist_id});\n    this._updateUserData(gist.data);\n    return getGistContent(gist.data);\n  }\n  async createGist(data) {\n    const gist = await this.authorizedOctokit.gists.create({\n      description: data.title,\n      public: true,\n      files: {\n        'jsBenchIt.json': {content: JSON.stringify(data)},\n      },\n    });\n    this._updateUserData(gist.data);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n  /* returns \n{status: 201, url: \"https://api.github.com/gists\", headers: {…}, data: {…}}\ndata:\ncomments: 0\ncomments_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/comments\"\ncommits_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/commits\"\ncreated_at: \"2020-10-04T10:46:14Z\"\ndescription: \"bench test\"\nfiles: {bench.json: {…}}\nforks: []\nforks_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/forks\"\ngit_pull_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b.git\"\ngit_push_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b.git\"\nhistory: [{…}]\nhtml_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b\"\nid: \"92d9e8b2a5215b0217d459e735a9226b\"\nnode_id: \"MDQ6R2lzdDkyZDllOGIyYTUyMTViMDIxN2Q0NTllNzM1YTkyMjZi\"\nowner: {login: \"greggman\", id: 234804, node_id: \"MDQ6VXNlcjIzNDgwNA==\", avatar_url: \"https://avatars2.githubusercontent.com/u/234804?v=4\", gravatar_id: \"\", …}\npublic: true\ntruncated: false\nupdated_at: \"2020-10-04T10:46:14Z\"\nurl: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b\"\nuser: null\nheaders: {cache-control: \"private, max-age=60, s-maxage=60\", content-length: \"4814\", content-type: \"application/json; charset=utf-8\", etag: \"\"124f123e0d75b88fa385c1e1edab1608fd7dd6624440f456cb0b3d92634e1fd9\"\", location: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b\", …}\nstatus: 201\nurl: \"https://api.github.com/gists\"\n  */\n  async updateGist(gist_id, data, isPublic = true) {\n    const gist = await this.authorizedOctokit.gists.update({\n      gist_id,\n      description: data.title,\n      files: {\n        'jsBenchIt.json': {\n          content: JSON.stringify(data),\n          filename: 'jsBenchIt.json',\n        },\n      },\n    });\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n}\n\nexport async function getAnonGist(gist_id) {\n  const req = await fetch(`https://api.github.com/gists/${gist_id}`);\n  const gist = await req.json();\n  return {\n    data: getGistContent(gist),\n    rawData: gist,\n  };\n}\n","import React from 'react';\n\nexport default class Dialog extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n    }\n  }\n  render() {\n    const {title, children, onClose} = this.props;\n    return (\n      <div onClick={onClose} className=\"dialog\">\n        <div\n          tabIndex=\"-1\"\n          onClick={(e) =>{e.stopPropagation()}}\n        >\n          <div className=\"dialog-heading\">\n            <div className=\"dialog-title\">{title}</div>\n            <div className=\"dialog-close\">\n              <button onClick={onClose}>X</button>\n            </div>\n          </div>\n          <div className=\"dialog-content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nexport default function Help(props) {\n  const {onClose} = props;\n  return (\n    <Dialog title=\"jsBenchIt\" onClose={onClose}>\n      <div className=\"markdown\">\n      <p>Add your test cases, click <code>Run</code>.</p>\n      <p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b\">Click here for an example</a>.</p>\n      <h2>Contribute, Fix, Enhance!</h2>\n      <p>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsbenchit\">https://github.com/greggman/jsbenchit</a>\n      </p>\n      <p>Also see <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org\">jsgist.org</a></p>\n      <h2>Saving</h2>\n      <p>You can save your tests in multiple ways.</p>\n      <ol>\n        <li>To a github gist using a <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Personal Access Token</a>\n          <p>\n           Be sure to give the token <b>ONLY GIST</b> permissions. Paste it into the\n           save as UI click <code>Save to new gist</code>. Be sure to keep a copy of it\n           somewhere so you can use if you clear your browser's storage or switch\n           machines or browser. This site is a static site. The token is saved\n           in the browser only. You should also be able to save it in your browser's \n           password manager though you might have to click the key icon to tell it to save it.\n           The username will appear as \"unused\" since it's not actually used.\n          </p>\n        </li>\n        <li>Save it manually into github\n          <p>\n           Copy the JSON. Go to github. Create a new gist. Name the file\n           <code>jsBenchIt.json</code> Paste the JSON in. Pick \"Create public gist\".\n          </p>\n          <p>\n           Note the id in the URL after you create the gist.\n          </p>\n          <p>\n           Create a url in the form <code>https://jsbenchit.org/?src=&lt;gist_id&gt;</code>.\n          </p>\n          <p>\n           Example: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b\">https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b</a>\n          </p>\n        </li>\n        <li>Save it manually somewhere else.\n          <p>\n           If there's some other service that will provide a string via\n           http get then copy and save the JSON there then create a URL\n           in the form of <code>https://jsbenchit.org/?src=&lt;url&gt;</code>. Note: you\n           will have to escape the URL although if just paste it into your\n           browser it will likely do the conversion for you.\n          </p>\n        </li>\n        <li>Save it as a bookmark or link\n          <p>\n           In the SaveAs dialog there's a link that contains all the data\n           for your benchmark.\n          </p>\n        </li>\n      </ol>\n    <h2>Comparing across browsers</h2>\n    <p>\n      Saving saves the results of the benchmark so if you want to compare\n      across browsers:\n    </p>\n    <h3>With Personal Access Token</h3>\n    <ol>\n      <li>Create your benchmark</li>\n      <li>Run it</li>\n      <li>Save a new gist using Personal Access Token</li>\n      <li>Copy URL to another browser</li>\n      <li>Run it</li>\n      <li>Save over old gist using Personal Access Token</li>\n    </ol>\n    <p>Repeat steps 4, 5, 6 on other browsers.</p>\n    <h3>With URL</h3>\n    <ol>\n      <li>Create your benchmark</li>\n      <li>Run it</li>\n      <li>Pick Save and copy the URL</li>\n      <li>Copy URL to another browser</li>\n      <li>Run it</li>\n      <li>Pick Save and copy the URL</li>\n    </ol>\n    <p>Repeat steps 4, 5, 6 on other browsers.</p>\n    <p>Note: In general it only makes sense to compare results of browsers\n       on the same machine.</p>\n    </div>\n    </Dialog>\n  );\n}","export const hsl = (h, s, l) => `hsl(${h * 360 | 0}, ${s * 100 | 0}%, ${l * 100 | 0}%)`;\n","import Ajv from 'ajv';\nimport schema from './schema.json';\n\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst validator = ajv.compile(schema);\nconst isDev = process.env.NODE_ENV === 'development';\n\nconst trackedValues = {};\n\nfunction getValueOrMakeNew(name) {\n  const trackedValue = trackedValues[name] || {\n    subscriptions: new Set(),\n  };\n  trackedValues[name] = trackedValue;\n  return trackedValue;\n}\n\nexport function add(name, initialValue) {\n  const trackedValue = getValueOrMakeNew(name);\n  if (initialValue !== undefined) {\n    trackedValue.value = initialValue;\n  }\n  return trackedValue;\n}\n\nexport function get(name) {\n  return trackedValues[name].value;\n}\n\nexport function set(name, newValue) {\n  const trackedValue = trackedValues[name];\n  if (!trackedValue) {\n    throw new Error(`no such track value: ${name}`);\n  }\n  trackedValue.value = newValue;\n  const fns = [...trackedValue.subscriptions.keys()];\n  for (const fn of fns) {\n    fn(newValue, name);\n  }\n}\n\nexport function subscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.add(fn);\n}\n\nexport function unsubscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.delete(fn);\n}\n\nconst newTestData = {\n  \"title\": \"My Test\",\n  \"initialization\": \"// runs once\",\n  \"setup\": \"// runs before each test\",\n  \"tests\": [\n    {\n      name: \"test 1\",\n      code: \"// put test code here\",\n      results: {},\n      platforms: {},\n    },\n    {\n      name: \"test 2\",\n      code: \"// put test code here\",\n      results: {},\n      platforms: {},\n    },\n  ],\n};\nexport function getNewTestData() {\n  return JSON.parse(JSON.stringify(newTestData));\n}\n\n/* eslint no-template-curly-in-string:0 */\nexport let data = isDev ? {\n  \"title\": \"My test\",\n  \"setup\": \"\",\n  \"initialization\": \"const vowelArray = ['a', 'e', 'i', 'o', 'u'];\\nconst isVowelByArray = c => vowelArray.includes(c.toLowerCase());\\nconst isVowelByOr = c => {\\n  c = c.toLowerCase();\\n  return c === 'a' || c === 'e' || c === 'i' || c === 'o' || c === 'u';\\n}\\nconst test = new Array(1000).fill(0).map(_ => String.fromCharCode(0x61 + Math.random() * 26 | 0)).join('');\\nconst expected = test.split('').reduce((sum, c) => sum + isVowelByArray(c), 0);\\nconst verify = result => {\\n  if (result !== expected) {\\n    throw new Error(`actual: ${result} not equal to expected: ${expected}`);\\n  }\\n};\\nconsole.log('-setup-');\\n\",\n  \"tests\": [\n    {\n      \"name\": \"test1\",\n      \"code\": \"let sum = 0;\\nfor (let i = 0; i < test.length; ++i) {\\n  sum += isVowelByArray(test[i]);\\n}\\nverify(sum);\\n\",\n      \"results\": {\n        \"aborted\": false,\n        \"count\": 3925,\n        \"cycles\": 6,\n        \"hz\": 48757.763975155285,\n        \"stats\": {\n          \"numSamples\": 45,\n          \"moe\": 1.3253034196794547e-7,\n          \"rme\": 0.6461883133219702,\n          \"sem\": 6.761752141221708e-8,\n          \"deviation\": 5.409401712977366e-7,\n          \"mean\": 0.000020509554140127386,\n          \"variance\": 2.926162689236246e-13\n        },\n        \"times\": {\n          \"cycle\": 0.08049999999999999,\n          \"elapsed\": 6.087,\n          \"period\": 0.000020509554140127386,\n          \"timeStamp\": 1602070187852\n        }\n      },\n      \"platforms\": {\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36\": {\n          \"aborted\": false,\n          \"count\": 3925,\n          \"cycles\": 6,\n          \"hz\": 48757.763975155285,\n          \"stats\": {\n            \"numSamples\": 45,\n            \"moe\": 1.3253034196794547e-7,\n            \"rme\": 0.6461883133219702,\n            \"sem\": 6.761752141221708e-8,\n            \"deviation\": 5.409401712977366e-7,\n            \"mean\": 0.000020509554140127386,\n            \"variance\": 2.926162689236246e-13\n          },\n          \"times\": {\n            \"cycle\": 0.08049999999999999,\n            \"elapsed\": 6.087,\n            \"period\": 0.000020509554140127386,\n            \"timeStamp\": 1602070187852\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"test2\",\n      \"code\": \"let sum = 0;\\nfor (let i = 0; i < test.length; ++i) {\\n  sum += isVowelByOr(test[i]);\\n}\\nverify(sum);\\n\",\n      \"results\": {\n        \"aborted\": false,\n        \"count\": 4467,\n        \"cycles\": 4,\n        \"hz\": 55738.7911907046,\n        \"stats\": {\n          \"numSamples\": 45,\n          \"moe\": 1.6987329815854215e-7,\n          \"rme\": 0.9468532294935285,\n          \"sem\": 8.667005008088886e-8,\n          \"deviation\": 6.879221958946363e-7,\n          \"mean\": 0.00001794082682164028,\n          \"variance\": 4.732369476044983e-13\n        },\n        \"times\": {\n          \"cycle\": 0.08014167341226712,\n          \"elapsed\": 5.979,\n          \"period\": 0.00001794082682164028,\n          \"timeStamp\": 1602070193946\n        }\n      },\n      \"platforms\": {\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36\": {\n          \"aborted\": false,\n          \"count\": 4467,\n          \"cycles\": 4,\n          \"hz\": 55738.7911907046,\n          \"stats\": {\n            \"numSamples\": 45,\n            \"moe\": 1.6987329815854215e-7,\n            \"rme\": 0.9468532294935285,\n            \"sem\": 8.667005008088886e-8,\n            \"deviation\": 6.879221958946363e-7,\n            \"mean\": 0.00001794082682164028,\n            \"variance\": 4.732369476044983e-13\n          },\n          \"times\": {\n            \"cycle\": 0.08014167341226712,\n            \"elapsed\": 5.979,\n            \"period\": 0.00001794082682164028,\n            \"timeStamp\": 1602070193946\n          }\n        }\n      }\n    }\n  ]\n} : getNewTestData();\n\nif (!validator(data)) {\n  console.log(validator.errors);\n}\n\nadd('dataVersion', 0);   // any data changes\nadd('updateVersion', 0);  // all data changes\n\nfunction notify() {\n  set('dataVersion', get('dataVersion') + 1);\n}\n\nexport function addTest() {\n  const name = `test ${data.tests.length + 1}`;\n  data.tests.push({\n    name,\n    code: `// ${name}`,\n    results: {},\n    platforms: {},\n  });\n  notify();\n}\n\nexport function setTitle(title) {\n  data.title = title;\n  notify();\n}\n\nexport function setInitialization(init) {\n  data.initialization = init;\n  notify();\n}\n\nexport function setSetup(setup) {\n  data.setup = setup;\n  notify();\n}\n\nexport function setTestName(ndx, name) {\n  data.tests[ndx].name = name;\n  notify();\n}\n\nexport function setTestCode(ndx, code) {\n  data.tests[ndx].code = code;\n  notify();\n}\n\nexport function setTestResult(ndx, results, platform) {\n  const test = data.tests[ndx];\n  test.results = results;\n  test.platforms[platform] = results;\n  notify();\n}\n\nexport function deleteTestPlatform(platform) {\n  for (const test of data.tests) {\n    delete test.platforms[platform];\n  }\n  notify();\n}\n\nexport function deleteTest(ndx) {\n  data.tests.splice(ndx, 1);\n  notify();\n}\n\nexport function validate(data) {\n  if (!validator(data)) {\n    debugger;\n    throw new Error(`data not valid:\\n${validator.errors.map(e => `${e.message}: ${e.dataPath}`)}`);\n  }\n}\n\nexport function setData(newData) {\n  validate(newData);\n  data = newData;\n  notify();\n  set('updateVersion', get('updateVersion') + 1);\n}\n\nexport function clearAllTestResults() {\n  for (const test of data.tests) {\n    test.results = {};\n  }\n  notify();\n}\n\nexport function resultsAreValid(results) {\n  return results && ! results.error && !results.aborted;\n}\n\nexport function testResultsAreValid(test) {\n  return resultsAreValid(test.results);\n}\n\nfunction formatNumber(number) {\n  number = String(number).split('.');\n  return `${number[0].replace(/(?=(?:\\d{3})+$)(?!\\b)/g, ',')}${(number[1] ? `.${number[1]}` : '')}`;\n}\n\nexport function formatResults(results) {\n  const {hz = 0, stats = {numSamples: 0, rme: 0}} = results;\n  const opsPerSec = formatNumber(hz.toFixed(hz < 100 ? 2 : 0));\n  const plusMinus = stats.rme.toFixed(2);\n  return `${opsPerSec} ops/sec ±${plusMinus}% (runs: ${stats.numSamples})`;\n}","import React from 'react';\nimport {hsl} from './color-utils.js';\nimport {classNames} from './css-utils.js';\nimport {formatResults, testResultsAreValid} from './model.js';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n\nfunction Result(props) {\n  const isDarkMode = darkMatcher.matches;\n  const {max, test} = props;\n  const {name, results} = test;\n  const {aborted, hz} = results;\n  const unRun = hz === undefined;\n  const msg = aborted ? \n     'aborted' :\n     unRun\n         ? 'not run'\n         : formatResults(results);\n  const zeroToOne = hz / max;\n  const width = aborted || unRun ? '100%' : `${(zeroToOne * 100).toFixed(1)}%`;\n  const background = (aborted || unRun) ? {} : {background: hsl(1 / 7 - zeroToOne / 7, 1, isDarkMode ? 0.4 : 0.8)};\n\n  return (\n    <div className={classNames(\"result\", {aborted, unRun})}>\n      <div className=\"result-bar\" style={{\n        width,\n        ...background,\n      }}>\n      </div>\n      <div className=\"result-info\" style={{}}>\n        <div className=\"result-name\">{name}</div>\n        <div className=\"result-result\">{msg}</div>\n      </div>\n    </div>\n  )\n}\n\n\n\nexport default function Results(props) {\n  const {tests} = props;\n  const max = tests\n      .filter(testResultsAreValid)\n      .reduce((max, test) => Math.max(max, test.results.hz || 0), 0);\n  return (\n    <div>\n      {\n        tests.map((test, ndx) => (<Result max={max} test={test} key={`res${ndx}`} />))\n      }\n    </div>\n  );\n};","import React from 'react';\nimport Results from './Results';\n\nexport default function LatestResults(props) {\n  const {tests} = props;\n\n  return (\n    <div className=\"results\">\n      <div>Latest Results:</div>\n      <Results tests={tests} />\n    </div>\n  );\n}","import Ajv from 'ajv';\nimport * as model from './model';\n\nconst gistsKey = 'jsBenchIt-gists';\n\nconst gistSchema = {\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"date\": { \"type\": \"string\" },\n  },\n  \"required\": [\"name\", \"date\"],\n};\n\nconst gistsSchema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"type\": \"object\",\n  \"additionalProperties\": gistSchema,\n};\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst gistsValidator = ajv.compile(gistsSchema);\nconst gistValidator = ajv.compile(gistSchema);\n\nfunction getStoredGists() {\n  try {\n    const gists = JSON.parse(localStorage.getItem(gistsKey));\n    if (!gistsValidator(gists)) {\n      localStorage.removeIem(gistsKey);\n      throw new Error();\n    }\n    return gists;\n  } catch(e) {\n    return {};\n  }\n}\n\nmodel.add('gists', getStoredGists());\n\n// does this need to be centralized?\nwindow.addEventListener('storage', (e) => {\n  if (e.key === 'gists') {\n    model.set('gists', getStoredGists());\n  }\n});\n\nexport function addGist(id, name, date) {\n  const gist = {name, date};\n  if (!gistValidator(gist)) {\n    throw new Error(`gist not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  const gists = {...model.get('gists')};\n  gists[id] = gist;\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nfunction saveGistsToLocalStorage(gists) {\n  // send to other windows\n  localStorage.setItem(gistsKey, JSON.stringify(gists));\n}\n\nexport function getGists() {\n  return model.get('gists');\n}\n\nexport function setGists(gists) {\n  if (!gistsValidator(gists)) {\n    throw new Error(`gists not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function subscribe(fn) {\n  model.subscribe('gists', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('gists', fn);\n}\n","export const noop = () => {};\nexport const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nfunction find(files, endings) {\n  // calling toLowerCase a bunch is bad but there will never be more than a few files\n  for (const ending of endings) {\n    const file = files.find(file => file.name.toLowerCase().endsWith(ending.toLowerCase()));\n    if (file) {\n      return file;\n    }\n  }\n  return '';\n}\n\nexport function getOrFind(files, name, ...endings) {\n  return files.find(f => f.name.toLowerCase() === name.toLowerCase) || find(files, endings);\n}\n","import React from 'react';\nimport { classNames } from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class LoadGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      loading: false,\n      pat: localStorage.getItem('pat') || '',\n      gists: gists.getGists(),\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.loadGists();\n  }\n  handleNewGists = (gists) => {\n    this.setState({gists});\n  }\n  componentDidMount() {\n    document.body.addEventListener('submit', this.handleSubmit);\n    gists.subscribe(this.handleNewGists);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('submit', this.handleSubmit);\n    gists.unsubscribe(this.handleNewGists);\n  }\n  loadGists = async(e) => {\n    this.setState({loading: true});\n    const {addError, github} = this.props;\n    const {pat} = this.state;\n    github.setPat(pat);\n    try {\n      const gistArray = await github.getUserGists();\n      const gistsById = gistArray.reduce((gists, gist) => {\n        gists[gist.id] = {\n          name: gist.description,\n          date: gist.updated_at,\n        };\n        return gists;\n      }, {});\n      gists.setGists(gistsById);\n      // apparently we need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined});\n    } catch (e) {\n      addError(`could not load gists: ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  render() {\n    const {pat, gists, loading} = this.state;\n    const canLoad = !!pat && !loading;\n    const gistArray = Object.entries(gists).map(([id, {name, date}]) => {\n      return {id, name, date};\n    }).sort((b, a) => a.date < b.date ? -1 : ((a.date > b.date) ? 1 : 0));\n    return (\n      <div>\n        <form>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              type=\"submit\"\n              className={classNames({disabled: !canLoad})}\n            >{gistArray.length ? 'Reload' : 'Load'} Your Gists</button>\n          </p>\n        </form>\n        <p>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n          Paste it above. Note: This is a static website. Your personal access token\n          is stored only locally in your browser and only accessible by this domain.\n        </p>\n        {\n          gistArray.length ?\n            <table className=\"gists\">\n              <tbody>\n              {\n                gistArray.map((gist, ndx) => {\n                  return (\n                    <tr key={`g${ndx}`}>\n                      <td><a href={`${window.location.origin}?src=${encodeURIComponent(gist.id)}`}>{gist.name}</a></td>\n                      <td>{gist.date.substring(0, 10)}</td>\n                    </tr>\n                  );\n                })\n              }\n              </tbody>\n            </table> : []\n        }\n      </div>\n    );\n  }\n}","import React, {useState} from 'react';\nimport {Controlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/htmlmixed/htmlmixed.js';\nimport 'codemirror/addon/scroll/simplescrollbars.js';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n// darkMatcher.addListener(render);\n\nconst noop = () => {};\n\nexport default function Code(props) {\n  const {value, hackKey, options = {}, onValueChange = noop} = props;\n  const [localValue, setLocalValue] = useState(value);\n  const isDarkMode = darkMatcher.matches;\n  return (\n    <CodeMirror\n      key={hackKey}\n      value={localValue}\n      options={{\n        mode: 'javascript',\n        scrollbarStyle: 'overlay',\n        theme: isDarkMode ? 'material' : 'eclipse',\n        ...(options.editor && options.editor),\n      }}\n      onBeforeChange={(editor, data, value) => {\n        setLocalValue(value);\n      }}\n      onChange={(editor, data, value) => {\n        onValueChange(value);\n      }}\n    />\n  );\n};\n","import React, {useState} from 'react';\nimport Code from './Code.js';\nimport * as model from './model.js';\n\nexport default function LoadJSON(props) {\n  const [json, setJSON] = useState('');\n  function load() {\n    const {onLoad, addError} = props;\n    try {\n      const data = JSON.parse(json);\n      model.setData(data);\n      onLoad();\n    } catch (e) {\n      addError(`bad json: ${e}`);\n    }\n  }\n  return (\n    <div>\n      <div style={{height: '100px'}}>\n        <Code\n          value={json}\n          onValueChange={setJSON}\n\n        />\n      </div>\n      <p>\n        <button onClick={load}>Load JSON</button>\n      </p>\n    </div>\n  )\n}","import React, {useState} from 'react';\nimport EditLine from './EditLine';\nimport * as model from './model.js';\n\nexport default function LoadURL(props) {\n  const [url, setUrl] = useState('');\n  async function loadUrl() {\n    const {addError, onLoad} = props;\n    try {\n      const req = await fetch(url);\n      const data = await req.json();\n      model.setData(data);\n      onLoad()\n    } catch(e) {\n      addError(`could not load url: ${e}`);\n    }\n  } \n  return (\n    <div>\n      <EditLine value={url} onChange={setUrl} placeholder=\"url-to-json\" />\n      <p>\n        <button onClick={loadUrl}>Load URL</button>\n      </p>\n    </div>\n  )\n}","import React from 'react';\n\nexport default function Section(props) {\n  const {heading, children} = props;\n  return (\n    <div className=\"section\">\n      <div className=\"section-heading\">{heading}</div>\n      <div className=\"section-content\">\n        {children}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport LoadGist from './LoadGist.js';\nimport LoadJSON from './LoadJSON.js';\nimport LoadURL from './LoadURL.js';\nimport Section from './Section.js';\n\nexport default function Load(props) {\n  const {data, github, onLoad, onClose, addError} = props;\n  return (\n    <Dialog title=\"Load\" onClose={onClose}>\n      <Section heading=\"Load Gist\">\n        <LoadGist github={github} data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load URL\">\n        <LoadURL data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load JSON\">\n        <LoadJSON data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n    </Dialog>\n  )\n}\n","import {decode, encode} from 'base64-arraybuffer';\nimport {inflate, deflate} from 'uzip-module';\n\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder();\nconst compressedPrefix = 'cb64,';\nconst uncompressedPrefix = 'b64,';\n\nexport const isCompressedBase64 = s => s.startsWith(compressedPrefix) || s.startsWith(uncompressedPrefix);\nexport function compressedBase64ToJSON(src) {\n  const isCompressed = src.startsWith(compressedPrefix);\n  const prefix = isCompressed ? compressedPrefix : uncompressedPrefix;\n  const base64 = src.substr(prefix.length)\n     .replace(/-/g, '+')\n     .replace(/_/g, '/');\n  const raw = new Uint8Array(decode(base64));\n  const bin = isCompressed \n     ? inflate(raw)\n     : raw;\n  const json = utf8Decoder.decode(bin);\n  return JSON.parse(json);\n}\n\nexport function jsonToCompressedBase64(data) {\n  const json = JSON.stringify(data);\n  const bin = utf8Encoder.encode(json);\n  const compressed = deflate(bin);\n  const useCompressed = compressed.length < bin.length;\n  const base64 = encode(useCompressed ? compressed : bin)\n      .replace(/\\+/g, '-')    // better for URLs because + and / have to be escaped\n      .replace(/\\//g, '_');\n  const prefix = useCompressed ? compressedPrefix : uncompressedPrefix;\n  return `${prefix}${base64}`;\n}\n","\nimport {isCompressedBase64, compressedBase64ToJSON} from './compression.js';\nimport {getAnonGist} from './GitHub.js';\n\nconst idRE = /^[a-z0-9]+$/i;\nexport const isGistId = s => idRE.test(s);\n\n// passing it github here is a bad hack!\n// just wanted things to work again. Have to fix later\nexport async function loadGistFromSrc(src, github) {\n  if (isGistId(src)) {\n    const {data, rawData} = await (github ? github.getAnonGist(src) : getAnonGist(src));\n    return {data, id: src, rawData};\n  } else if (isCompressedBase64(src)) {\n    return {data: compressedBase64ToJSON(src)};\n  } else {\n    const res = await fetch(src);\n    const data = await res.json();\n    return {data};\n  }\n}\n","import React, {useState} from 'react';\nimport {Resizable} from 're-resizable';\nimport Code from './Code.js';\nimport {classNames} from './css-utils.js';\n\nexport default function CodeArea(props) {\n  const {value, hackKey, heading, extra = [], options = {}, onValueChange} = props;\n  const [show, setShow] = useState(props.show === false ? false : true);\n  const hideeHide = !show;\n  return (\n    <div className=\"code-area\">\n        <div className=\"expander\">\n          <div className=\"hider\" onClick={()=>setShow(!show)}>{show ? '▼' : '◀'}</div>\n          {heading}\n        </div>\n        <div className={classNames(\"hidee\", {hideeHide})}>\n          <Resizable\n            handleClasses={{bottom: \"resize-handle-horizontal\"}}\n            handleStyles={{bottom: {bottom: '0px', position: 'initial'}}}\n            style={{position: 'relative'}}\n            defaultSize={{height: 200}}\n            minHeight={20}\n            enable={{top:false, right:false, bottom:true, left:false, topRight:false, bottomRight:false, bottomLeft:false, topLeft:false}}\n          >\n            <Code\n              hackKey={hackKey}\n              value={value}\n              options={options}\n              onValueChange={onValueChange}\n            />\n          </Resizable>\n          {extra}\n        </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport CodeArea from './CodeArea.js';\n\nexport default function NamedCodeArea(props) {\n  const {title, hackKey} = props;\n  const heading = (\n    <div className=\"named\">{title}</div>\n  );\n\n  return (\n    <CodeArea hackKey={hackKey} heading={heading} {...props} />\n  );\n}","import React from 'react';\nimport Results from './Results';\nimport {parse} from 'platform';\nimport * as model from './model.js';\n\nexport default function Platforms(props) {\n  const {tests} = props;\n\n  // TODO: as this is costly we should decide how to optimize\n  // 1. change the format?\n  // 2. use shouldComponent\n  const platforms = [...tests.reduce((platforms, test) => {\n    return Object.keys(test.platforms).reduce((platforms, plat) => {\n      platforms.add(plat);\n      return platforms;\n    }, platforms);\n  }, new Set())];\n  \n  return (\n    <div>\n      <div>Platforms:</div>\n      <div>\n        {\n          platforms.map((platform, ndx) => {\n            return (\n              <div key={`plat${ndx}`} className=\"results\">\n                <div>{parse(platform).description}\n                  <div\n                    className=\"delete\"\n                    onClick={() =>{\n                      model.deleteTestPlatform(platform);\n                    }}\n                  >ⓧ</div>\n                </div>\n                <Results tests={tests.filter(test => test.platforms[platform])} />\n              </div>\n            );\n          })\n        }\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { classNames } from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class SaveAsGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      saving: false,\n      pat: localStorage.getItem('pat') || '',\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.saveFn();\n  }\n  // this nonsense about markToSaveAsNewGist and markToUpdateNewGist\n  // is because in order to get the browser to save the token as a password\n  // we need to use a form. The reason to save it is to that if you \n  // switch machines you don't have to go look up the password, the browser\n  // will hopefully offer it.\n  markToSaveNewGist = () => {\n    this.saveFn = this.saveNew;\n  }\n  markToUpdateGist =  () => {\n    this.saveFn = this.saveOverExisting;\n  }\n  saveNew = async() => {\n    this.setState({saving: true});\n    const {data, github, addError, onSave, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.createGist(data);\n      gists.addGist(id, name, date);\n      onSave(id);\n      success = true;\n    } catch (e) {\n      addError(`could not create gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      // we apparently need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined})\n      onClose();\n    }\n  }\n  saveOverExisting = async() => {\n    this.setState({saving: true});\n    const {data, gistId, github, addError, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.updateGist(gistId, data);\n      gists.addGist(id, name, date);\n      success = true;\n    } catch (e) {\n      addError(`could not update gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  render() {\n    const {pat, saving} = this.state;\n    const {gistId} = this.props;\n    const canSave = pat && gistId;\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              className={classNames({disabled: !pat || saving})}\n              type=\"submit\"\n              data-type=\"new\"\n              onClick={this.markToSaveNewGist}\n            >Save to new Gist</button>\n            <button\n              className={classNames({disabled: !canSave || saving})}\n              type=\"submit\"\n              data-type=\"update\"\n              onClick={this.markToUpdateGist}\n            >Update Existing Gist</button>\n          </p>\n          <p>\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n            Paste it above. Note: This is a static website. Your personal access token\n            is stored only locally in your browser and only accessible by this domain.\n          </p>\n        </form>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nexport default function SaveAsJSON(props) {\n  const {data} = props;\n  return (\n    <div>\n      <div>\n        Copy the text below, paste into the load ui or put somewhere on the net\n        and make your own URL with <code>{window.location.origin}?src=url-to-json</code>.\n      </div>\n      <pre style={{userSelect: 'all'}}>{JSON.stringify(data)}</pre>\n      <div><a target=\"_blank\" rel=\"noopener noreferrer\" href={`${window.location.origin}?src=${encodeURIComponent(`${window.location.origin}/example.json`)}`}>Example</a></div>\n    </div>\n  );\n}","import React from 'react';\n\nimport {jsonToCompressedBase64} from './compression.js';\n\nexport default function SaveAsURL(props) {\n  const {data} = props;\n  const src = jsonToCompressedBase64(data);\n  const url = `${window.location.origin}?src=${encodeURIComponent(src)}`;\n  return (\n    <div>\n      <div>Copy / bookmark the link below</div>\n      <a className=\"bookmark\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n    </div>\n  );\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\nimport SaveAsGist from './SaveAsGist.js';\nimport SaveAsJSON from './SaveAsJSON.js';\nimport SaveAsURL from './SaveAsURL.js';\nimport Section from './Section.js';\n\nexport default function Save(props) {\n  const {data, github, gistId, onSave, onClose, addError} = props;\n  return (\n    <Dialog title=\"Save As\" onClose={onClose}>\n      <Section heading=\"Save As Gist\">\n        <SaveAsGist gistId={gistId} github={github} data={data} onSave={onSave} addError={addError} onClose={onClose} />\n      </Section>\n      <Section heading=\"Save As URL\">\n        <SaveAsURL data={data} />\n      </Section>\n      <Section heading=\"Save As JSON\">\n        <SaveAsJSON data={data} />\n      </Section>\n    </Dialog>\n  )\n}\n","import React from 'react';\n\nconst defaultGutterSize = 10;\nconst defaultDirection = 'horizontal';\nconst defaultMinSize = 10;\n\nfunction distribute(items, buckets) {\n  const base = items / buckets | 0;\n  const extra = items % buckets;\n  const array = new Array(buckets).fill(base);\n  if (extra === 0) {\n    return array;\n  } else if (extra <= buckets / 2 | 0) {\n    const leap = buckets / extra | 0;\n    const halfLeap = leap / 2 | 0; \n    return array.map((v, i) => v + ((i % leap === halfLeap) ? 1 : 0));\n  } else {\n    const leap = buckets / (buckets - extra) | 0;\n    const halfLeap = leap / 2 | 0;\n    return array.map((v, i) => v + (1 - (i % leap === halfLeap ? 1 : 0)));\n  }\n}\n\nfunction normalizeSizes(sizes) {\n  const totalSize = sizes.reduce((sum, v) => sum + v, 0);\n  return sizes.map(v => v / totalSize);\n}\n\nconst getMouseOrTouchPosition = (e, clientAxis) => e.touches ? e.touches[0][clientAxis] : e[clientAxis];\n\nfunction addSpaceForChildren(sizes, numChildren, gutterSize, minSizePX, totalSizePX) {\n  // const numGutters = numChildren - 1;\n  // const totalGutterSpacePX = numGutters * gutterSize;\n  // const availableSpacePX = totalSizePX - totalGutterSpacePX;\n  //\n  // this is not so trivial\n  // let's say we have 3 items and we add 2 more.\n  // each of those 2 has a minSize. So need to take 2 * minSize\n  // from the 3 items or (2 * minSize / 3). But any of those items\n  // themselves might already be at or near minSize\n  //\n  // This seems like it's then iterative.\n  //\n  // go through and try to remove (minSize * numNewElements / numOldElements)\n  // from each old element but only remove such that that element\n  // is still >= minSize. When done there's possibly some amount\n  // you haven't distributed yet so repeat the process over and over\n  // until it's all distributed.\n  //\n  // given that we don't know which elements are new, for now\n  // lets just reset all the sizes\n  return new Array(numChildren).fill(1 / numChildren);\n}\n\nconst getDirectionProps = direction => (direction === 'horizontal')\n  ? {\n      dimension: 'width',\n      clientAxis: 'clientX',\n      position: 'left',\n      positionEnd: 'right',\n      clientSize: 'clientWidth',\n      style: {\n        width: '100%',\n        display: 'flex',\n      },\n    }\n  : {\n      dimension: 'height',\n      clientAxis: 'clientY',\n      position: 'top',\n      positionEnd: 'bottom',\n      clientSize: 'clientHeight',\n      style: { /*height: '100%'*/ },\n    };\n\nfunction computeNewSizes({\n  startSizes,\n  currentSizes,\n  prevPaneNdx,\n  gutterSize,\n  minSize,\n  deltaPX,\n  outerSizePX,\n}) {\n  const numPanes = currentSizes.length;\n  const numGutters = numPanes - 1;\n  const totalGutterSizePX = numGutters * gutterSize;\n\n  const gutterReservedSizesPX = distribute(totalGutterSizePX, numPanes);\n\n  const nextPaneNdx = prevPaneNdx + 1;\n  const prevPaneStartSizePX = Math.ceil(startSizes[prevPaneNdx] * outerSizePX) - gutterReservedSizesPX[prevPaneNdx];\n  const nextPaneStartSizePX = Math.ceil(startSizes[nextPaneNdx] * outerSizePX) - gutterReservedSizesPX[nextPaneNdx];\n  const spaceUsedByBothElementsPX = prevPaneStartSizePX + nextPaneStartSizePX;\n  const prevPaneNewSizePX = Math.min(\n    Math.max(minSize, prevPaneStartSizePX + deltaPX),\n    spaceUsedByBothElementsPX - minSize);\n  const nextPaneNewSizePX = spaceUsedByBothElementsPX - prevPaneNewSizePX;\n  const newSizes = [\n    ...currentSizes.slice(0, prevPaneNdx),\n    (prevPaneNewSizePX + gutterReservedSizesPX[prevPaneNdx]) / outerSizePX,\n    (nextPaneNewSizePX + gutterReservedSizesPX[nextPaneNdx]) / outerSizePX,\n    ...currentSizes.slice(prevPaneNdx + 2, currentSizes.length),\n  ];\n\n  /*\n  const availableSpacePX = outerSizePX - totalGutterSizePX;\n  const info = `\n  gutterReservedSizes: ${gutterReservedSizesPX}\n  availableSpacePX: ${availableSpacePX}\n  prevStartSizePX: ${prevPaneStartSizePX}\n  nextStartSizePX: ${nextPaneStartSizePX}\n  spaceUsedByBothElementsPX: ${spaceUsedByBothElementsPX}\n  prevNewSizePX: ${prevPaneNewSizePX}\n  nextNewSizePX: ${nextPaneNewSizePX}\n  sizes: ${currentSizes}\n  newSizes: ${newSizes}\n  `;\n  const infoElem = document.querySelector('#info');\n  infoElem.textContent = info;\n  */\n\n  return newSizes;\n}\n\nconst stopMobileBrowserFromScrolling = e => e.preventDefault();\n\nclass Gutter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.elementRef = React.createRef();\n  }\n  handleMouseDownAndTouchStart = (e) => {\n    const {onMouseDownAndTouchStart} = this.props;\n    onMouseDownAndTouchStart(e);\n  }\n  componentDidMount() {\n    // There's no way in React 16 to add passive false event listeners\n    // which means there is no way to drag a splitter and prevent mobile browsers\n    // from scrolling\n    const elem = this.elementRef.current;\n    elem.addEventListener('mousedown', this.handleMouseDownAndTouchStart, {passive: false});\n    elem.addEventListener('touchstart', this.handleMouseDownAndTouchStart, {passive: false});\n  }\n  componentWillUnmount() {\n    const elem = this.elementRef.current;\n    elem.removeEventListener('mousedown', this.handleMouseDownAndTouchStart);\n    elem.removeEventListener('touchstart', this.handleMouseDownAndTouchStart);\n  }\n  render() {\n    const {direction, dragging, current, style} = this.props;\n    return (\n      <div\n        ref={this.elementRef}\n        className={`gutter gutter-${direction} ${dragging && current ? 'gutter-dragging' : ''}`}\n        style={style}\n      />\n    );\n  }\n}\n\nexport default class GManSplit extends React.Component {\n  constructor(props) {\n    super(props);\n    const numPanes = React.Children.count(props.children);\n    const size = 1 / numPanes;\n    this.state = {\n      sizes: new Array(numPanes).fill(size),\n    };\n    this.elementRef = React.createRef();\n  }\n  _setSizes = (sizes) => {\n    this.setState({sizes});\n  }\n  handleMouseUpAndTouchEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.removeEventListener(\"touchmove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    this.setState({dragging: false});\n  };\n  handleMouseAndTouchMove = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      gutterSize = defaultGutterSize,\n      direction = defaultDirection,\n      minSize = defaultMinSize,\n      computeNewSizesFn = computeNewSizes,\n      onSetSizes,\n      sizes: propSizes,\n    } = this.props;\n    const {\n      prevPaneNdx,\n      mouseStart,\n      startSizes,\n      sizes: stateSizes,\n    } = this.state;\n    const setSizes = onSetSizes || this._setSizes;\n    const sizes = onSetSizes ? propSizes : stateSizes;\n\n    const {\n      clientAxis,\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const deltaPX = getMouseOrTouchPosition(e, clientAxis) - mouseStart;\n    const outerSizePX = this.elementRef.current[clientSize];\n\n    const newSizes = computeNewSizesFn({\n      startSizes,\n      currentSizes: sizes,\n      prevPaneNdx,\n      gutterSize,\n      minSize,\n      deltaPX,\n      outerSizePX,\n    });\n\n    setSizes(newSizes);\n  };\n  handleMouseDownAndTouchStart = (e) => {\n    console.log('split mouse down')\n    stopMobileBrowserFromScrolling(e);\n    const {\n      direction = defaultDirection,\n    } = this.props;\n    const {\n      clientAxis,\n    } = getDirectionProps(direction);\n\n    document.addEventListener(\"mousemove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.addEventListener(\"touchmove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    const gutterNdx = Array.prototype.indexOf.call(e.target.parentElement.children, e.target);\n    const prevPaneNdx = (gutterNdx - 1) / 2;    \n    this.setState({\n      startSizes: this.state.sizes.slice(),\n      mouseStart: getMouseOrTouchPosition(e, clientAxis),\n      prevPaneNdx,\n      dragging: true,\n    });\n  };\n  recomputeSizes = () => {\n    // here it's not entirely clear what to do. Maybe we need options\n    // If they user removes a child which sizes do they want? I guess\n    // since they removed a child they passed in new sizes so we should\n    // pass sizes back? Ugh!\n    //\n    // Example:\n    //\n    //   * start: 3 panes, sizes a(33%), b(33%), c(33%)\n    //   * user adjusts to sizes a(10%), b(90%), c(10%)\n    //   * user deletes pane (a)\n    //\n    // If we just continue to use the current sizes the we'd get\n    //\n    //   b(10%), c(90%)\n    //\n    // We have no way of knowing that b should get the 90%\n    //\n    // One way would be to pass responsibility for saving the sizes\n    // up to the parent. Basically if you want to add/remove children\n    // then you need need to keep their state. In that case\n    // passing an `onSetSize` prop. It's a function that will be called\n    // with an array of sizes.  Update your sizes and pass them in as\n    // props\n    //\n    // But, just so we don't completely fail if the user has not opted\n    // into managing the size state then at least do something.\n    const {sizes} = this.state;\n    const {minSize, direction, gutterSize} = this.props;\n    const {\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const numChildren = React.Children.count(this.props.children);\n    const newSizes = numChildren < sizes.length\n      // a child was removed, normalizes the sizes\n      ? normalizeSizes(sizes.slice(0, numChildren))\n      // children were added, make space for them\n      : addSpaceForChildren(sizes, numChildren, gutterSize, minSize, this.elementRef.current.parentElement[clientSize]);\n    this._setSizes(newSizes);\n  }\n  componentDidUpdate() {\n    const {children, onSetSizes} = this.props;\n    const {sizes} = this.state;\n    // we need to check if new elements were added.\n    if (onSetSizes) {\n      return; // not our responsibility\n    }\n\n    const numChildren = React.Children.count(children);\n    if (sizes.length !== numChildren) {\n      setTimeout(this.recomputeSizes);\n    }\n  }\n  render() {\n    const {\n      children, \n      direction = defaultDirection, \n      gutterSize = defaultGutterSize, \n      sizes: propSizes,\n      onSetSizes,\n      minSize,\n      ...rest\n    } = this.props;\n    const {\n      dragging,\n      prevPaneNdx,\n      sizes: stateSizes,\n    } = this.state;\n    const {\n      dimension,\n      style,\n    } = getDirectionProps(direction);\n\n    const sizes = onSetSizes ? propSizes : stateSizes;\n    const numPanes = React.Children.count(children);\n    const numGutters = numPanes - 1;\n    const totalGutterSpace = gutterSize * numGutters;\n    const gutterStyle = {[dimension]: `${gutterSize}px`};\n    const gutterReservedSizes = distribute(totalGutterSpace, numPanes);\n\n    let childNdx = 0;\n    let first = true;\n    const newChildren = [];\n    React.Children.forEach(children, (child, props) => {\n      if (!React.isValidElement(child)) {\n        return null;\n      }\n      if (!first) {\n        newChildren.push(\n          <Gutter\n            key={`gutter${newChildren.length}`}\n            direction={direction}\n            dragging={dragging}\n            current={dragging && childNdx === prevPaneNdx + 1}\n            style={gutterStyle}\n            onMouseDownAndTouchStart={this.handleMouseDownAndTouchStart}\n          />\n        );\n      }\n\n      const style = {\n        [dimension]: `calc(${sizes[childNdx] * 100}% - ${gutterReservedSizes[childNdx]}px)`,\n      };\n\n      newChildren.push(\n        <div key={`pane${newChildren.length}`} style={style}>\n          {React.cloneElement(child)}\n        </div>\n      );\n      first = false;\n      ++childNdx;\n    });\n    return (\n      <div\n        className=\"split\"\n        ref={this.elementRef}\n        style={{\n          ...this.props.style,\n          ...style,\n          ...(dragging && {userSelect: 'none'})\n        }}\n        {...rest}\n      >\n        {newChildren}\n        {dragging ? \n          <style>\n            iframe {'{'}\n              pointer-events: none !important;\n            {'}'}\n          </style> : []\n        }\n      </div>\n    );\n  }\n}\n\n/*\ndirection\nsizes\nonSetSizes\ncompute\n\n*/\n\n","import React from 'react';\nimport EditLine from './EditLine.js';\nimport CodeArea from './CodeArea.js';\n\nexport default function TestArea(props) {\n  const {desc, title, onTitleChange, hackKey} = props;\n  const heading = (\n    <EditLine\n      placeholder={desc}\n      value={title}\n      onChange={onTitleChange}\n    />\n  );\n\n  return (\n    <CodeArea key={hackKey} {...props} heading={heading} />\n  );\n}","import * as model from './model.js';\n\nexport default class TestRunner extends EventTarget {\n  abort() {\n    if (this._abortImpl) {\n      this._abortImpl();\n    }\n  }\n  run(data) {\n    return new Promise(async(resolve, reject) => {\n      model.clearAllTestResults();\n\n      const runTests = (test) => {\n        return new Promise((resolve, reject) => {\n          const iframe = document.createElement('iframe');\n\n          const base = process.env.NODE_ENV === 'development' ? 'http://localhost:8080' : window.location.origin;\n          const html = `\n          <${'script'} type=\"module\" src=\"${base}/error-reporter.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/lodash.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/platform.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/benchmark.js\"></${'script'}>\n          <${'script'}>\n          const model = ${JSON.stringify({\n            ...data,\n            settings: {\n              ...(data.settings && data.settings),\n              test,\n            },\n          })};\n          </${'script'}>\n          <${'script'}>\n          ${data.initialization}\n          </${'script'}>\n          <body>\n          </body>\n          <${'script'} type=\"module\" src=\"${base}/runner.js\"></${'script'}>\n          `;\n          const runnerData = {\n            name: data.title,\n            files: [\n              {\n                name: 'html',\n                content: html,\n              },\n              {\n                name: 'css',\n                content: '',\n              },\n              {\n                name: 'javascript',\n                content: '',\n              },\n            ],\n          };\n\n          let cleanup = (result) => {\n            cleanup = () => {}; // only cleanup once\n            window.removeEventListener('message', handleMessage);\n            iframe.remove();\n            resolve(result);\n          };\n\n          const abort = () => {\n            if (iframe.contentWindow) {\n              iframe.contentWindow.postMessage({type: 'abort'}, '*');\n            }\n            cleanup({success: true, data: {message: 'aborted'}});\n          };\n          this._abortImpl = abort;\n\n          const updateTestResults = (data) => {\n            const ndx = parseInt(data.name);\n            const newData = {...data};\n            delete newData.id;\n            delete newData.name;\n            model.setTestResult(ndx, newData, window.navigator.userAgent);\n            const event = new Event('progress');\n            event.data = {\n              testNdx: ndx\n            };\n            this.dispatchEvent(event);\n          };\n\n          const handlers = {\n            // error caught by window.addEventListener('error')\n            uncaughtError(data) {\n              abort();\n              resolve({success: false, data});\n            },\n            // benchmark onAbort\n            abort(data) {\n              cleanup({success: true, data: {message: 'aborted because of error'}});\n            },\n            // benchmark onError\n            error(data) {\n              updateTestResults(data);\n            },\n            // benchmark onCycle\n            cycle(data) {\n              if (!test) {\n                updateTestResults(data)\n              }\n            },\n            // benchmark onComplete\n            complete(data) {\n              cleanup({success: true, data});\n            },\n            gimmeDaCodez: () => {\n              iframe.contentWindow.postMessage({\n                type: 'run',\n                data: runnerData,\n              }, \"*\");\n            },\n          };\n\n          const handleMessage = (e) => {\n            const {type, data} =  e.data;\n            const fn = handlers[type];\n            if (fn) {\n              fn(data);\n            } else {\n              console.error('unknown code', e.data);\n            }\n          };\n          window.addEventListener('message', handleMessage);\n          iframe.src = `https://jsbenchitrunner.devcomments.org/runner-02.html${test ? '?test=true' : ''}`;\n          //iframe.src = `http://localhost:8081/runner-02.html${test ? '?test=true' : ''}`;\n          iframe.style.display = 'none';\n          document.body.appendChild(iframe);\n        });\n      }\n\n      // first run all tests the once each\n      // so if there is an error in the last test\n      // we don't have to wait for all the other\n      // tests to run to get a notified.\n      try {\n        await runTests(true);\n      } catch (e) {\n        resolve({success: false, e});\n        return;\n      }\n\n      try {\n        const result = await runTests();\n        resolve(result);\n      } catch(e) {\n        reject(e);\n      }\n    });\n  }\n};","import React from 'react';\n\nimport { classNames } from './css-utils.js';\nimport EditLine from './EditLine.js';\nimport Footer from './Footer.js';\nimport GitHub from './GitHub.js';\nimport Help from './Help.js';\nimport LatestResults from './LatestResults.js';\nimport Load from './Load.js';\nimport {loadGistFromSrc} from './loader.js';\nimport * as model from './model.js';\nimport NamedCodeArea from './NamedCodeArea.js';\nimport Platforms from './Platforms.js';\nimport Save from './Save.js';\nimport Split from './Split.js';\nimport TestArea from './TestArea.js';\nimport TestRunner from './TestRunner.js';\n\nimport './App.css';\n\nif (process.env.NODE_ENV === 'development') {\n  window.d = model.data;\n}\n\nconst backupKey = 'jsBenchIt-backup';\nconst noJSX = () => [];\nconst stringOrEmpty = (str, prefix = '', suffix = '') => str ? `${prefix}${str}${suffix}` : '';\nconst darkMatcher = window.matchMedia('(prefers-color-scheme: dark)');\nconst makeDisqusId = () => {\n  const loc = window.location;\n  const query = Object.fromEntries(new URLSearchParams(loc.search).entries());\n  const src = query.src;\n  return src\n      ? `${encodeURIComponent(src)}`\n      : '';\n}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      path: window.location.pathname,\n      dark: darkMatcher.matches,\n      disqusId: makeDisqusId(),\n      running: false,\n      loading: false,\n      dialog: noJSX,\n      dataVersion: 0,\n      gistId: '',\n      pat: localStorage.getItem('pat'),\n      messages: [],\n      userData: {},\n      testNum: 0,\n    };\n    this.github = new GitHub();\n  }\n  componentDidMount() {\n    this.github.addEventListener('userdata', (e) => {\n      this.setState({\n        userData: e.data,\n      });\n    });\n    model.add('path', window.location.pathname);\n    model.subscribe('path', (newValue) => {\n      window.history.pushState({}, '', newValue);\n      this.setState({\n        path: newValue,\n      });\n    });\n    // I still am not sure how I'm supposed to handle this.\n    // Putting my model in the state itself seems wrong\n    // and doesn't actually help since I'd have to \n    // generate an entirely new state object to change any\n    // nested property.\n    //\n    // Storing the data outside I see no way to tell\n    // components to re-render except to call forceUpdate\n    // which all the documentation says \"if you call this\n    // you're doing it wrong\".\n    //\n    // Redux is a joke. 50 lines code needed to set\n    // a single field. Repeat those 50 lines for every field.\n    // Things like redux-tools make it less to type those\n    // 50 lines but they still execute 50 to 500 lines of code\n    // just to set a single value.\n    model.subscribe('dataVersion', (dataVersion) => {\n      this.setState({dataVersion})\n    });\n    // this is a hack because I can't figure out how to\n    // update the CodeMirror areas\n    model.subscribe('updateVersion', (updateVersion) => {\n      this.setState({updateVersion})\n    });\n\n    darkMatcher.addEventListener('change', () => {\n      this.setState({dark: darkMatcher.matches});\n    });\n\n    const query = Object.fromEntries(new URLSearchParams(window.location.search).entries());\n    const backup = localStorage.getItem(backupKey);\n    let loaded = false;\n    if (backup) {\n      try {\n        const data = JSON.parse(backup);\n        if (data.href === window.location.href) {\n          model.setData(data.data);\n          loaded = true;\n          this.addInfo('loaded backup from local storage')\n        }\n      } catch (e) {\n        //\n      }\n      localStorage.removeItem(backupKey);\n    }\n    if (!loaded && query.src) {\n      this.loadData(query.src);\n    }\n  }\n  async loadData(src) {\n    this.setState({loading: true});\n    try {\n      const {data, id} = await loadGistFromSrc(src, this.github);\n      model.setData(data);\n      if (id) {\n        this.setState({gistId: src})\n      }\n    } catch (e) {\n      console.warn(e);\n      this.addError(`could not load benchmark: src=${src} ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  addMsg = (msg, className) => {\n    switch (className) {\n      case 'error':\n        console.error(msg);\n        break;\n      default:\n        console.log(msg);\n        break;\n    }\n    this.setState({messages: [{msg, className}, ...this.state.messages]});\n    setTimeout(() => {\n      this.setState({messages: this.state.messages.slice(0, this.state.messages.length - 1)});\n    }, 5000);\n  }\n  addInfo = (msg) => this.addMsg(msg, 'info');\n  addError = (msg) => this.addMsg(msg, 'error');\n  closeDialog = () => {\n    this.setState({dialog: noJSX});\n  }\n  handleNew = async() => {\n    model.setData(model.getNewTestData());\n  }\n  handleRun = async () => {\n    this.setState({running: true, testNum: 0});\n    localStorage.setItem(backupKey, JSON.stringify({\n      href: window.location.href,\n      data: model.data,\n    }));\n    console.log('--start--');\n    try {\n      const testRunner = new TestRunner();\n      testRunner.addEventListener('progress', (e) => {\n        this.setState({testNum: e.data.testNdx + 1});\n      });\n      this.abort = testRunner.abort.bind(testRunner);\n      const {success, data} = await testRunner.run(model.data);\n      if (!success) {\n        this.addError(`could not run benchmark:\\n${stringOrEmpty(data?.message)}${stringOrEmpty(data?.filename, ':')}${stringOrEmpty(data?.lineno, ':')}${stringOrEmpty(data?.colno, ':')}`);\n      }\n    } catch(e) {\n      this.addError(e);\n    }\n    this.abort = undefined;\n    localStorage.removeItem(backupKey);\n    console.log('--done--');\n    this.setState({running: false});\n  }\n  handleSave = async () => {\n    this.setState({dialog: this.renderSave});\n  }\n  handleHelp = () => {\n    this.setState({dialog: this.renderHelp});\n  }\n  handleLoad = () => {\n    this.setState({dialog: this.renderLoad});\n  }\n  handleOnLoad = async() => {\n    this.setState({dialog: noJSX});\n  }\n  handleOnSave = (gistId) => {\n    window.history.pushState({}, '', `${window.location.origin}?src=${gistId}`);\n    this.setState({gistId});\n  }\n  handleAbort = () => {\n    this.abort();\n  };\n  renderHelp = () => {\n    return (<Help onClose={this.closeDialog} />);\n  }\n  renderLoad = () => {\n    return (\n      <Load\n        onLoad={this.handleOnLoad}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n      />\n    );\n  }\n  renderSave = () => {\n    const data = model.data;\n    return (\n      <Save\n        onSave={this.handleOnSave}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n        gistId={this.state.gistId}\n        data={data} />\n    );\n  }\n  render() {\n    const data = model.data;\n    const {\n      running,\n      loading,\n      dialog,\n      updateVersion: hackKey,\n      userData,\n      testNum,\n    } = this.state;\n    const disabled = running;\n    const hideStyle = {\n      ...(!running && {display: 'none'}),\n    };\n    const disabledClass = classNames({disabled});\n    return (\n      <div className=\"App\">\n        <div className=\"head\">\n          <div>\n            <img src=\"/resources/images/logo.svg\" alt=\"logo\"/>\n          jsBenchIt.org<span className=\"beta\">(beta)</span>\n          </div>\n          <div>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsbenchit/\">\n            <img alt=\"github\" src=\"/resources/images/octocat-icon.svg\"/>\n          </a>\n          </div>\n        </div>\n        <div className=\"top\">\n          <div className={classNames(\"left\", {disabled})}>\n            <div className=\"name\">\n              <EditLine value={data.title} onChange={v => model.setTitle(v)} />\n              {userData.userName ? <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}>{userData.name}</a></div> : []}\n              {userData.avatarURL ? <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}><img className=\"avatar\" src={userData.avatarURL} alt=\"avatar\"/></a> : []}\n            </div>\n          </div>\n          <div className=\"right\">\n            { running\n                ? <button tabIndex=\"1\" onClick={this.handleAbort}>Cancel</button>\n                : <button tabIndex=\"1\" onClick={this.handleRun}>Run</button>\n            }\n            <button tabIndex=\"1\" className={disabledClass} onClick={this.handleSave}>Save</button>\n            <button tabIndex=\"1\" className={disabledClass} onClick={this.handleNew}>New</button>\n            <button tabIndex=\"1\" className={disabledClass} onClick={this.handleLoad}>Load</button>\n            <button tabIndex=\"1\" className={disabledClass} onClick={this.handleHelp}>?</button>\n          </div>\n        </div>\n        {\n          loading ? [] : (\n            <div className=\"bottom\">\n              <Split direction=\"horizontal\">\n                <div className=\"left\">\n                  <NamedCodeArea\n                    hackKey={hackKey}\n                    title=\"Initialization\"\n                    value={data.initialization}\n                    show={data.initialization.length > 0}\n                    onValueChange={v => model.setInitialization(v)}\n                  />\n                  <NamedCodeArea\n                    hackKey={hackKey}\n                    title=\"Before Each Test\"\n                    value={data.setup}\n                    show={data.setup.length > 0}\n                    onValueChange={v => model.setSetup(v)}\n                   />\n                  {\n                    data.tests.map((test, ndx) => {\n                      const extra = (\n                        <div><button onClick={_ => model.deleteTest(ndx)}>-</button></div>\n                      );\n                      return (\n                        <TestArea\n                          key={`ca${ndx}`}\n                          hackKey={hackKey}\n                          desc={`Case ${ndx + 1}`}\n                          title={test.name}\n                          value={test.code}\n                          async={test.async}\n                          onTitleChange={title => model.setTestName(ndx, title)}\n                          onValueChange={value => model.setTestCode(ndx, value)}\n                          extra={extra}\n                        />\n                      );\n                    })\n                  }\n                  <div>\n                    <button onClick={model.addTest}>+</button>\n                  </div>\n                  <div className=\"blocked\" style={hideStyle}>\n                    <div className=\"abort\">\n                      <div>Testing {testNum + 1} of {data.tests.length}</div>\n                      <div>Time remaining: ~{(data.tests.length - testNum) * 5}s</div>\n                      <div><button onClick={this.handleAbort}>Stop Benchmark</button></div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"right\">\n                  <LatestResults tests={data.tests}/>\n                  <Platforms tests={data.tests}/>\n                </div>\n              </Split>\n            </div>\n          )\n        }\n        <Footer\n          disqusId={makeDisqusId()}\n          title={data.title}\n        />\n        {dialog()}\n        <div className=\"messages\">\n          {\n            this.state.messages.map(({msg, className}, i) => (<div className={className} key={`err${i}`}>{msg}</div>))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}