(this.webpackJsonpjsBenchIt=this.webpackJsonpjsBenchIt||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),c=a.n(o),s=(a(55),a(8)),i=a(1),l=a.n(i),u=a(2),d=a(18),m=a(3),h=a(7),p=a(4),v=a(5),g=a(6),f=/([a-z])([A-Z])/g,b=function(e,t,a){return"".concat(t,"-").concat(a)},E=function(e){return e.replace(f,b).toLowerCase()};function y(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var r=0,o=a;r<o.length;r++){var c=o[r];if("string"===typeof c)e.push(c);else for(var s=0,i=Object.entries(c);s<i.length;s++){var l=Object(g.a)(i[s],2),u=l[0],d=l[1];d&&e.push(E(u))}}return e.join(" ")}function w(e){return r.a.createElement("input",{type:"text",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder,value:e.value})}var k=a(12),j=a(28),S=function(e){return JSON.parse(e.files["jsBenchIt.json"].content)},O=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).pat="",e.user={},e.unAuthorizedOctokit=new j.a({userAgent:"jsBenchIt v0.0.1"}),e}return Object(h.a)(a,[{key:"_updateUserData",value:function(e){if(e.owner){this.user.name=e.owner.login,this.user.avatarURL=e.owner.avatar_url;var t=new Event("userdata");t.data=Object(s.a)({},this.user),this.dispatchEvent(t)}}},{key:"setPat",value:function(e){e!==this.pat&&(this.pat=e,this.authorizedOctokit=new j.a({auth:e,userAgent:"jsBenchIt v0.0.1"}))}},{key:"getUserGists",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return!!e.files["jsBenchIt.json"]})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.octokit.gists.get({gist_id:t});case 2:return a=e.sent,this._updateUserData(a.data),e.abrupt("return",S(a.data));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAnonGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,this._updateUserData(n),e.abrupt("return",S(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.gists.create({description:t.title,public:!0,files:{"jsBenchIt.json":{content:JSON.stringify(t)}}});case 2:return a=e.sent,this._updateUserData(a.data),e.abrupt("return",a.data.id);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGist",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>2&&void 0!==r[2])||r[2],e.next=3,this.authorizedOctokit.gists.update({gist_id:t,description:a.title,public:n,files:{"jsBenchIt.json":JSON.stringify(a)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"octokit",get:function(){return this.authorizedOctokit||this.unAuthorizedOctokit}}]),a}(Object(k.a)(EventTarget)),C=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){27===t.keyCode&&e.props.onClose()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,n=e.onClose;return r.a.createElement("div",{onClick:n,className:"dialog"},r.a.createElement("div",{tabIndex:"-1",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"dialog-heading"},r.a.createElement("div",{className:"dialog-title"},t),r.a.createElement("div",{className:"dialog-close"},r.a.createElement("button",{onClick:n},"X"))),r.a.createElement("div",{className:"dialog-content"},a)))}}]),a}(r.a.Component);function N(e){var t=e.onClose;return r.a.createElement(C,{title:"jsBenchIt",onClose:t},r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"Add your test cases, click ",r.a.createElement("code",null,"Run"),"."),r.a.createElement("h2",null,"Contribute, Fix, Enhance!"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsbenchit"},"https://github.com/greggman/jsbenchit")),r.a.createElement("p",null,"Also see ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org"},"jsgist.org")),r.a.createElement("h2",null,"Saving"),r.a.createElement("p",null,"You can save your tests in multiple ways."),r.a.createElement("ol",null,r.a.createElement("li",null,"To a github gist using a ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token"},"Personal Access Token"),r.a.createElement("p",null,"Be sure to give the token ",r.a.createElement("b",null,"ONLY GIST")," permissions. Paste it into the save as UI click ",r.a.createElement("code",null,"Save to new gist"),". Be sure to keep a copy of it somewhere so you can use if you clear your browser's storage or switch machines or browser. This site is a static site. The token is saved in the browser only.")),r.a.createElement("li",null,"Save it manually into github",r.a.createElement("p",null,"Copy the JSON. Go to github. Create a new gist. Name the file",r.a.createElement("code",null,"jsBenchIt.json"),' Paste the JSON in. Pick "Create public gist".'),r.a.createElement("p",null,"Note the id in the URL after you create the gist."),r.a.createElement("p",null,"Create a url in the form ",r.a.createElement("code",null,"https://jsbenchit.org/?src=<gist_id>--"),"."),r.a.createElement("p",null,"Example: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsbenchit.org/?src=524016d2dd0fb3de37c8c8dac8e1c35b"},"https://jsbenchit.org/?src=524016d2dd0fb3de37c8c8dac8e1c35b"))),r.a.createElement("li",null,"Save it manually somewhere else.",r.a.createElement("p",null,"If there's some other service that will provide a string via http get then copy and save the JSON there then create a URL in the form of ",r.a.createElement("code",null,"https://jsbenchit.org/?src=<url>"),". Note: you will have to escape the URL although if just paste it into your browser it will likely do the conversion for you.")),r.a.createElement("li",null,"Save it as a bookmark or link",r.a.createElement("p",null,"In the SaveAs dialog there's a link that contains all the data for your benchmark."))),r.a.createElement("h2",null,"Comparing across browsers"),r.a.createElement("p",null,"Saving saves the results of the benchmark so if you want to compare across browsers:"),r.a.createElement("h3",null,"With Personal Access Token"),r.a.createElement("ol",null,r.a.createElement("li",null,"Create your benchmark"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Save a new gist using Personal Access Token"),r.a.createElement("li",null,"Copy URL to another browser"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Save over old gist using Personal Access Token")),r.a.createElement("p",null,"Repeat steps 4, 5, 6 on other browsers."),r.a.createElement("h3",null,"With URL"),r.a.createElement("ol",null,r.a.createElement("li",null,"Create your benchmark"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Pick Save and copy the URL"),r.a.createElement("li",null,"Copy URL to another browser"),r.a.createElement("li",null,"Run it"),r.a.createElement("li",null,"Pick Save and copy the URL")),r.a.createElement("p",null,"Repeat steps 4, 5, 6 on other browsers."),r.a.createElement("p",null,"Note: In general it only makes sense to compare results of browsers on the same machine.")))}var x=a(21),I=a(45),L=a.n(I),R=a(46),A=(new L.a).compile(R),U={};function P(e){var t=U[e]||{subscriptions:new Set};return U[e]=t,t}function T(e,t){var a=P(e);return void 0!==t&&(a.value=t),a}function z(e){return U[e]}function J(e,t){var a=U[e];if(!a)throw new Error("no such track value: ".concat(e));a.value=t;var n,r=Object(d.a)(a.subscriptions.keys()),o=Object(x.a)(r);try{for(o.s();!(n=o.n()).done;){(0,n.value)(t,e)}}catch(c){o.e(c)}finally{o.f()}}function _(e,t){P(e).subscriptions.add(t)}var B={title:"My Test",initialization:"// runs once",setup:"// runs before each test",tests:[{name:"test 1",code:"// put test code here",results:{},platforms:{}},{name:"test 2",code:"// put test code here",results:{},platforms:{}}]};function D(){return JSON.parse(JSON.stringify(B))}var V=D();function G(){J("dataVersion",z("dataVersion")+1)}function M(){var e="test ".concat(V.tests.length+1);V.tests.push({name:e,code:"// ".concat(e),results:{},platforms:{}}),G()}function K(e){!function(e){if(!A(e))throw new Error("data not valid:\n".concat(A.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))))}(e),V=e,G(),J("updateVersion",z("updateVersion")+1)}function W(e){return(t=e.results)&&!t.error&&!t.aborted;var t}function H(e){var t,a=e.hz,n=void 0===a?0:a,r=e.stats,o=void 0===r?{numSamples:0,rme:0}:r,c=(t=n.toFixed(n<100?2:0),t=String(t).split("."),"".concat(t[0].replace(/(?=(?:\d{3})+$)(?!\b)/g,",")).concat(t[1]?".".concat(t[1]):"")),s=o.rme.toFixed(2);return"".concat(c," ops/sec \xb1").concat(s,"% (runs: ").concat(o.numSamples,")")}A(V)||console.log(A.errors),T("dataVersion",0),T("updateVersion",0);var $=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{};function Y(e){var t,a,n,o=$.matches,c=e.max,i=e.test,l=i.name,u=i.results,d=u.aborted,m=u.hz,h=void 0===m,p=d?"aborted":h?"not run":H(u),v=m/c,g=d||h?"100%":"".concat((100*v).toFixed(1),"%"),f=d||h?{}:{background:(t=1/7-v/7,a=1,n=o?.4:.8,"hsl(".concat(360*t|0,", ").concat(100*a|0,"%, ").concat(100*n|0,"%)"))};return r.a.createElement("div",{className:y("result",{aborted:d,unRun:h})},r.a.createElement("div",{className:"result-bar",style:Object(s.a)({width:g},f)}),r.a.createElement("div",{className:"result-info",style:{}},r.a.createElement("div",{className:"result-name"},l),r.a.createElement("div",{className:"result-result"},p)))}function F(e){var t=e.tests,a=t.filter(W).reduce((function(e,t){return Math.max(e,t.results.hz||0)}),0);return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(Y,{max:a,test:e,key:"res".concat(t)})})))}function q(e){var t=e.tests;return r.a.createElement("div",{className:"results"},r.a.createElement("div",null,"Latest Results:"),r.a.createElement(F,{tests:t}))}var X=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handlePATChange=function(t){var a=t.target.value;e.setState({pat:a}),localStorage.setItem("pat",a)},e.loadGists=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,o,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.props,r=n.addError,o=n.github,c=e.state.pat,o.setPat(c),t.prev=4,t.next=7,o.getUserGists();case 7:s=t.sent,e.setState({gists:s.map((function(e){return e}))}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),r("could not load gists: ".concat(t.t0));case 14:e.setState({loading:!1});case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,pat:localStorage.getItem("pat")||"",gists:[]},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=e.pat,a=e.gists,n=e.loading,o=!!t&&!n;return r.a.createElement("div",null,r.a.createElement("div",{className:"save-as-gist-pat"},r.a.createElement("div",null,"Personal Access Token:\xa0"),r.a.createElement("div",null,r.a.createElement("input",{type:"password",value:t,placeholder:"personal access token",onChange:this.handlePATChange}))),r.a.createElement("p",null,r.a.createElement("button",{className:y({disabled:!o}),onClick:this.loadGists},"Load Your Gists")),r.a.createElement("p",null,r.a.createElement("a",{href:"https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token"},"Create a Personal Access Token")," with only ",r.a.createElement("b",null,"gist")," permissions. Paste it above. Note: This is a static website. Your person access token is stored only locally in your browser and only accessible by this domain."),a.length?r.a.createElement("table",{className:"gists"},r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:"g".concat(t)},r.a.createElement("td",null,r.a.createElement("a",{href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent(e.id))},e.description)),r.a.createElement("td",null,e.updated_at.substring(0,10)))})))):[])}}]),a}(r.a.Component),Z=a(47),Q=(a(95),a(96),a(97),a(40),a(98),a(101),a(102),window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{}),ee=function(){};function te(e){var t=e.value,a=e.hackKey,o=e.options,c=void 0===o?{}:o,i=e.onValueChange,l=void 0===i?ee:i,u=Object(n.useState)(t),d=Object(g.a)(u,2),m=d[0],h=d[1],p=Q.matches;return r.a.createElement(Z.Controlled,{key:a,value:m,options:Object(s.a)({mode:"javascript",scrollbarStyle:"overlay",theme:p?"material":"eclipse"},c.editor&&c.editor),onBeforeChange:function(e,t,a){h(a)},onChange:function(e,t,a){l(a)}})}function ae(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100px"}},r.a.createElement(te,{value:o,onValueChange:c})),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){var t=e.onLoad,a=e.addError;try{K(JSON.parse(o)),t()}catch(n){a("bad json: ".concat(n))}}},"Load JSON")))}function ne(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),o=a[0],c=a[1];function s(){return(s=Object(u.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.addError,n=e.onLoad,t.prev=1,t.next=4,fetch(o);case 4:return r=t.sent,t.next=7,r.json();case 7:K(t.sent),n(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a("could not load url: ".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(w,{value:o,onChange:c,placeholder:"url-to-json"}),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return s.apply(this,arguments)}},"Load URL")))}function re(e){var t=e.heading,a=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"section-heading"},t),r.a.createElement("div",{className:"section-content"},a))}function oe(e){var t=e.data,a=e.github,n=e.onLoad,o=e.onClose,c=e.addError;return r.a.createElement(C,{title:"Load",onClose:o},r.a.createElement(re,{heading:"Load Gist"},r.a.createElement(X,{github:a,data:t,onLoad:n,addError:c})),r.a.createElement(re,{heading:"Load URL"},r.a.createElement(ne,{data:t,onLoad:n,addError:c})),r.a.createElement(re,{heading:"Load JSON"},r.a.createElement(ae,{data:t,onLoad:n,addError:c})))}var ce=a(49);function se(e){var t=e.value,a=e.hackKey,o=e.heading,c=e.extra,s=void 0===c?[]:c,i=e.options,l=void 0===i?{}:i,u=e.onValueChange,d=Object(n.useState)(!1!==e.show),m=Object(g.a)(d,2),h=m[0],p=m[1],v=!h;return r.a.createElement("div",{className:"code-area"},r.a.createElement("div",{className:"expander"},r.a.createElement("div",{className:"hider",onClick:function(){return p(!h)}},h?"\u25bc":"\u25c0"),o),r.a.createElement("div",{className:y("hidee",{hideeHide:v})},r.a.createElement(ce.a,{style:{background:"red",position:"relative"},defaultSize:{height:200},minHeight:20,enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}},r.a.createElement(te,{hackKey:a,value:t,options:l,onValueChange:u})),s))}function ie(e){var t=e.title,a=e.hackKey,n=r.a.createElement("div",{className:"named"},t);return r.a.createElement(se,Object.assign({hackKey:a,heading:n},e))}var le=a(48);function ue(e){var t=e.tests,a=Object(d.a)(t.reduce((function(e,t){return Object.keys(t.platforms).reduce((function(e,t){return e.add(t),e}),e)}),new Set));return r.a.createElement("div",null,r.a.createElement("div",null,"Platforms:"),r.a.createElement("div",null,a.map((function(e,a){return r.a.createElement("div",{key:"plat".concat(a),className:"results"},r.a.createElement("div",null,Object(le.parse)(e).description),r.a.createElement(F,{tests:t.filter((function(t){return t.platforms[e]}))}))}))))}var de=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handlePATChange=function(t){var a=t.target.value;e.setState({pat:a}),localStorage.setItem("pat",a)},e.onSaveNew=Object(u.a)(l.a.mark((function t(){var a,n,r,o,c,s,i,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({saving:!0}),a=e.props,n=a.data,r=a.github,o=a.addError,c=a.onSave,s=a.onClose,i=e.state.pat,u=!1,r.setPat(i),t.prev=5,t.next=8,r.createGist(n);case 8:d=t.sent,c(d),u=!0,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),o("could not create gist: ".concat(t.t0));case 16:e.setState({saving:!1}),u&&s();case 18:case"end":return t.stop()}}),t,null,[[5,13]])}))),e.onSaveOverExisting=Object(u.a)(l.a.mark((function t(){var a,n,r,o,c,s,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({saving:!0}),a=e.props,n=a.data,r=a.gistId,o=a.github,c=a.addError,s=a.onClose,i=e.state.pat,u=!1,o.setPat(i),t.prev=5,t.next=8,o.updateGist(r,n);case 8:u=!0,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),c("could not update gist: ".concat(t.t0));case 14:e.setState({saving:!1}),u&&s();case 16:case"end":return t.stop()}}),t,null,[[5,11]])}))),e.state={saving:!1,pat:localStorage.getItem("pat")||""},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state.pat,t=this.props.gistId,a=e&&t;return r.a.createElement("div",null,r.a.createElement("div",{className:"save-as-gist-pat"},r.a.createElement("div",null,"Personal Access Token:\xa0"),r.a.createElement("div",null,r.a.createElement("input",{type:"password",value:e,placeholder:"personal access token",onChange:this.handlePATChange}))),r.a.createElement("p",null,r.a.createElement("button",{className:y({disabled:!e}),onClick:this.onSaveNew},"Save to new Gist"),r.a.createElement("button",{className:y({disabled:!a}),onClick:this.onSaveOverExisting},"Update Existing Gist")),r.a.createElement("p",null,r.a.createElement("a",{href:"https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token"},"Create a Personal Access Token")," with only ",r.a.createElement("b",null,"gist")," permissions. Paste it above. Note: This is a static website. Your person access token is stored only locally in your browser and only accessible by this domain."))}}]),a}(r.a.Component);function me(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("div",null,"Copy the text below, paste into the load ui or put somewhere on the net and make your own URL with ",r.a.createElement("code",null,window.location.origin,"?src=url-to-json"),"."),r.a.createElement("pre",{style:{userSelect:"all"}},JSON.stringify(t)),r.a.createElement("div",null,r.a.createElement("a",{href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent("".concat(window.location.origin,"/example.json")))},"Example")))}var he=a(27),pe=a(29),ve=new TextEncoder,ge=new TextDecoder,fe=function(e){return e.startsWith("cb64,")||e.startsWith("b64,")};function be(e){var t=e.startsWith("cb64,"),a=t?"cb64,":"b64,",n=e.substr(a.length).replace(/-/g,"+").replace(/_/g,"/"),r=new Uint8Array(Object(he.decode)(n)),o=t?Object(pe.b)(r):r,c=ge.decode(o);return JSON.parse(c)}function Ee(e){var t=function(e){var t=JSON.stringify(e),a=ve.encode(t),n=Object(pe.a)(a),r=n.length<a.length,o=Object(he.encode)(r?n:a).replace(/\+/g,"-").replace(/\//g,"_");return"".concat(r?"cb64,":"b64,").concat(o)}(e.data),a="".concat(window.location.origin,"?src=").concat(encodeURIComponent(t));return r.a.createElement("div",null,r.a.createElement("div",null,"Copy / bookmark the link below"),r.a.createElement("a",{className:"bookmark",href:a,target:"_blank",rel:"noopener noreferrer"},a))}function ye(e){var t=e.data,a=e.github,n=e.gistId,o=e.onSave,c=e.onClose,s=e.addError;return r.a.createElement(C,{title:"Save As",onClose:c},r.a.createElement(re,{heading:"Save As Gist"},r.a.createElement(de,{gistId:n,github:a,data:t,onSave:o,addError:s,onClose:c})),r.a.createElement(re,{heading:"Save As URL"},r.a.createElement(Ee,{data:t})),r.a.createElement(re,{heading:"Save As JSON"},r.a.createElement(me,{data:t})))}function we(e){var t=e.desc,a=e.title,n=e.onTitleChange,o=e.hackKey,c=r.a.createElement(w,{placeholder:t,value:a,onChange:n});return r.a.createElement(se,Object.assign({key:o},e,{heading:c}))}var ke=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"abort",value:function(){this._abortImpl&&this._abortImpl()}},{key:"run",value:function(e){var t=this;return new Promise((function(a){var n=window.location.origin,r="\n      <".concat("script",' type="module" src="',n,'/error-reporter.js"></',"script",">\n      <","script",' src="').concat(n,'/3rdparty/lodash.js"></',"script",">\n      <","script",' src="').concat(n,'/3rdparty/platform.js"></',"script",">\n      <","script",' src="').concat(n,'/3rdparty/benchmark.js"></',"script",">\n      <","script",">\n      const model = ").concat(JSON.stringify(e),";\n      </","script",">\n      <","script",">\n      ").concat(e.initialization,"\n      </","script",">\n      <body>\n      </body>\n      <","script",' type="module" src="').concat(n,'/runner.js"></',"script",">\n      "),o=document.createElement("iframe");!function(){var e,t=Object(x.a)(V.tests);try{for(t.s();!(e=t.n()).done;){e.value.results={}}}catch(a){t.e(a)}finally{t.f()}G()}();var c=function(){window.removeEventListener("message",d),o.remove()},i=function(){o.contentWindow&&o.contentWindow.postMessage({type:"abort"},"*"),c()};t._abortImpl=i;var l=function(e){var t=parseInt(e.name),a=Object(s.a)({},e);delete a.id,delete a.name,function(e,t,a){var n=V.tests[e];n.results=t,n.platforms[a]=t,G()}(t,a,window.navigator.userAgent)},u={uncaughtError:function(e){i(),a({success:!1,data:e})},abort:function(e){},error:function(e){l(e)},cycle:function(e){l(e)},complete:function(e){c(),a({success:!0,data:e})}},d=function(e){var t=e.data,a=t.type,n=t.data;u[a](n)};window.addEventListener("message",d);var m=new Blob([r],{type:"text/html"});o.sandbox="allow-scripts",o.src=URL.createObjectURL(m),o.style.display="none",document.body.appendChild(o)}))}}]),e}(),je=(a(104),/^[a-z0-9]+$/i);var Se=function(){return[]},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?"".concat(t).concat(e).concat(a):""},Ce=window.matchMedia("(prefers-color-scheme: dark)"),Ne=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).addMsg=function(t,a){e.setState({messages:[{msg:t,className:a}].concat(Object(d.a)(e.state.messages))}),setTimeout((function(){e.setState({messages:e.state.messages.slice(0,e.state.messages.length-1)})}),5e3)},e.addInfo=function(t){return e.addMsg(t,"info")},e.addError=function(t){return e.addMsg(t,"error")},e.closeDialog=function(){e.setState({dialog:Se})},e.handleNew=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(D());case 1:case"end":return e.stop()}}),e)}))),e.handleRun=Object(u.a)(l.a.mark((function t(){var a,n,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({running:!0}),localStorage.setItem("backup",JSON.stringify({href:window.location.href,data:V})),console.log("--start--"),a=new ke,e.abort=a.abort.bind(a),t.next=7,a.run(V);case 7:n=t.sent,r=n.success,o=n.data,r||e.addError("could not run benchmark:\n".concat(Oe(o.message)).concat(Oe(o.filename,":")).concat(Oe(o.lineno,":")).concat(Oe(o.colno,":"))),e.abort=void 0,localStorage.removeItem("backup"),console.log(o),console.log("--done--"),e.setState({running:!1});case 16:case"end":return t.stop()}}),t)}))),e.handleSave=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:e.renderSave});case 1:case"end":return t.stop()}}),t)}))),e.handleHelp=function(){e.setState({dialog:e.renderHelp})},e.handleLoad=function(){e.setState({dialog:e.renderLoad})},e.handleOnLoad=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:Se});case 1:case"end":return t.stop()}}),t)}))),e.handleOnSave=function(t){window.history.pushState({},"","".concat(window.location.origin,"?src=").concat(t)),e.setState({gistId:t})},e.handleAbort=function(){e.abort()},e.renderHelp=function(){return r.a.createElement(N,{onClose:e.closeDialog})},e.renderLoad=function(){return r.a.createElement(oe,{onLoad:e.handleOnLoad,onClose:e.closeDialog,addError:e.addError,github:e.github})},e.renderSave=function(){var t=V;return r.a.createElement(ye,{onSave:e.handleOnSave,onClose:e.closeDialog,addError:e.addError,github:e.github,gistId:e.state.gistId,data:t})},e.state={path:window.location.pathname,dark:Ce.matches,running:!1,loading:!1,dialog:Se,dataVersion:0,gistId:"",pat:localStorage.getItem("pat"),messages:[],userData:{}},e.github=new O,e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.github.addEventListener("userdata",(function(t){e.setState({userData:t.data})})),T("path",window.location.pathname),_("path",(function(t){window.history.pushState({},"",t),e.setState({path:t})})),_("dataVersion",(function(t){e.setState({dataVersion:t})})),_("updateVersion",(function(t){e.setState({updateVersion:t})})),Ce.addEventListener("change",(function(){e.setState({dark:Ce.matches})}));var t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),a=localStorage.getItem("backup"),n=!1;if(a){try{var r=JSON.parse(a);r.href===window.location.href&&(K(r.data),n=!0,this.addInfo("loaded backup from local storage"))}catch(o){}localStorage.removeItem("backup")}!n&&t.src&&this.loadData(t.src)}},{key:"loadData",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,n=t,!je.test(n)){e.next=10;break}return e.next=5,this.github.getAnonGist(t);case 5:K(e.sent),this.setState({gistId:t}),e.next=22;break;case 10:if(!fe(t)){e.next=15;break}K(be(t)),e.next=22;break;case 15:return e.next=17,fetch(t);case 17:return a=e.sent,e.next=20,a.json();case 20:K(e.sent);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(1),console.warn(e.t0),this.addError("could not load benchmark: src=".concat(t," ").concat(e.t0));case 28:this.setState({loading:!1});case 29:case"end":return e.stop()}var n}),e,this,[[1,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=V,t=this.state,a=t.running,n=t.loading,o=t.dialog,c=t.updateVersion,i=t.userData,l=a,u=Object(s.a)({},!a&&{display:"none"}),d=y({disabled:l});return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"head"},r.a.createElement("div",null,r.a.createElement("img",{src:"/resources/images/logo.svg",alt:"logo"}),"jsBenchIt.org",r.a.createElement("span",{className:"beta"},"(beta)")),r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/greggman/jsbenchit/"},r.a.createElement("img",{alt:"github",src:"/resources/images/octocat-icon.svg"})))),r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:y("left",{disabled:l})},r.a.createElement("div",{className:"name"},r.a.createElement(w,{value:e.title,onChange:function(e){return t=e,V.title=t,void G();var t}}),r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(i.name)},i.name)),i.avatarURL?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(i.name)},r.a.createElement("img",{className:"avatar",src:i.avatarURL,alt:"avatar"})):[])),r.a.createElement("div",{className:"right"},a?r.a.createElement("button",{tabIndex:"1",onClick:this.handleAbort},"Cancel"):r.a.createElement("button",{tabIndex:"1",onClick:this.handleRun},"Run"),r.a.createElement("button",{tabIndex:"1",className:d,onClick:this.handleSave},"Save"),r.a.createElement("button",{tabIndex:"1",className:d,onClick:this.handleNew},"New"),r.a.createElement("button",{tabIndex:"1",className:d,onClick:this.handleLoad},"Load"),r.a.createElement("button",{tabIndex:"1",className:d,onClick:this.handleHelp},"?"))),n?[]:r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"left"},r.a.createElement(ie,{hackKey:c,title:"Initialization",value:e.initialization,show:e.initialization.length>0,onValueChange:function(e){return t=e,V.initialization=t,void G();var t}}),r.a.createElement(ie,{hackKey:c,title:"Before Each Test",value:e.setup,show:e.setup.length>0,onValueChange:function(e){return t=e,V.setup=t,void G();var t}}),e.tests.map((function(e,t){var a=r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return function(e){V.tests.splice(e,1),G()}(t)}},"-"));return r.a.createElement(we,{key:"ca".concat(t),hackKey:c,desc:"Case ".concat(t+1),title:e.name,value:e.code,async:e.async,onTitleChange:function(e){return function(e,t){V.tests[e].name=t,G()}(t,e)},onValueChange:function(e){return function(e,t){V.tests[e].code=t,G()}(t,e)},extra:a})})),r.a.createElement("div",null,r.a.createElement("button",{onClick:M},"+")),r.a.createElement("div",{className:"blocked",style:u},r.a.createElement("div",{className:"abort"},r.a.createElement("button",{onClick:this.handleAbort},"Stop Benchmark")))),r.a.createElement("div",{className:"right"},r.a.createElement(q,{tests:e.tests}),r.a.createElement(ue,{tests:e.tests}))),o(),r.a.createElement("div",{className:"messages"},this.state.messages.map((function(e,t){var a=e.msg,n=e.className;return r.a.createElement("div",{className:n,key:"err".concat(t)},a)}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/schema#","definitions":{"results":{"type":"object","properties":{"aborted":{"type":"boolean"},"count":{"type":"integer"},"cycles":{"type":"integer"},"hz":{"type":"number"},"stats":{"type":"object","properties":{"numSamples":{"type":"integer"},"rme":{"type:":"number"}},"required":["numSamples","rme"]},"times":{"type":"object"}}}},"type":"object","properties":{"title":{"type":"string"},"setup":{"type":"string"},"initialization":{"type":"string"},"tests":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"results":{"$ref":"#/definitions/results"},"platforms":{"type":"object","additionalProperties":{"$ref":"#/definitions/results"}}},"required":["name","code","results","platforms"]}}},"required":["title","setup","initialization","tests"]}')},50:function(e,t,a){e.exports=a(105)},55:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.062e4235.chunk.js.map