{"version":3,"sources":["scrollbars.js","components/BackupManager.js","libs/css-utils.js","components/EditLine.js","components/Code.js","ServiceContext.js","libs/url.js","libs/WindowMessageManager.ts","components/GistComment.js","components/GistComments.js","components/Footer.js","libs/GitHub.js","libs/SubscriptionManager.ts","globals.js","libs/StorageManager.ts","components/Dialog.js","components/Help.js","libs/model-utils.js","libs/result-helper.js","libs/color-utils.js","components/Results.js","libs/model.js","components/LatestResults.js","libs/gists.js","components/LoadGist.tsx","components/LoadJSON.js","components/LoadURL.js","components/Section.js","components/Load.js","libs/compression.js","libs/loader.js","components/CodeArea.js","components/NamedCodeArea.js","libs/utils.ts","libs/OAuthManager.ts","components/Platforms.js","components/Embed.js","components/SaveAsGist.js","components/SaveAsJSON.js","components/SaveAsURL.js","components/Save.js","components/Split.js","components/TestArea.js","libs/TestRunner.js","components/Tests.js","libs/UserManager.js","components/App.js","serviceWorker.js","index.js"],"names":["parent","document","createElement","setAttribute","classList","add","child","appendChild","body","firstChild","clientWidth","removeChild","BackupManager","storageManager","this","get","data","set","delete","camelCaseRE","toDash","_","left","right","camelCaseToDash","s","replace","toLowerCase","classNames","names","args","arg","push","Object","entries","key","value","join","EditLine","props","type","onChange","e","target","placeholder","darkMatcher","window","matchMedia","noop","Code","hackKey","options","onValueChange","useState","localValue","setLocalValue","isDarkMode","matches","mode","scrollbarStyle","theme","editor","onBeforeChange","ServiceContext","React","createContext","createURL","base","params","url","URL","searchParams","URLSearchParams","search","undefined","toString","href","nullHandlers","Map","fromToHandlersMap","on","from","fn","remove","handlers","fns","ndx","indexOf","splice","length","size","callHandler","addEventListener","source","helperUrl","location","origin","Preview","handleSendPreview","iframeRef","current","contentWindow","postMessage","handleResize","style","height","createRef","show","winMsgMgr","preview","title","ref","src","Component","GistComment","onUserStatusChange","forceUpdate","setState","handleOnChange","tab","handleSaveComment","a","context","github","addError","gistId","addComment","createGistComment","state","previewKey","message","userManager","subscribe","unsubscribe","userData","getUserData","showPreview","className","login","rel","avatar_url","alt","name","id","checked","htmlFor","display","lineNumbers","registerAPI","onClick","renderCommentForm","renderLogin","contextType","GistComments","nextProps","disqusId","gist_id","gitUserId","Footer","api","Fragment","getAnonGist","fetch","req","json","gist","getGistContent","rawData","createGistData","secret","files","content","JSON","stringify","lowerCaseFiles","keys","map","n","includes","description","public","parse","GitHub","pat","user","unAuthorizedOctokit","Octokit","userAgent","owner","avatarURL","assign","event","Event","dispatchEvent","authorizedOctokit","auth","users","getAuthenticated","response","status","Error","paginate","gists","list","per_page","filter","_updateUserData","octokit","gistData","create","updateGist","update","date","updated_at","fork","createComment","result","EventTarget","SubscriptionManager","itemToSubscriptionMap","item","slice","prefix","subscriptionManager","_handleNewValue","startsWith","unPrefixedKey","substr","notify","session","k","_addPrefix","v","sessionStorage","getItem","localStorage","setItem","removeItem","removeEventListener","Dialog","handleKeyDown","keyCode","onClose","children","tabIndex","stopPropagation","Help","asyncInitCode","trim","testResultsAreValid","test","results","error","aborted","formatResults","number","hz","stats","numSamples","rme","opsPerSec","toFixed","String","split","plusMinus","createResults","tests","getResultFn","max","reduce","Math","h","l","unRun","msg","errorMsg","stack","zeroToOne","width","background","createResult","Results","validator","Ajv","compile","schema","trackedValues","getValueOrMakeNew","trackedValue","subscriptions","Set","initialValue","newValue","newTestData","code","platforms","incVersion","incDataVersion","incResultsVersion","incTestsVersion","addTest","testSubscriptionManager","getTests","setTestName","setTestCode","setTestResult","platform","setData","newData","errors","dataPath","validate","clearAllTestResults","LatestResults","handleChange","model","gistSchema","gistsSchema","ajv","gistsValidator","gistValidator","getStoredGists","addGist","_public","saveGistsToLocalStorage","removeGist","setGists","LoadGist","handleNewGists","toggleCheck","checks","has","loadGists","loading","getUserGists","gistArray","deleteSelected","_gists","ids","forEach","deleteGist","clearBackup","backupManager","canLoad","sort","b","gistsToSortedArray","disabled","substring","matchFilter","encodeURIComponent","renderLoad","LoadJSON","setJSON","useContext","onLoad","LoadURL","setUrl","Section","heading","Load","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","isCompressedBase64","compressedBase64ToJSON","isCompressed","base64","raw","Uint8Array","decode","bin","inflate","idRE","isGistId","loadGistFromSrc","res","CodeArea","extra","setShow","hideeHide","handleClasses","bottom","handleStyles","position","defaultSize","minHeight","enable","top","topRight","bottomRight","bottomLeft","topLeft","NamedCodeArea","sep","OAuthManager","_popup","_state","_storageManager","requestToken","client","access_token","console","logout","_closePopup","Date","now","random","client_id","scope","config","screenY","outerHeight","screenX","outerWidth","open","createPopup","close","Platforms","onClickFactory","plat","createPlatforms","Embed","userSelect","SaveAsGist","onPatChange","saveNew","saving","onSave","success","createGist","saveOverExisting","forkAndSave","forkGist","newId","gistOwnerId","canUpdate","canFork","data-type","renderSave","SaveAsJSON","SaveAsURL","encode","compressed","deflate","useCompressed","jsonToCompressedBase64","class","Save","distribute","items","buckets","array","Array","fill","leap","halfLeap","i","getMouseOrTouchPosition","clientAxis","touches","getDirectionProps","direction","dimension","positionEnd","clientSize","computeNewSizes","startSizes","currentSizes","prevPaneNdx","gutterSize","minSize","deltaPX","outerSizePX","numPanes","gutterReservedSizesPX","nextPaneNdx","prevPaneStartSizePX","ceil","spaceUsedByBothElementsPX","prevPaneNewSizePX","min","nextPaneNewSizePX","stopMobileBrowserFromScrolling","preventDefault","Gutter","handleMouseDownAndTouchStart","onMouseDownAndTouchStart","elementRef","elem","passive","dragging","GManSplit","_setSizes","sizes","handleMouseUpAndTouchEnd","handleMouseAndTouchMove","computeNewSizesFn","onSetSizes","propSizes","mouseStart","stateSizes","setSizes","log","prototype","call","parentElement","recomputeSizes","numChildren","Children","count","newSizes","totalSize","sum","normalizeSizes","minSizePX","totalSizePX","addSpaceForChildren","setTimeout","rest","totalGutterSpace","gutterStyle","gutterReservedSizes","childNdx","first","newChildren","isValidElement","cloneElement","TestArea","handleTitleChange","testNdx","handleValueChange","desc","TestRunner","_abortImpl","Promise","resolve","reject","clear","runTests","lastIframe","iframe","lastIFrame","html","initialization","settings","runnerData","cleanup","handleUncaughtError","handleAbort","handleError","handleCycle","handleComplete","handleGimmeDaCodez","abort","navigator","sendProgress","updateTestResults","parseInt","Tests","numResults","elements","createTests","UserManager","oauthManager","_handleNewAuth","setPat","getAuthenticatedUser","noJSX","stringOrEmpty","str","suffix","App","addMsg","messages","addInfo","closeDialog","dialog","handleNew","handleRun","running","testNum","setBackup","testRunner","bind","run","filename","lineno","colno","handleSave","handleHelp","renderHelp","handleLoad","handleOnLoad","handleOnSave","history","pushState","path","pathname","dark","dataVersion","testToKeyMap","updateVersion","query","fromEntries","backup","getBackup","loaded","loadData","updateTitle","warn","hideStyle","disabledClass","Provider","hostname","init","setup","getTestKey","Boolean","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.bda44642.chunk.js","sourcesContent":["import './scrollbars.css';\n\n/*\n * Scrollbar Width Test\n * Adds `layout-scrollbar-obtrusive` class to body if scrollbars use up screen real estate\n */\nconst parent = document.createElement(\"div\");\nparent.setAttribute(\"style\", \"width:30px;height:30px;\");\nparent.classList.add('scrollbar-test');\n\nconst child = document.createElement(\"div\");\nchild.setAttribute(\"style\", \"width:100%;height:40px\");\nparent.appendChild(child);\ndocument.body.appendChild(parent);\n\n// Measure the child element, if it is not\n// 30px wide the scrollbars are obtrusive.\nconst scrollbarWidth = 30 - parent.firstChild.clientWidth;\nif(scrollbarWidth) {\n  document.body.classList.add(\"layout-scrollbar-obtrusive\");\n}\n\ndocument.body.removeChild(parent);","const backupKey = 'backup';\r\n\r\nexport default class BackupManager {\r\n  #storageManager;\r\n\r\n  constructor(storageManager) {\r\n    this.#storageManager = storageManager;\r\n  }\r\n  getBackup() {\r\n    return this.#storageManager.get(backupKey);\r\n  }\r\n  setBackup(data) {\r\n    this.#storageManager.set(backupKey, data);\r\n  }\r\n  clearBackup() {\r\n    this.#storageManager.delete(backupKey);\r\n  }\r\n}","const camelCaseRE = /([a-z])([A-Z])/g;\nconst toDash = (_, left, right) => `${left}-${right}`;\nconst camelCaseToDash = s => s.replace(camelCaseRE, toDash).toLowerCase();\n\nexport function classNames(...args) {\n  const names = [];\n  for (const arg of args) {\n    if (typeof arg === 'string') {\n      names.push(arg);\n    } else {\n      for (const [key, value] of Object.entries(arg)) {\n        if (value) {\n          names.push(camelCaseToDash(key));\n        }\n      }\n    }\n  }\n  return names.join(' ');\n}","import React from 'react';\n\nexport default function EditLine(props) {\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => {props.onChange(e.target.value)}}\n      placeholder={props.placeholder}\n      value={props.value} />\n  );\n}","import React, {useState} from 'react';\nimport {Controlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/mode/gfm/gfm.js';\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/htmlmixed/htmlmixed.js';\nimport 'codemirror/addon/scroll/simplescrollbars.js';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n// darkMatcher.addListener(render);\n\nconst noop = () => {};\n\nexport default function Code(props) {\n  const {value, hackKey, options = {}, onValueChange = noop} = props;\n  const [localValue, setLocalValue] = useState(value);\n  const isDarkMode = darkMatcher.matches;\n  return (\n    <CodeMirror\n      key={hackKey}\n      value={localValue}\n      options={{\n        mode: 'javascript',\n        scrollbarStyle: 'overlay',\n        theme: isDarkMode ? 'material' : 'eclipse',\n        ...(options.editor && options.editor),\n      }}\n      onBeforeChange={(editor, data, value) => {\n        setLocalValue(value);\n      }}\n      onChange={(editor, data, value) => {\n        onValueChange(value);\n      }}\n    />\n  );\n};\n","import React from 'react';\n\nconst ServiceContext = React.createContext();\nexport default ServiceContext;\n","export function createURL(base, params) {\n  const url = new URL(base);\n  const searchParams = new URLSearchParams(url.search);\n  for (const [key, value] of Object.entries(params)) {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  }\n  url.search = searchParams.toString();\n  return url.href;\n}\n\nexport function updateURL(params) {\n  const url = createURL(window.location.href, params);\n  window.history.replaceState({}, '', url.href);\n}\n\n","type Handler = (data: any) => void;\ntype StringToHandlers = Map<string, Handler[]>;\nconst nullHandlers : StringToHandlers = new Map();\nconst fromToHandlersMap : Map<Window | null, StringToHandlers> = new Map([[null, nullHandlers]]);\n\nexport function on(type: string, from: Window | null, fn: (data: any) => void) {\n  remove(type, from, fn);\n  let handlers = fromToHandlersMap.get(from);\n  if (!handlers) {\n    handlers = new Map();\n    fromToHandlersMap.set(from, handlers)\n  }\n  let fns = handlers.get(type);\n  if (!fns) {\n    fns = [];\n    handlers.set(type, fns);\n  }\n  fns.push(fn);\n}\n\nexport function remove(type: string, from: Window | null, fn: (data: any) => void) {\n  let handlers = fromToHandlersMap.get(from);\n  if (!handlers) {\n    return;\n  }\n  const fns = handlers.get(type);\n  if (fns) {\n    const ndx = fns.indexOf(fn);\n    if (ndx >= 0) {\n      fns.splice(ndx, 1);\n    }\n    if (fns.length === 0) {\n      handlers.delete(type);\n      if (handlers.size === 0 && from) {\n        fromToHandlersMap.delete(from);\n      }\n    }\n  }\n}\n\nfunction callHandler(handlers: StringToHandlers, type: string, data: any) {\n  const fns = handlers.get(type);\n  if (fns) {\n    for (const fn of fns) {\n      fn(data);\n    }\n    return true;\n  }\n  return false;\n}\n\nwindow.addEventListener('message', (e: MessageEvent) => {\n  const {type, data} = e.data;\n  const handlers = fromToHandlersMap.get(e.source as Window);\n  if (handlers) {\n    if (callHandler(handlers, type, data)) {\n      return;\n    }\n  }\n  callHandler(nullHandlers, type, data);\n});\n\n","import React from 'react';\n\nimport Code from './Code.js';\nimport {isDevelopment} from '../libs/flags.js';\nimport ServiceContext from '../ServiceContext.js';\nimport {createURL} from '../libs/url.js';\nimport * as winMsgMgr from '../libs/WindowMessageManager';\n\nconst helperUrl = isDevelopment\n    ? 'http://localhost:8080/gist-comments.js'\n    : `${window.location.origin}/gist-comments.js`;\n\nclass Preview extends React.Component {\n  constructor(props) {\n    super(props);\n    this.iframeRef = React.createRef();\n    this.show = props.show;\n  }\n  handleSendPreview = () => {\n    const {body} = this.props;\n    this.iframeRef.current.contentWindow.postMessage({type: 'preview', data: {body}}, '*');\n  }\n  handleResize = (data) => {\n    this.iframeRef.current.style.height = `${data.height}px`;\n  }\n  componentDidMount() {\n    winMsgMgr.on('sendPreview', this.iframeRef.current.contentWindow, this.handleSendPreview);\n    winMsgMgr.on('resize', this.iframeRef.current.contentWindow, this.handleResize);\n  }\n  componentDidUpdate() {\n    if (this.props.show !== this.show) {\n      this.show = this.props.show;\n      if (this.show) {\n        this.handleSendPreview();\n      }\n    }\n  }\n  componentWillUnmount() {\n    winMsgMgr.remove('sendPreview', this.iframeRef.current.contentWindow, this.handleSendPreview);\n    winMsgMgr.remove('resize', this.iframeRef.current.contentWindow, this.handleResize);\n  }\n  render() {\n    const url = createURL('https://jsbenchit.devcomments.org/gist-comments.html', {preview: true, url: helperUrl});\n    return (\n      <iframe title=\"comment-preview\" ref={this.iframeRef} src={url} />\n    );\n  }\n}\n\nexport default class GistComment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: isDevelopment ? `# this is a test\n\n\\`\\`\\`js\nconst a = b + c;\n\\`\\`\\`\n\nfoo *bar* **moo** \\`code\\` etc...\n\n1. this\n2. that\n3. other\n\n* banana\n* apple\n* grape\n\n\\`\\`\\`html\n<div>some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling some long line that needs scrolling </div>\n\\`\\`\\`\n` : '',\n      tab: 0,\n      previewKey: 1,\n    };\n  }\n  onUserStatusChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    const {userManager} = this.context;\n    userManager.subscribe(this.onUserStatusChange);\n  }\n  componentWillUnmount() {\n    const {userManager} = this.context;\n    userManager.unsubscribe(this.onUserStatusChange);\n  }\n  onValueChange = (value) => {\n    this.setState({value});\n  }\n  handleOnChange = (tab) => {\n    this.setState({tab});\n  }\n  handleSaveComment = async() => {\n    const {github, addError} = this.context;\n    try {\n      const {gistId, addComment} = this.props;\n      const data = await github.createGistComment(gistId, this.state.value);\n      this.setState({\n        value: '',\n        previewKey: this.state.previewKey + 1,\n      });\n      addComment(data);\n    } catch (e) {\n      addError(e.message || e);\n    }\n  }\n  renderCommentForm() {\n    const {userManager} = this.context;\n    const userData = userManager.getUserData();\n    const {\n      value,\n      tab,\n      previewKey,\n    } = this.state;\n    const options = {\n      editor: {\n        mode: 'gfm',\n        lineNumbers: false,\n      },\n    };\n    const showPreview = tab === 1;\n    return (\n      <div className=\"new-comment\">\n        <div className=\"new-comment-head\">\n          {!!userData.login && <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.login}`}>{userData.login}</a></div>}\n          {!!userData.avatar_url && <a className=\"user-avatar\" target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.login}`}><img className=\"avatar\" src={userData.avatar_url} alt=\"avatar\"/></a>}\n        </div>\n        <div className=\"new-comment-tabs\">\n          <input\n            type=\"radio\"\n            name=\"new-comment\"\n            id=\"write\"\n            checked={tab === 0}\n            onChange={_ => this.handleOnChange(0)}\n          />\n          <label htmlFor=\"write\">write</label>\n          <input\n            type=\"radio\"\n            name=\"new-comment\"\n            id=\"preview\"\n            checked={tab === 1}\n            onChange={_ => this.handleOnChange(1)}\n          />\n          <label htmlFor=\"preview\">preview</label>\n        </div>\n        <div className=\"new-comment-content\">\n          <div style={{...(tab === 1 && {display: 'none'})}} className=\"new-comment-write\">\n            <Code\n              hackKey={previewKey}\n              value={value}\n              options={options}\n              onValueChange={this.onValueChange}\n              registerAPI={_ => _}\n            />\n          </div>\n          <div className=\"new-comment-preview\" style={{...(!showPreview && {display: 'none'})}}>\n            <Preview key={previewKey} body={value} show={showPreview} />\n          </div>\n        </div>\n        <div className=\"new-comment-submit  \">\n          <button onClick={this.handleSaveComment}>Comment</button>\n        </div>\n      </div>\n    );\n  }\n  renderLogin() {\n    const {userManager} = this.context;\n    return (\n      <div className=\"new-comment\">\n        <button\n          onClick={userManager.login}\n        >Login with github</button>\n      </div>\n    )\n  }\n  render() {\n    const {userManager} = this.context;\n    const userData = userManager.getUserData();\n    return (userData\n      ? this.renderCommentForm()\n      : this.renderLogin()\n    );\n  }\n}\n\nGistComment.contextType = ServiceContext;\n","import React from 'react';\n\nimport {isDevelopment} from '../libs/flags.js';\nimport ServiceContext from '../ServiceContext.js';\nimport {createURL} from '../libs/url.js';\nimport * as winMsgMgr from '../libs/WindowMessageManager';\n\nconst helperUrl = isDevelopment\n    ? 'http://localhost:8080/gist-comments.js'\n    : `${window.location.origin}/gist-comments.js`;\n\n\n// Comments are served from a separate domain in an iframe.\n// This is because comments have user data that is turned\n// into HTML. Of course we should sanitize but if we have\n// a bug we can't let it be on our page directly\n// otherwise it could read our secrets\n//\nexport default class GistComments extends React.Component {\n  constructor() {\n    super();\n    this.iframeRef = React.createRef();\n  }\n  // Our script creates an iframe and the content in the iframe\n  // communicates back to the main page to tell it the size of the content\n  // so the main page can adjust the iframe size.\n  handleResize = (data) => {\n    this.iframeRef.current.style.height = `${data.height}px`;\n  }\n  addComment = (data) => {\n    this.iframeRef.current.contentWindow.postMessage({\n      type: 'addComment',\n      data,\n    }, '*');\n  }\n  componentDidMount() {\n    winMsgMgr.on('resize', this.iframeRef.current.contentWindow, this.handleResize);\n    this.props.registerAPI({\n      addComment: this.addComment,\n    });\n  }\n  componentWillUnmount() {\n    winMsgMgr.remove('resize', this.iframeRef.current.contentWindow, this.handleResize);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.disqusId !== this.disqusId;\n  }\n  render() {\n    const {userManager} = this.context;\n    const userData = userManager.getUserData() || {};\n    const {gistId} = this.props;\n    const url = createURL('https://jsbenchit.devcomments.org/gist-comments.html', {gist_id: gistId, url: helperUrl, gitUserId: userData.id});\n    return (\n      <div>\n        { !!gistId &&\n          <iframe\n            ref={this.iframeRef}\n            title=\"comments\"\n            src={url}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nGistComments.contextType = ServiceContext;\n","\nimport React from 'react';\nimport GistComment from './GistComment.js';\nimport GistComments from './GistComments.js';\n\nexport default class Footer extends React.Component {\n  registerAPI = (api) => {\n    this.api = api;\n  }\n  addComment = (data) => {\n    this.api.addComment(data);\n  }\n  render() {\n    const {gistId, title} = this.props;\n    return (\n      <div className=\"comments\">\n        <hr/>\n        {\n          gistId &&\n            <React.Fragment>\n              <GistComments gistId={gistId} title={title} registerAPI={this.registerAPI} />\n              <GistComment gistId={gistId} addComment={this.addComment} />\n            </React.Fragment>\n        }\n      </div>\n    );\n  }\n}","import { Octokit } from '@octokit/rest';\n\nconst userAgent = 'jsBenchIt v0.0.1';\n\nexport async function getAnonGist(gist_id) {\n  const req = await fetch(`https://api.github.com/gists/${gist_id}`);\n  const gist = await req.json();\n  return {\n    data: getGistContent(gist),\n    rawData: gist,\n  };\n}\n\nexport function getUserData(data) {\n  return (data && data.owner)\n      ? {\n          name: data.owner.login,\n          avatarURL: data.owner.avatar_url,\n      }\n      : undefined;\n}\n\nfunction createGistData(data, secret, gist_id) {\n  const files = {\n    'jsBenchIt.json': {content: JSON.stringify(data)},\n  };\n  if (gist_id) {\n    // TODO: rather than check if there's a readme\n    // insert the readme in our wrapped readme.\n    // Maybe add a \"notes\" field to the save dialog\n    const lowerCaseFiles = Object.keys(files).map(n => n.toLowerCase());\n    const hadReadme = \n        lowerCaseFiles.includes('readme.md') ||\n        lowerCaseFiles.includes('readme.txt') ||\n        lowerCaseFiles.includes('readme');\n    if (!hadReadme) {\n      const content = `## ${data.title}\\n\\n[view on jsbenchit](${window.location.origin}?src=${gist_id})`\n      files['README.md'] = {content};\n    }\n  }\n  return {\n    files,\n    description: data.title,\n    ...(!gist_id && {public: !secret}),\n    ...(gist_id && {gist_id}),\n  };\n}\n\nconst getGistContent = gist => JSON.parse(gist.files['jsBenchIt.json'].content);\n\nexport default class GitHub extends EventTarget {\n  constructor() {\n    super();\n    this.pat = '';\n    this.user = {};\n    this.unAuthorizedOctokit = new Octokit({\n      userAgent,\n    });\n  }\n  get octokit() {\n    return this.authorizedOctokit || this.unAuthorizedOctokit;\n  }\n  // TODO: this does not belong here!\n  _updateUserData(data) {\n    const userData = getUserData(data);\n    if (userData) {\n      Object.assign(this.user, userData);\n      const event = new Event('userdata');\n      event.data = {...this.user};\n      this.dispatchEvent(event);\n    }\n  }\n  setPat(pat) {\n    if (pat !== this.pat) {\n      this.pat = pat;\n      if (pat) {\n        this.authorizedOctokit = new Octokit({\n          auth: pat,\n          userAgent,\n        });\n      } else {\n        this.authorizedOctokit = undefined;\n      }\n    }\n  }\n  /*\n  \"{\n    \"login\": \"greggman\",\n    \"id\": 234804,\n    \"node_id\": \"MDQ6VXNlcjIzNDgwNA==\",\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/234804?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/greggman\",\n    \"html_url\": \"https://github.com/greggman\",\n    \"followers_url\": \"https://api.github.com/users/greggman/followers\",\n    \"following_url\": \"https://api.github.com/users/greggman/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/greggman/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/greggman/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/greggman/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/greggman/orgs\",\n    \"repos_url\": \"https://api.github.com/users/greggman/repos\",\n    \"events_url\": \"https://api.github.com/users/greggman/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/greggman/received_events\",\n    \"type\": \"User\",\n    \"site_admin\": false,\n    \"name\": \"Greggman\",\n    \"company\": null,\n    \"blog\": \"http://games.greggman.com\",\n    \"location\": \"Earth\",\n    \"email\": \"github@greggman.com\",\n    \"hireable\": null,\n    \"bio\": \"30 years of games\\r\\n5 years of Chrome\",\n    \"twitter_username\": null,\n    \"public_repos\": 283,\n    \"public_gists\": 79,\n    \"followers\": 1037,\n    \"following\": 3,\n    \"created_at\": \"2010-04-01T08:48:05Z\",\n    \"updated_at\": \"2020-10-24T06:05:24Z\"\n  }\"\n  */\n  async getAuthenticatedUser() {\n    const response = await this.authorizedOctokit.users.getAuthenticated();\n    if (response.status !== 200) {\n      throw new Error(response.message);\n    }\n    return response.data;\n  }\n\n  async getUserGists() {\n    const gists = await this.authorizedOctokit.paginate(\n        this.authorizedOctokit.gists.list,\n        {per_page: 100});\n    return gists.filter(gist => !!gist.files['jsBenchIt.json']);\n    // return await this.authorizedOctokit.gists.list();\n  }\n  async getAnonGist(gist_id) {\n    const {data, rawData} = await getAnonGist(gist_id);\n    this._updateUserData(rawData);\n    return {data, rawData};\n  }\n  async getUserGist(gist_id) {\n    const gist = await this.octokit.gists.get({gist_id});\n    this._updateUserData(gist.data);\n    return getGistContent(gist.data);\n  }\n  async createGist(data, secret = false) {\n    const gistData = createGistData(data, secret);\n    const gist = await this.authorizedOctokit.gists.create(gistData);\n    this._updateUserData(gist.data);\n    return await this.updateGist(gist.data.id, data, secret);\n  }\n  /* returns\n{status: 201, url: \"https://api.github.com/gists\", headers: {…}, data: {…}}\ndata:\ncomments: 0\ncomments_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/comments\"\ncommits_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/commits\"\ncreated_at: \"2020-10-04T10:46:14Z\"\ndescription: \"bench test\"\nfiles: {bench.json: {…}}\nforks: []\nforks_url: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b/forks\"\ngit_pull_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b.git\"\ngit_push_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b.git\"\nhistory: [{…}]\nhtml_url: \"https://gist.github.com/92d9e8b2a5215b0217d459e735a9226b\"\nid: \"92d9e8b2a5215b0217d459e735a9226b\"\nnode_id: \"MDQ6R2lzdDkyZDllOGIyYTUyMTViMDIxN2Q0NTllNzM1YTkyMjZi\"\nowner: {login: \"greggman\", id: 234804, node_id: \"MDQ6VXNlcjIzNDgwNA==\", avatar_url: \"https://avatars2.githubusercontent.com/u/234804?v=4\", gravatar_id: \"\", …}\npublic: true\ntruncated: false\nupdated_at: \"2020-10-04T10:46:14Z\"\nurl: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b\"\nuser: null\nheaders: {cache-control: \"private, max-age=60, s-maxage=60\", content-length: \"4814\", content-type: \"application/json; charset=utf-8\", etag: \"\"124f123e0d75b88fa385c1e1edab1608fd7dd6624440f456cb0b3d92634e1fd9\"\", location: \"https://api.github.com/gists/92d9e8b2a5215b0217d459e735a9226b\", …}\nstatus: 201\nurl: \"https://api.github.com/gists\"\n  */\n  async updateGist(gist_id, data) {\n    const gistData = createGistData(data, undefined, gist_id);\n    const gist = await this.authorizedOctokit.gists.update(gistData);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n  async forkGist(gist_id) {\n    const gist = await this.authorizedOctokit.gists.fork({gist_id});\n    return {\n      id: gist.data.id\n    };\n  }\n  async createGistComment(gist_id, body) {\n    const result = await this.authorizedOctokit.gists.createComment({\n      gist_id,\n      body,\n    });\n    if (result.status < 200 || result.status >= 300) {\n      throw new Error(result.message);\n    }\n    return result.data;\n  }\n}\n","\nexport default class SubscriptionManager {\n  itemToSubscriptionMap: Map<string, (() => void)[]>;\n  constructor() {\n    this.itemToSubscriptionMap = new Map();\n  }\n  subscribe(item: string, fn: () => void) {\n    this.unsubscribe(item, fn);\n    let fns = this.itemToSubscriptionMap.get(item);\n    if (!fns) {\n      fns = [];\n      this.itemToSubscriptionMap.set(item, fns);\n    }\n    fns.push(fn);\n  }\n  unsubscribe(item: string, fn: () => void): void {\n    const fns = this.itemToSubscriptionMap.get(item);\n    if (fns) {\n      const ndx = fns.indexOf(fn);\n      if (ndx >= 0) {\n        fns.splice(ndx, 1);\n        if (fns.length === 0) {\n          this.itemToSubscriptionMap.delete(item);\n        }\n      }\n    }\n  }\n  notify(item: string): void {\n    const fns = this.itemToSubscriptionMap.get(item);\n    if (fns) {\n      for (const fn of fns.slice()) {\n        fn();\n      }\n    }\n  }\n}","import StorageManager from './libs/StorageManager';\nimport {isDevelopment} from './libs/flags.js';\n\nexport const storageManager = new StorageManager('jsbenchit');\nexport const clientId = isDevelopment\n    ? 'ac89a502d22aab51cc81'\n    : '60cb8be0ee81d9bf51a5';\n\n","import SubscriptionManager from './SubscriptionManager';\n\nexport default class StorageManager {\n  prefix: string;\n  subscriptionManager: SubscriptionManager;\n\n  constructor(prefix: string) {\n    this.prefix = `${prefix}-`;\n    this.subscriptionManager = new SubscriptionManager();\n    window.addEventListener('storage', this._handleNewValue);\n  }\n  private _handleNewValue = (e: StorageEvent) => {\n    const key = e.key;\n    if (key && key.startsWith(this.prefix)) {\n      const unPrefixedKey = key.substr(this.prefix.length);\n      this.subscriptionManager.notify(unPrefixedKey);\n    }\n  }\n  private _addPrefix(key: string): string {\n    return `${this.prefix}${key}`;\n  }\n  subscribe(key: string, fn: () => void): void {\n    this.subscriptionManager.subscribe(key, fn);\n  }\n  unsubscribe(key: string, fn: () => void): void {\n    this.subscriptionManager.unsubscribe(key, fn);\n  }\n  get(key: string, session = false) {\n    const k = this._addPrefix(key);\n    if (session) {\n      const v = sessionStorage.getItem(k);\n      if (v) {\n        return v;\n      }\n    }\n    return localStorage.getItem(k);\n  }\n  set(key: string, value: string, session = false) {\n    const k = this._addPrefix(key);\n    if (session) {\n      sessionStorage.setItem(k, value);\n    }\n    localStorage.setItem(k, value);\n    this.subscriptionManager.notify(key);\n  }\n  delete(key: string, session = false) {\n    const k = this._addPrefix(key);\n    if (session) {\n      sessionStorage.removeItem(k);\n    }\n    localStorage.removeItem(k);\n    this.subscriptionManager.notify(key);\n  }\n  cleanup() {\n    window.removeEventListener('storage', this._handleNewValue);\n  }\n}\n","import React from 'react';\n\nexport default class Dialog extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n    }\n  }\n  render() {\n    const {title, children, onClose, className = ''} = this.props;\n    return (\n      <div onClick={onClose} className={`${className} dialog`}>\n        <div\n          tabIndex=\"-1\"\n          onClick={(e) =>{e.stopPropagation()}}\n        >\n          <div className=\"dialog-heading\">\n            <div className=\"dialog-title\">{title}</div>\n            <div className=\"dialog-close\">\n              <button onClick={onClose}>X</button>\n            </div>\n          </div>\n          <div className=\"dialog-content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nexport default function Help(props) {\n  const {onClose} = props;\n  const asyncInitCode = `\nBenchmark.init = () => {\n  return new Promise(resolve => {\n    window.img = new Image();\n    img.onload = resolve;\n    img.src = 'url-for-img';\n  });\n}\n`.trim();\n  return (\n    <Dialog title=\"jsBenchIt\" onClose={onClose}>\n      <div className=\"markdown\">\n      <p>Add your test cases, click <code>Run</code>.</p>\n      <p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b\">Click here for an example</a>.</p>\n      <h2>Contribute, Fix, Enhance!</h2>\n      <p>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsbenchit\">https://github.com/greggman/jsbenchit</a>\n      </p>\n      <h2>Docs</h2>\n      <p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsbenchit/blob/main/docs/index.md\">See Here</a>.</p>\n      <h2>Saving</h2>\n      <p>You can save your tests in multiple ways.</p>\n      <ol>\n        <li>To a github gist using your github account.\n        </li>\n        <li>Save it manually into github\n          <p>\n           Copy the JSON. Go to github. Create a new gist. Name the file\n           <code>jsBenchIt.json</code> Paste the JSON in. Pick \"Create public gist\".\n          </p>\n          <p>\n           Note the id in the URL after you create the gist.\n          </p>\n          <p>\n           Create a url in the form <code>https://jsbenchit.org/?src=&lt;gist_id&gt;</code>.\n          </p>\n          <p>\n           Example: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b\">https://jsbenchit.org/?src=d401d49caa9e9295a026bbaee70fee3b</a>\n          </p>\n        </li>\n        <li>Save it manually somewhere else.\n          <p>\n           If there's some other service that will provide a string via\n           http get then copy and save the JSON there then create a URL\n           in the form of <code>https://jsbenchit.org/?src=&lt;url&gt;</code>. Note: you\n           will have to escape the URL although if just paste it into your\n           browser it will likely do the conversion for you.\n          </p>\n        </li>\n        <li>Save it as a bookmark or link\n          <p>\n           In the SaveAs dialog there's a link that contains all the data\n           for your benchmark.\n          </p>\n        </li>\n      </ol>\n    <h2>Asynchronous Initialization</h2>\n    <p>Only the \"Initialization\" portion may be asynchronous. To make\n     the initialization asynchronous set <code>Benchmark.init</code> to function\n     that returns a <code>Promise</code>. Example:\n    </p>\n    <pre><code>{asyncInitCode}</code></pre>\n    <h2>Comparing across browsers</h2>\n    <p>\n      Saving saves the results of the benchmark so if you want to compare\n      across browsers:\n    </p>\n    <h3>With Github</h3>\n    <ol>\n      <li>Create your benchmark</li>\n      <li>Run it</li>\n      <li>Save a new gist</li>\n      <li>Copy URL to another browser</li>\n      <li>Run it</li>\n      <li>Save over old gist (or save a new gist)</li>\n    </ol>\n    <p>Repeat steps 4, 5, 6 on other browsers.</p>\n    <h3>With URL</h3>\n    <ol>\n      <li>Create your benchmark</li>\n      <li>Run it</li>\n      <li>Pick Save and copy the URL</li>\n      <li>Copy URL to another browser</li>\n      <li>Run it</li>\n      <li>Pick Save and copy the URL</li>\n    </ol>\n    <p>Repeat steps 4, 5, 6 on other browsers.</p>\n    <p>Note: In general it only makes sense to compare results of browsers\n       on the same machine.</p>\n    <hr/>\n    <p>Also see <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org\">jsgist.org</a></p>\n    </div>\n    </Dialog>\n  );\n}\n","\nexport function resultsAreValid(results) {\n  return results && ! results.error && !results.aborted;\n}\n\nexport function testResultsAreValid(test) {\n  return resultsAreValid(test.results);\n}\n\nfunction formatNumber(number) {\n  number = String(number).split('.');\n  return `${number[0].replace(/(?=(?:\\d{3})+$)(?!\\b)/g, ',')}${(number[1] ? `.${number[1]}` : '')}`;\n}\n\nexport function formatResults(results) {\n  const {hz = 0, stats = {numSamples: 0, rme: 0}} = results;\n  const opsPerSec = formatNumber(hz.toFixed(hz < 100 ? 2 : 0));\n  const plusMinus = stats.rme.toFixed(2);\n  return `${opsPerSec} ops/sec ±${plusMinus}% (runs: ${stats.numSamples})`;\n}","import {parse} from 'platform';\nimport {hsl} from '../libs/color-utils.js';\nimport {classNames} from '../libs/css-utils.js';\nimport {formatResults, testResultsAreValid} from '../libs/model-utils.js';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n\nexport function createResult(props, e) {\n  const isDarkMode = darkMatcher.matches;\n  const {max, test, result, key} = props;\n  const {name} = test;\n  const {aborted, hz, error} = result;\n  const unRun = hz === undefined;\n  const msg = aborted ? \n     'error/aborted' :\n     unRun\n         ? 'not run'\n         : formatResults(result);\n  const errorMsg = ((error && error.stack) || (error && error.message) || '');\n  const zeroToOne = hz / max;\n  const width = aborted || unRun ? '100%' : `${(zeroToOne * 100).toFixed(1)}%`;\n  const background = (aborted || unRun) ? {} : {background: hsl(1 / 7 - zeroToOne / 7, 1, isDarkMode ? 0.4 : 0.8)};\n\n  return e('div', {key: key, className: classNames(\"result\", {aborted, unRun})}, [\n    e('div', {key: 'a',className: \"result-bar\", style: {\n       width,\n        ...background,\n      }},\n    ),\n    e('div', {key: 'b', className: \"result-info\"}, [\n      e('div', {key: 'a', className: \"result-name\"}, name),\n      e('div', {key: 'b', className: \"result-result\"}, msg),\n      e('div', {key: 'c', className: \"result-error\"}, errorMsg),\n    ]),\n  ]);\n}\n\nexport function createResults(props, e) {\n  const {tests, getResultFn, key = 'n'} = props;\n  const max = tests\n      .filter(testResultsAreValid)\n      .reduce((max, test) => Math.max(max, getResultFn(test).hz || 0), 0);\n  return e('div', {key: key}, \n    tests.map((test, ndx) => createResult({max, test, result: getResultFn(test), key: `res${ndx}`}, e))\n  );\n}\n\nexport function createTests(props, e) {\n  const {tests} = props;\n  // TODO: as this is costly we should decide how to optimize\n  // 1. change the format?\n  // 2. use shouldComponent\n  let numResults = 0;\n  const platforms = [...tests.reduce((platforms, test) => {\n    return Object.keys(test.platforms).reduce((platforms, plat) => {\n      platforms.add(plat);\n      return platforms;\n    }, platforms);\n  }, new Set())];\n \n  const elements = e('div', {key: 'a', className: \"results-group\"}, [\n    e('div', {key: 'a'}, 'By Test:'),\n    e('div', {key: 'b'}, tests.map((test, ndx) => e('div', {key: `test${ndx}`, className: \"results\"}, [\n      e('div', {key: 'name'}, test.name),\n      createResults({\n        key: 'r',\n        tests: platforms\n          .filter(platform => test.platforms[platform])\n          .map(platform => {\n            ++numResults;\n            return {\n              name: parse(platform).description,\n              results: test.platforms[platform],\n            };\n          }),\n        getResultFn: test => test.results,\n      }, e),\n    ]))),\n  ]);\n\n  return numResults ? [elements] : [];\n}\n\nexport function createPlatforms(props, e) {\n  const {tests, onClickFactory} = props;\n\n  // TODO: as this is costly we should decide how to optimize\n  // 1. change the format?\n  // 2. use shouldComponent\n  const platforms = [...tests.reduce((platforms, test) => {\n    return Object.keys(test.platforms).reduce((platforms, plat) => {\n      platforms.add(plat);\n      return platforms;\n    }, platforms);\n  }, new Set())];\n\n  return e('div', {key: 'a', className: \"results-group\"}, [\n    ...(platforms.length ? [\n      e('div', {key: 'a'}, 'By Platform:'),\n      e('div', {key: 'b'},\n        platforms.map((platform, ndx) =>\n          e('div', {key: `plat${ndx}`, className: \"results\"}, [\n            e('div', {key: 'a'}, [\n              e('span', {key: 'a'}, parse(platform).description),\n              ...(onClickFactory ? [e('div', {\n                key: 'b',\n                className: \"delete\",\n                onClick: onClickFactory(platform),\n              }, 'ⓧ')] : []),\n            ]),\n            createResults({\n              tests: tests.filter(test => test.platforms[platform]),\n              getResultFn: test => test.platforms[platform],\n              key: 'b',\n            }, e),\n          ]),\n        )\n      ),\n    ] : []),\n  ]);\n}","export const hsl = (h, s, l) => `hsl(${h * 360 | 0}, ${s * 100 | 0}%, ${l * 100 | 0}%)`;\n","import React from 'react';\nimport {createResults} from '../libs/result-helper.js';\nimport './Results.css';\n\nexport default function Results(props) {\n  return createResults(props, React.createElement);\n};","import Ajv from 'ajv';\n\nimport {isDevelopment} from './flags.js';\nimport schema from './schema.json';\nimport SubscriptionManager from './SubscriptionManager';\n\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst validator = ajv.compile(schema);\n\nconst trackedValues = {};\n\nfunction getValueOrMakeNew(name) {\n  const trackedValue = trackedValues[name] || {\n    subscriptions: new Set(),\n  };\n  trackedValues[name] = trackedValue;\n  return trackedValue;\n}\n\nexport function add(name, initialValue) {\n  const trackedValue = getValueOrMakeNew(name);\n  if (initialValue !== undefined) {\n    trackedValue.value = initialValue;\n  }\n  return trackedValue;\n}\n\nexport function get(name) {\n  return trackedValues[name].value;\n}\n\nexport function set(name, newValue) {\n  const trackedValue = trackedValues[name];\n  if (!trackedValue) {\n    throw new Error(`no such track value: ${name}`);\n  }\n  trackedValue.value = newValue;\n  const fns = [...trackedValue.subscriptions.keys()];\n  for (const fn of fns) {\n    fn(newValue, name);\n  }\n}\n\nexport function subscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.add(fn);\n}\n\nexport function unsubscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.delete(fn);\n}\n\nconst newTestData = {\n  \"title\": \"My Test\",\n  \"initialization\": \"// runs once\",\n  \"setup\": \"// runs before each test\",\n  \"tests\": [\n    {\n      name: \"test 1\",\n      code: \"// put test code here\",\n      results: {},\n      platforms: {},\n    },\n    {\n      name: \"test 2\",\n      code: \"// put test code here\",\n      results: {},\n      platforms: {},\n    },\n  ],\n};\nexport function getNewTestData() {\n  return JSON.parse(JSON.stringify(newTestData));\n}\n\n/* eslint no-template-curly-in-string:0 */\nexport let data;\n\nexport const dataVersionKey = 'dataVersion';\nexport const updateVersionKey = 'updateVersion';\nexport const resultsVersionKey = 'resultsVersion';\nexport const testsVersionKey = 'testsVersion';\n\nadd(dataVersionKey, 0);   // any data changes (when an item in the data is change)\nadd(updateVersionKey, 0);  // all data changes (when the entire data objects replaced with new data)\nadd(resultsVersionKey, 0);  // results and test name changes\nadd(testsVersionKey, 0);  // tests added or removed or the main name is changed\n\nconst incVersion = key => set(key, get(key) + 1);\nconst incDataVersion = _ => incVersion(dataVersionKey);\nconst incResultsVersion = _ => incVersion(resultsVersionKey);\nconst incTestsVersion = _ => incVersion(testsVersionKey);\nconst incUpdateVersion = _ => {\n  incVersion(updateVersionKey);\n  incDataVersion();\n  incTestsVersion();\n  incResultsVersion();\n};\n\nexport function addTest() {\n  const name = `test ${data.tests.length + 1}`;\n  data.tests.push({\n    name,\n    code: `// ${name}`,\n    results: {},\n    platforms: {},\n  });\n  incDataVersion();\n  incTestsVersion();\n}\n\nexport function deleteTest(ndx) {\n  data.tests.splice(ndx, 1);\n  incDataVersion();\n  incTestsVersion();\n  incResultsVersion();\n}\n\nconst testSubscriptionManager = new SubscriptionManager();\n\nexport function subscribeTest(test, fn) {\n  testSubscriptionManager.subscribe(test, fn);\n}\n\nexport function unsubscribeTest(test, fn) {\n  testSubscriptionManager.unsubscribe(test, fn);\n}\n\nexport function getTests() {\n  return data.tests;\n}\n\nexport function setTitle(title) {\n  data.title = title;\n  incDataVersion();\n  incResultsVersion();\n  incTestsVersion();\n}\n\nexport function setInitialization(init) {\n  data.initialization = init;\n  incDataVersion();\n}\n\nexport function setSetup(setup) {\n  data.setup = setup;\n  incDataVersion();\n}\n\nexport function setTestName(ndx, name) {\n  const test = data.tests[ndx];\n  test.name = name;\n  incDataVersion();\n  incResultsVersion();\n  testSubscriptionManager.notify(test);\n}\n\nexport function setTestCode(ndx, code) {\n  const test = data.tests[ndx];\n  test.code = code;\n  incDataVersion();\n  testSubscriptionManager.notify(test);\n}\n\nexport function setTestResult(ndx, results, platform) {\n  const test = data.tests[ndx];\n  test.results = results;\n  test.platforms[platform] = results;\n  incDataVersion();\n  incResultsVersion();\n}\n\nexport function deleteTestPlatform(platform) {\n  for (const test of data.tests) {\n    delete test.platforms[platform];\n  }\n  incDataVersion();\n  incResultsVersion();\n}\n\n\nexport function validate(data) {\n  if (!validator(data)) {\n    debugger;\n    throw new Error(`data not valid:\\n${validator.errors.map(e => `${e.message}: ${e.dataPath}`)}`);\n  }\n}\n\nexport function setData(newData) {\n  validate(newData);\n  data = newData;\n  incUpdateVersion();\n  if (isDevelopment) {\n    window.d = data;\n  }\n}\n\nexport function clearAllTestResults() {\n  for (const test of data.tests) {\n    test.results = {};\n  }\n  incDataVersion();\n  incResultsVersion();\n}\n\nsetData(isDevelopment ? {\n  \"title\": \"My test\",\n  \"setup\": \"\",\n  \"initialization\": \"const vowelArray = ['a', 'e', 'i', 'o', 'u'];\\nconst isVowelByArray = c => vowelArray.includes(c.toLowerCase());\\nconst isVowelByOr = c => {\\n  c = c.toLowerCase();\\n  return c === 'a' || c === 'e' || c === 'i' || c === 'o' || c === 'u';\\n}\\nconst test = new Array(1000).fill(0).map(_ => String.fromCharCode(0x61 + Math.random() * 26 | 0)).join('');\\nconst expected = test.split('').reduce((sum, c) => sum + isVowelByArray(c), 0);\\nconst verify = result => {\\n  if (result !== expected) {\\n    throw new Error(`actual: ${result} not equal to expected: ${expected}`);\\n  }\\n};\\nconsole.log('-setup-');\\n\",\n  \"tests\": [\n    {\n      \"name\": \"test1\",\n      \"code\": \"let sum = 0;\\nfor (let i = 0; i < test.length; ++i) {\\n  sum += isVowelByArray(test[i]);\\n}\\nverify(sum);\\n\",\n      \"results\": {\n        \"aborted\": false,\n        \"count\": 3925,\n        \"cycles\": 6,\n        \"hz\": 48757.763975155285,\n        \"stats\": {\n          \"numSamples\": 45,\n          \"moe\": 1.3253034196794547e-7,\n          \"rme\": 0.6461883133219702,\n          \"sem\": 6.761752141221708e-8,\n          \"deviation\": 5.409401712977366e-7,\n          \"mean\": 0.000020509554140127386,\n          \"variance\": 2.926162689236246e-13\n        },\n        \"times\": {\n          \"cycle\": 0.08049999999999999,\n          \"elapsed\": 6.087,\n          \"period\": 0.000020509554140127386,\n          \"timeStamp\": 1602070187852\n        }\n      },\n      \"platforms\": {\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36\": {\n          \"aborted\": false,\n          \"count\": 3925,\n          \"cycles\": 6,\n          \"hz\": 48757.763975155285,\n          \"stats\": {\n            \"numSamples\": 45,\n            \"moe\": 1.3253034196794547e-7,\n            \"rme\": 0.6461883133219702,\n            \"sem\": 6.761752141221708e-8,\n            \"deviation\": 5.409401712977366e-7,\n            \"mean\": 0.000020509554140127386,\n            \"variance\": 2.926162689236246e-13\n          },\n          \"times\": {\n            \"cycle\": 0.08049999999999999,\n            \"elapsed\": 6.087,\n            \"period\": 0.000020509554140127386,\n            \"timeStamp\": 1602070187852\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"test2\",\n      \"code\": \"let sum = 0;\\nfor (let i = 0; i < test.length; ++i) {\\n  sum += isVowelByOr(test[i]);\\n}\\nverify(sum);\\n\",\n      \"results\": {\n        \"aborted\": false,\n        \"count\": 4467,\n        \"cycles\": 4,\n        \"hz\": 55738.7911907046,\n        \"stats\": {\n          \"numSamples\": 45,\n          \"moe\": 1.6987329815854215e-7,\n          \"rme\": 0.9468532294935285,\n          \"sem\": 8.667005008088886e-8,\n          \"deviation\": 6.879221958946363e-7,\n          \"mean\": 0.00001794082682164028,\n          \"variance\": 4.732369476044983e-13\n        },\n        \"times\": {\n          \"cycle\": 0.08014167341226712,\n          \"elapsed\": 5.979,\n          \"period\": 0.00001794082682164028,\n          \"timeStamp\": 1602070193946\n        }\n      },\n      \"platforms\": {\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36\": {\n          \"aborted\": false,\n          \"count\": 4467,\n          \"cycles\": 4,\n          \"hz\": 55738.7911907046,\n          \"stats\": {\n            \"numSamples\": 45,\n            \"moe\": 1.6987329815854215e-7,\n            \"rme\": 0.9468532294935285,\n            \"sem\": 8.667005008088886e-8,\n            \"deviation\": 6.879221958946363e-7,\n            \"mean\": 0.00001794082682164028,\n            \"variance\": 4.732369476044983e-13\n          },\n          \"times\": {\n            \"cycle\": 0.08014167341226712,\n            \"elapsed\": 5.979,\n            \"period\": 0.00001794082682164028,\n            \"timeStamp\": 1602070193946\n          }\n        }\n      }\n    }\n  ]\n} : getNewTestData());\n","import React from 'react';\nimport Results from './Results';\nimport * as model from '../libs/model';\n\nexport default class LatestResults extends React.Component {\n//  constructor(props) {\n//    super(props);\n//  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    model.subscribe(model.resultsVersionKey, this.handleChange);\n  }\n  componentWillUnmount() {\n    model.unsubscribe(model.resultsVersionKey, this.handleChange);\n  }\n  render() {\n\n    const tests = model.getTests();\n    return (\n      <div className=\"results-group\">\n        <div>Latest Results:</div>\n        <div>\n          <div className=\"results\">\n            <Results tests={tests} getResultFn={test => test.results} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import Ajv from 'ajv';\nimport * as model from './model.js';\nimport {storageManager} from '../globals.js';\nconst gistsKey = 'gists';\n\nconst gistSchema = {\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"date\": { \"type\": \"string\" },\n  },\n  \"required\": [\"name\", \"date\"],\n};\n\nconst gistsSchema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"type\": \"object\",\n  \"additionalProperties\": gistSchema,\n};\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst gistsValidator = ajv.compile(gistsSchema);\nconst gistValidator = ajv.compile(gistSchema);\n\nfunction getStoredGists() {\n  try {\n    const gists = JSON.parse(storageManager.get(gistsKey));\n    if (!gistsValidator(gists)) {\n      storageManager.delete(gistsKey);\n      throw new Error();\n    }\n    return gists;\n  } catch(e) {\n    return {};\n  }\n}\n\nmodel.add('gists', getStoredGists());\n\n// does this need to be centralized?\nstorageManager.subscribe(gistsKey, () => {\n  model.set('gists', getStoredGists());\n});\n\nexport function addGist(id, name, date, _public) {\n  const gist = {name, date, public: _public};\n  if (!gistValidator(gist)) {\n    throw new Error(`gist not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  const gists = {...model.get('gists')};\n  gists[id] = gist;\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function removeGist(id) {\n  const gists = {...model.get('gists')};\n  delete gists[id];\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nfunction saveGistsToLocalStorage(gists) {\n  // send to other windows\n  storageManager.set(gistsKey, JSON.stringify(gists));\n}\n\nexport function getGists() {\n  return model.get('gists');\n}\n\nexport function setGists(gists) {\n  if (!gistsValidator(gists)) {\n    throw new Error(`gists not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function subscribe(fn) {\n  model.subscribe('gists', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('gists', fn);\n}\n","import React from 'react';\nimport EditLine from './EditLine.js';\nimport {classNames} from '../libs/css-utils.js';\nimport * as gists from '../libs/gists.js';\nimport ServiceContext from '../ServiceContext.js';\n\ntype Gist = {\n  name: string,\n  date: string,\n  public: boolean,\n}\n\ninterface GistIdMap {\n   [key: string]: Gist;\n} \n\ntype LoadGistState = {\n  loading: boolean,\n  gists: GistIdMap,\n  checks: Set<string>,\n  filter: string,\n};\n\nfunction gistsToSortedArray(gists: GistIdMap) {\n  return Object.entries(gists).map(([id, {name, date, public: _public}]) => {\n    return {id, name, date, public: _public};\n  }).sort((b, a) => a.date < b.date ? -1 : ((a.date > b.date) ? 1 : 0));\n}\n\nfunction matchFilter(filter: string) {\n  filter = filter.trim().toLowerCase();\n  return function(gist: Gist) {\n    const {name, date} = gist;\n    return filter === '' ||\n           name.toLowerCase().includes(filter) ||\n           date.substring(0, 10).includes(filter);\n  }\n}\n\nexport default class LoadGist extends React.Component<{}, LoadGistState> {\n  constructor (props: {}) {\n    super(props);\n    const _gists = gists.getGists();\n    this.state = {\n      loading: false,\n      gists: _gists,\n      checks: new Set(),\n      filter: '',\n    };\n  }\n  handleNewGists = (gists: GistIdMap) => {\n    this.setState({\n      gists,\n    });\n  }\n  toggleCheck = (id: string) => {\n    const checks = new Set(this.state.checks);\n    if (checks.has(id)) {\n      checks.delete(id);\n    } else {\n      checks.add(id);\n    }\n    this.setState({checks});\n  }\n  onUserStatusChange = () => {\n    this.forceUpdate();\n    const {userManager} = this.context;\n    if (userManager.getUserData()) {\n      this.loadGists();\n    }\n  }\n  componentDidMount() {\n    const {userManager} = this.context;\n    gists.subscribe(this.handleNewGists);\n    userManager.subscribe(this.onUserStatusChange);\n  }\n  componentWillUnmount() {\n    const {userManager} = this.context;\n    gists.unsubscribe(this.handleNewGists);\n    userManager.unsubscribe(this.onUserStatusChange);\n  }\n  loadGists = async() => {\n    const {addError, github} = this.context;\n    this.setState({loading: true});\n    try {\n      const gistArray = await github.getUserGists();\n      const gistsById = gistArray.reduce((gists: any[], gist: any) => {\n        gists[gist.id] = {\n          name: gist.description,\n          date: gist.updated_at,\n          public: gist.public,\n        };\n        return gists;\n      }, {});\n      gists.setGists(gistsById);\n    } catch (e) {\n      addError(`could not load gists: ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  deleteSelected = async() => {\n    const {checks, gists: _gists} = this.state;\n    const ids: string[] = [];\n    // just incase?\n    checks.forEach((id, ndx) => {\n      if (_gists[id]) {\n        ids.push(id);\n      }\n    });\n    const {addError, github} = this.context;\n    this.setState({loading: true});\n    for (const id of ids) {\n      try {\n        await github.deleteGist(id);\n        gists.removeGist(id);\n      } catch(e) {\n        addError(`could not delete gist: ${id}: ${e}`);\n      }\n    }\n    this.setState({loading: false});\n  }\n  clearBackup = () => {\n    const {backupManager} = this.context;\n    backupManager.clearBackup();\n  }\n  renderLogin() {\n    const {userManager} = this.context;\n    return (\n      <div>\n        <button\n          onClick={userManager.login}\n        >Login with github</button>\n      </div>\n    );\n  }\n  renderLoad() {\n    const {userManager} = this.context;\n    const {gists, checks, loading, filter} = this.state;\n    const userData = userManager.getUserData();\n    const canLoad = !!userData && !loading;\n    const gistArray = gistsToSortedArray(gists);\n    return (\n      <div>\n        <p>\n          <button\n            className={classNames({disabled: !canLoad})}\n            onClick={this.loadGists}\n          >{gistArray.length ? 'Reload' : 'Load'} Your Gists</button>\n        </p>\n         {\n            gistArray.length >= 0 &&\n              <React.Fragment>\n              <p>\n                <EditLine className=\"foobar\" placeholder=\"search:\" value={filter} onChange={(filter:string) => {this.setState({filter})}} />\n              </p>\n              <table className=\"gists\">\n                <tbody>\n                {\n                  gistArray.filter(matchFilter(filter)).map((gist, ndx) => {\n                    return (\n                      <tr key={`g${ndx}`}>\n                        <td><input type=\"checkbox\" id={`gc${ndx}`} checked={checks.has(gist.id)} onChange={() => this.toggleCheck(gist.id)}/><label htmlFor={`gc${ndx}`}/></td>\n                        <td><a onClick={this.clearBackup} href={`${window.location.origin}?src=${encodeURIComponent(gist.id)}`}>{gist.name}</a></td>\n                        <td>{gist.date.substring(0, 10)}</td>\n                      </tr>\n                    );\n                  })\n                }\n                </tbody>\n              </table>\n              <div><button onClick={this.deleteSelected}>Delete Selected Gists</button></div>\n              </React.Fragment>\n          }\n      </div>\n    );\n  }\n  render() {\n    const {userManager} = this.context;\n    const userData = userManager.getUserData();\n    return userData ? this.renderLoad() : this.renderLogin();\n  }\n}\n\nLoadGist.contextType = ServiceContext;\n","import React, {useContext, useState} from 'react';\nimport Code from './Code.js';\nimport * as model from '../libs/model.js';\nimport ServiceContext from '../ServiceContext.js';\n\nexport default function LoadJSON(props) {\n  const [json, setJSON] = useState('');\n  const {addError} = useContext(ServiceContext);\n\n  function load() {\n    const {onLoad} = props;\n    try {\n      const data = JSON.parse(json);\n      model.setData(data);\n      onLoad();\n    } catch (e) {\n      addError(`bad json: ${e}`);\n    }\n  }\n\n  return (\n    <div>\n      <div style={{height: '100px'}}>\n        <Code\n          value={json}\n          onValueChange={setJSON}\n\n        />\n      </div>\n      <p>\n        <button onClick={load}>Load JSON</button>\n      </p>\n    </div>\n  )\n}","import React, {useContext, useState} from 'react';\nimport EditLine from './EditLine';\nimport * as model from '../libs/model.js';\nimport ServiceContext from '../ServiceContext.js';\n\nexport default function LoadURL(props) {\n  const [url, setUrl] = useState('');\n  const {addError} = useContext(ServiceContext);\n  async function loadUrl() {\n    const {onLoad} = props;\n    try {\n      const req = await fetch(url);\n      const data = await req.json();\n      model.setData(data);\n      onLoad()\n    } catch(e) {\n      addError(`could not load url: ${e}`);\n    }\n  } \n  return (\n    <div>\n      <EditLine value={url} onChange={setUrl} placeholder=\"url-to-json\" />\n      <p>\n        <button onClick={loadUrl}>Load URL</button>\n      </p>\n    </div>\n  )\n}","import React from 'react';\n\nexport default function Section(props) {\n  const {heading, children} = props;\n  return (\n    <div className=\"section\">\n      <div className=\"section-heading\">{heading}</div>\n      <div className=\"section-content\">\n        {children}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport LoadGist from './LoadGist';\nimport LoadJSON from './LoadJSON.js';\nimport LoadURL from './LoadURL.js';\nimport Section from './Section.js';\n\nexport default function Load(props) {\n  const {data, onLoad, onClose} = props;\n  return (\n    <Dialog title=\"Load\" className=\"fixed-size-dialog\" onClose={onClose}>\n      <Section heading=\"Load Gist\">\n        <LoadGist data={data} onLoad={onLoad} />\n      </Section>\n      <Section heading=\"Load URL\">\n        <LoadURL data={data} onLoad={onLoad} />\n      </Section>\n      <Section heading=\"Load JSON\">\n        <LoadJSON data={data} onLoad={onLoad} />\n      </Section>\n    </Dialog>\n  )\n}\n","import {decode, encode} from 'base64-arraybuffer';\nimport {inflate, deflate} from 'uzip-module';\n\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder();\nconst compressedPrefix = 'cb64,';\nconst uncompressedPrefix = 'b64,';\n\nexport const isCompressedBase64 = s => s.startsWith(compressedPrefix) || s.startsWith(uncompressedPrefix);\nexport function compressedBase64ToJSON(src) {\n  const isCompressed = src.startsWith(compressedPrefix);\n  const prefix = isCompressed ? compressedPrefix : uncompressedPrefix;\n  const base64 = src.substr(prefix.length)\n     .replace(/-/g, '+')\n     .replace(/_/g, '/');\n  const raw = new Uint8Array(decode(base64));\n  const bin = isCompressed \n     ? inflate(raw)\n     : raw;\n  const json = utf8Decoder.decode(bin);\n  return JSON.parse(json);\n}\n\nexport function jsonToCompressedBase64(data) {\n  const json = JSON.stringify(data);\n  const bin = utf8Encoder.encode(json);\n  const compressed = deflate(bin);\n  const useCompressed = compressed.length < bin.length;\n  const base64 = encode(useCompressed ? compressed : bin)\n      .replace(/\\+/g, '-')    // better for URLs because + and / have to be escaped\n      .replace(/\\//g, '_');\n  const prefix = useCompressed ? compressedPrefix : uncompressedPrefix;\n  return `${prefix}${base64}`;\n}\n","\nimport {isCompressedBase64, compressedBase64ToJSON} from './compression.js';\nimport {getAnonGist} from './GitHub.js';\n\nconst idRE = /^[a-z0-9]+$/i;\nexport const isGistId = s => idRE.test(s);\n\n// passing it github here is a bad hack!\n// just wanted things to work again. Have to fix later\nexport async function loadGistFromSrc(src, github) {\n  if (isGistId(src)) {\n    const {data, rawData} = await (github ? github.getAnonGist(src) : getAnonGist(src));\n    return {data, id: src, rawData};\n  } else if (isCompressedBase64(src)) {\n    return {data: compressedBase64ToJSON(src)};\n  } else {\n    const res = await fetch(src);\n    const data = await res.json();\n    return {data};\n  }\n}\n","import React, {useState} from 'react';\nimport {Resizable} from 're-resizable';\nimport Code from './Code.js';\nimport {classNames} from '../libs/css-utils.js';\n\nexport default function CodeArea(props) {\n  const {value, hackKey, heading, extra = [], options = {}, onValueChange} = props;\n  const [show, setShow] = useState(props.show === false ? false : true);\n  const hideeHide = !show;\n  return (\n    <div className=\"code-area\">\n        <div className=\"expander\">\n          <div className=\"hider\" onClick={()=>setShow(!show)}>{show ? '▼' : '◀'}</div>\n          {heading}\n        </div>\n        <div className={classNames(\"hidee\", {hideeHide})}>\n          <Resizable\n            handleClasses={{bottom: \"resize-handle-horizontal\"}}\n            handleStyles={{bottom: {bottom: '0px', position: 'initial'}}}\n            style={{position: 'relative'}}\n            defaultSize={{height: 200}}\n            minHeight={20}\n            enable={{top:false, right:false, bottom:true, left:false, topRight:false, bottomRight:false, bottomLeft:false, topLeft:false}}\n          >\n            <Code\n              hackKey={hackKey}\n              value={value}\n              options={options}\n              onValueChange={onValueChange}\n            />\n          </Resizable>\n          {extra}\n        </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport CodeArea from './CodeArea.js';\n\nexport default function NamedCodeArea(props) {\n  const {title, hackKey} = props;\n  const heading = (\n    <div className=\"named\">{title}</div>\n  );\n\n  return (\n    <CodeArea hackKey={hackKey} heading={heading} {...props} />\n  );\n}","export const noop = () => {};\nexport const wait = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n\nfunction findNdx(files: any, endings: string[]) {\n  // calling toLowerCase a bunch is bad but there will never be more than a few files\n  for (const ending of endings) {\n    const ndx = files.findIndex((file: any) => file.name.toLowerCase().endsWith(ending.toLowerCase()));\n    if (ndx >= 0) {\n      return ndx;\n    }\n  }\n  return -1;\n}\n\nexport function getOrFindNdx(files: any[], name: string, ...endings: string[]) {\n  const ndx = files.findIndex(f => f.name.toLowerCase() === name.toLowerCase);\n  if (ndx >= 0) {\n    return ndx;\n  }\n  return findNdx(files, endings);\n}\n\nexport function getOrFind(files: any[], ...args: string[]) {\n  const ndx = getOrFindNdx(files, '', ...args);\n  return ndx >= 0 ? files[ndx] : '';\n}\n\nconst stringify = (options: any, sep: string = ',') => Object.entries(options).map(([key, value]) => `${key}=${value}`).join(sep);\n\nexport function createPopup(url: string, config: any = {}): (Window | undefined) {\n  const width = config.width || 500;\n  const height = config.height || 500;\n  const options = {\n    width: width,\n    height: height,\n    top: window.screenY + ((window.outerHeight - height) / 2.5),\n    left: window.screenX + ((window.outerWidth - width) / 2)\n  };\n  return window.open(url, '_blank', stringify(options, ',')) || undefined;\n}\n","\nimport {clientId} from '../globals.js';\nimport {createURL} from './url.js';\nimport {createPopup} from './utils';\nimport StorageManager from './StorageManager';\nimport * as winMsgMgr from './WindowMessageManager';\n\nconst patKey = 'pat';\n\nconst getTokenURL = 'https://auth.jsbenchit.org/oauth-helper'\nexport default class OAuthManager {\n  private _popup?: Window;\n  private _state?: string;\n  private _storageManager: StorageManager;\n\n  constructor(storageManager: StorageManager) {\n    this._popup = undefined;\n    this._state = undefined;  // last state sent to auth\n    this._storageManager = storageManager;\n    winMsgMgr.on('auth', null, (data: any) => {\n      this._closePopup();\n      if (data.state === this._state) {\n        this.requestToken(data);\n      }\n    });\n  }\n  // TODO: rename this and decide if Github should be connected\n  pat() {\n    return this._storageManager.get(patKey);\n  }\n  subscribe(fn: () => void) {\n    this._storageManager.subscribe(patKey, fn);\n  }\n  unsubscribe(fn: () => void) {\n    this._storageManager.unsubscribe(patKey, fn);\n  }\n  _closePopup() {\n    if (this._popup) {\n      this._popup.close();\n      this._popup = undefined;\n    }\n  }\n  requestToken = async (auth: any) => {\n    try {\n      const params = {\n        client: clientId,\n        code: auth.code,\n      };\n      const url = createURL(getTokenURL, params);\n      const req = await fetch(url);\n      const data = await req.json();\n      if (!data.access_token) {\n        throw new Error(JSON.stringify(data));\n      }\n      this._storageManager.set(patKey, data.access_token);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  logout = () => {\n    this._storageManager.delete(patKey);\n  }\n  login = () => {\n    this._closePopup();\n    this._state = `${Date.now()}-${Math.random()}`;  // does this need to special? Seems like no\n    const url = createURL('https://github.com/login/oauth/authorize', {\n      client_id: clientId,\n      scope: 'gist',\n      state: this._state,\n    });\n    this._popup = createPopup(url);\n  }\n}","import React from 'react';\nimport * as model from '../libs/model.js';\nimport { createPlatforms } from '../libs/result-helper.js';\n\nexport default class Platforms extends React.Component {\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    model.subscribe(model.resultsVersionKey, this.handleChange);\n  }\n  componentWillUnmount() {\n    model.unsubscribe(model.resultsVersionKey, this.handleChange);\n  }\n  render() {\n    const tests = model.getTests();\n    return createPlatforms({\n      tests,\n      onClickFactory: platform => _ => model.deleteTestPlatform(platform),\n    }, React.createElement);\n  }\n}","import React from 'react';\n\nexport default function Embed(props) {\n  const {gistId} = props;\n  return (\n    <div>\n      <div className=\"markdown\">\n        <p>\n        You can embed the results of a jsBenchIt benchmark in 2 ways.\n        </p>\n        <h3>via script</h3>\n        <p>Create a script tag pointing to\n        {' '}<code>https://jsbenchit.org/embed-resize.js</code>{' '} and add a {' '}<code>data-jsbenchit</code>{' '}\n        attribute a like  \n        {' '}<code>src=&lt;src&gt;</code>{' '} where\n        {' '}<code>&lt;src&gt;</code>{' '} is one of the forms above. Either\n        {' '}<code>src=&lt;gist_id&gt;</code>{' '}or\n        {' '}<code>src=&lt;base64url&gt;</code>{' '}or\n        {' '}<code>src=&lt;url_to_json&gt;</code>.\n        You can also add {' '}<code>noheader=true</code>{' '} if you don't want the header\n        to appear. Add a {' '}<code></code>results={' '} parameter with comma separated {' '}<code>latest</code>,\n        {' '}<code>platforms</code>, and/or {' '}<code>tests</code>{' '} to choose which results to show.\n        If you don't specify any all 3 will show. Separate parameters with {' '}<code>&amp;</code>{' '} \n        </p>\n        { !!gistId &&\n            <React.Fragment>\n              <p>\n              For example embedding the current gist via script:\n              </p>\n              <pre><code style={{userSelect: 'all'}}>\n      &lt;script src=\"https://jsbenchit.org/embed-resize.js\" defer data-jsbenchit=\"src={gistId}&amp;results=latest\"&gt;&lt;/script&gt;\n              </code></pre>\n            </React.Fragment>\n        }\n        <p>\n          The advantage of using a script is it will resize the iframe's height to show all the content.\n        </p>\n        <h3>via iframe</h3>\n        <p>Create an iframe pointing to\n        {' '}<code>https://jsbenchit.org/embed.html?src=&lt;src&gt;</code>{' '} using the same\n        parameters as above.\n        </p>\n        { !!gistId &&\n            <React.Fragment>\n              <p>\n              For example, embedding the current gist via iframe:\n              </p>\n              <pre><code style={{userSelect: 'all'}}>\n      &lt;iframe src=\"https://jsbenchit.org/embed.html?src={gistId}&amp;results=latest\"&gt;&lt;/iframe&gt;\n              </code></pre>\n            </React.Fragment>\n        }\n        <p>\n          The disadvantage of using an iframe is it's up to you to make the iframe large enough\n          to show the results. Otherwise you'll get a scrollbar. The advantage is no trust is required.\n        </p>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { classNames } from '../libs/css-utils.js';\nimport * as gists from '../libs/gists.js';\nimport ServiceContext from '../ServiceContext.js';\n\nexport default class SaveAsGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      saving: false,\n    };\n  }\n  componentDidMount() {\n    const {userManager} = this.context;\n    userManager.subscribe(this.onPatChange);\n  }\n  componentWillUnmount() {\n    const {userManager} = this.context;\n    userManager.unsubscribe(this.onPatChange);\n  }\n  onPatChange = () => {\n    this.forceUpdate();\n  }\n  saveNew = async() => {\n    const {github, addError} = this.context;\n    this.setState({saving: true});\n    const {data, onSave, onClose} = this.props;\n    let success = false;\n    try {\n      const {id, name, date} = await github.createGist(data);\n      gists.addGist(id, name, date, true);\n      onSave(id);\n      success = true;\n    } catch (e) {\n      addError(`could not create gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  saveOverExisting = async() => {\n     const {github, addError} = this.context;\n    this.setState({saving: true});\n    const {data, gistId, onClose} = this.props;\n    let success = false;\n    try {\n      const {id, name, date} = await github.updateGist(gistId, data);\n      gists.addGist(id, name, date, true);\n      success = true;\n    } catch (e) {\n      addError(`could not update gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  forkAndSave = async() => {\n    const {github, addError} = this.context;\n    const {data, gistId, onSave, onClose} = this.props;\n    this.setState({saving: true});\n    let success = false;\n    try {\n      const {id: newId} = await github.forkGist(gistId);\n      const {id, name, date} = await github.updateGist(newId, data);\n      gists.addGist(id, name, date, true);\n      onSave(id);\n      success = true\n    } catch (e) {\n      addError(`could not fork and update gist: ${e}`);\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  renderLogin() {\n    const {userManager} = this.context;\n    return (\n      <div>\n        <button\n          onClick={userManager.login}\n        >Login with github</button>\n      </div>\n    );\n  }\n  renderSave() {\n    const {saving} = this.state;\n    const {userManager} = this.context;\n    const userData = userManager.getUserData();\n    const {gistId, gistOwnerId} = this.props;\n    const canUpdate = userData && gistId && userData.id === gistOwnerId;\n    const canFork = userData && gistId && userData.id !== gistOwnerId;\n    return (\n      <div>\n        <button\n          className={classNames({disabled: saving})}\n          data-type=\"new\"\n          onClick={this.saveNew}\n        >Save to New Gist</button>\n        <button\n          className={classNames({disabled: !canUpdate || saving})}\n          data-type=\"update\"\n          onClick={this.saveOverExisting}\n        >Update Current Gist</button>\n        <button\n          className={classNames({disabled: !canFork || saving})}\n          data-type=\"fork\"\n          onClick={this.forkAndSave}\n        >Fork and Save Gist</button>\n      </div>\n    );\n  }\n  render() {\n    const {userManager} = this.context;\n    const userData = userManager.getUserData();\n    return userData ? this.renderSave() : this.renderLogin();\n  }\n}\n\nSaveAsGist.contextType = ServiceContext;","import React from 'react';\n\nexport default function SaveAsJSON(props) {\n  const {data} = props;\n  return (\n    <div>\n      <div>\n        Copy the text below, paste into the load ui or put somewhere on the net\n        and make your own URL with <code>{window.location.origin}?src=url-to-json</code>.\n      </div>\n      <pre className=\"layout-scrollbar\" style={{userSelect: 'all'}}>{JSON.stringify(data)}</pre>\n      <div><a target=\"_blank\" rel=\"noopener noreferrer\" href={`${window.location.origin}?src=${encodeURIComponent(`${window.location.origin}/example.json`)}`}>Example</a></div>\n    </div>\n  );\n}","import React from 'react';\n\nimport {jsonToCompressedBase64} from '../libs/compression.js';\n\nexport default function SaveAsURL(props) {\n  const {data} = props;\n  const src = jsonToCompressedBase64(data);\n  const url = `${window.location.origin}?src=${encodeURIComponent(src)}`;\n  return url.length < 8000\n    ? (\n      <div>\n        <div>Copy / bookmark the link below</div>\n        <a className=\"bookmark\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n      </div>\n      )\n    : (\n      <div class=\"error-msg\">\n        Too large to save as URL\n      </div>\n      )\n    ;\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\nimport Embed from './Embed.js';\nimport SaveAsGist from './SaveAsGist.js';\nimport SaveAsJSON from './SaveAsJSON.js';\nimport SaveAsURL from './SaveAsURL.js';\nimport Section from './Section.js';\n\nexport default function Save(props) {\n  const {data, gistId, gistOwnerId, onSave, onClose} = props;\n  return (\n    <Dialog title=\"Save\" onClose={onClose}>\n      <Section heading=\"Save As Gist\">\n        <SaveAsGist gistId={gistId} gistOwnerId={gistOwnerId} data={data} onSave={onSave} onClose={onClose} />\n      </Section>\n      <Section heading=\"Save As URL\">\n        <SaveAsURL data={data} />\n      </Section>\n      <Section heading=\"Save As JSON\">\n        <SaveAsJSON data={data} />\n      </Section>\n      <Section heading=\"Embedding\">\n        <Embed gistId={gistId} />\n      </Section>\n    </Dialog>\n  )\n}\n","import React from 'react';\n\nconst defaultGutterSize = 10;\nconst defaultDirection = 'horizontal';\nconst defaultMinSize = 10;\n\nfunction distribute(items, buckets) {\n  const base = items / buckets | 0;\n  const extra = items % buckets;\n  const array = new Array(buckets).fill(base);\n  if (extra === 0) {\n    return array;\n  } else if (extra <= buckets / 2 | 0) {\n    const leap = buckets / extra | 0;\n    const halfLeap = leap / 2 | 0; \n    return array.map((v, i) => v + ((i % leap === halfLeap) ? 1 : 0));\n  } else {\n    const leap = buckets / (buckets - extra) | 0;\n    const halfLeap = leap / 2 | 0;\n    return array.map((v, i) => v + (1 - (i % leap === halfLeap ? 1 : 0)));\n  }\n}\n\nfunction normalizeSizes(sizes) {\n  const totalSize = sizes.reduce((sum, v) => sum + v, 0);\n  return sizes.map(v => v / totalSize);\n}\n\nconst getMouseOrTouchPosition = (e, clientAxis) => e.touches ? e.touches[0][clientAxis] : e[clientAxis];\n\nfunction addSpaceForChildren(sizes, numChildren, gutterSize, minSizePX, totalSizePX) {\n  // const numGutters = numChildren - 1;\n  // const totalGutterSpacePX = numGutters * gutterSize;\n  // const availableSpacePX = totalSizePX - totalGutterSpacePX;\n  //\n  // this is not so trivial\n  // let's say we have 3 items and we add 2 more.\n  // each of those 2 has a minSize. So need to take 2 * minSize\n  // from the 3 items or (2 * minSize / 3). But any of those items\n  // themselves might already be at or near minSize\n  //\n  // This seems like it's then iterative.\n  //\n  // go through and try to remove (minSize * numNewElements / numOldElements)\n  // from each old element but only remove such that that element\n  // is still >= minSize. When done there's possibly some amount\n  // you haven't distributed yet so repeat the process over and over\n  // until it's all distributed.\n  //\n  // given that we don't know which elements are new, for now\n  // lets just reset all the sizes\n  return new Array(numChildren).fill(1 / numChildren);\n}\n\nconst getDirectionProps = direction => (direction === 'horizontal')\n  ? {\n      dimension: 'width',\n      clientAxis: 'clientX',\n      position: 'left',\n      positionEnd: 'right',\n      clientSize: 'clientWidth',\n      style: {\n        width: '100%',\n        display: 'flex',\n      },\n    }\n  : {\n      dimension: 'height',\n      clientAxis: 'clientY',\n      position: 'top',\n      positionEnd: 'bottom',\n      clientSize: 'clientHeight',\n      style: { /*height: '100%'*/ },\n    };\n\nfunction computeNewSizes({\n  startSizes,\n  currentSizes,\n  prevPaneNdx,\n  gutterSize,\n  minSize,\n  deltaPX,\n  outerSizePX,\n}) {\n  const numPanes = currentSizes.length;\n  const numGutters = numPanes - 1;\n  const totalGutterSizePX = numGutters * gutterSize;\n\n  const gutterReservedSizesPX = distribute(totalGutterSizePX, numPanes);\n\n  const nextPaneNdx = prevPaneNdx + 1;\n  const prevPaneStartSizePX = Math.ceil(startSizes[prevPaneNdx] * outerSizePX) - gutterReservedSizesPX[prevPaneNdx];\n  const nextPaneStartSizePX = Math.ceil(startSizes[nextPaneNdx] * outerSizePX) - gutterReservedSizesPX[nextPaneNdx];\n  const spaceUsedByBothElementsPX = prevPaneStartSizePX + nextPaneStartSizePX;\n  const prevPaneNewSizePX = Math.min(\n    Math.max(minSize, prevPaneStartSizePX + deltaPX),\n    spaceUsedByBothElementsPX - minSize);\n  const nextPaneNewSizePX = spaceUsedByBothElementsPX - prevPaneNewSizePX;\n  const newSizes = [\n    ...currentSizes.slice(0, prevPaneNdx),\n    (prevPaneNewSizePX + gutterReservedSizesPX[prevPaneNdx]) / outerSizePX,\n    (nextPaneNewSizePX + gutterReservedSizesPX[nextPaneNdx]) / outerSizePX,\n    ...currentSizes.slice(prevPaneNdx + 2, currentSizes.length),\n  ];\n\n  /*\n  const availableSpacePX = outerSizePX - totalGutterSizePX;\n  const info = `\n  gutterReservedSizes: ${gutterReservedSizesPX}\n  availableSpacePX: ${availableSpacePX}\n  prevStartSizePX: ${prevPaneStartSizePX}\n  nextStartSizePX: ${nextPaneStartSizePX}\n  spaceUsedByBothElementsPX: ${spaceUsedByBothElementsPX}\n  prevNewSizePX: ${prevPaneNewSizePX}\n  nextNewSizePX: ${nextPaneNewSizePX}\n  sizes: ${currentSizes}\n  newSizes: ${newSizes}\n  `;\n  const infoElem = document.querySelector('#info');\n  infoElem.textContent = info;\n  */\n\n  return newSizes;\n}\n\nconst stopMobileBrowserFromScrolling = e => e.preventDefault();\n\nclass Gutter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.elementRef = React.createRef();\n  }\n  handleMouseDownAndTouchStart = (e) => {\n    const {onMouseDownAndTouchStart} = this.props;\n    onMouseDownAndTouchStart(e);\n  }\n  componentDidMount() {\n    // There's no way in React 16 to add passive false event listeners\n    // which means there is no way to drag a splitter and prevent mobile browsers\n    // from scrolling\n    const elem = this.elementRef.current;\n    elem.addEventListener('mousedown', this.handleMouseDownAndTouchStart, {passive: false});\n    elem.addEventListener('touchstart', this.handleMouseDownAndTouchStart, {passive: false});\n  }\n  componentWillUnmount() {\n    const elem = this.elementRef.current;\n    elem.removeEventListener('mousedown', this.handleMouseDownAndTouchStart);\n    elem.removeEventListener('touchstart', this.handleMouseDownAndTouchStart);\n  }\n  render() {\n    const {direction, dragging, current, style} = this.props;\n    return (\n      <div\n        ref={this.elementRef}\n        className={`gutter gutter-${direction} ${dragging && current ? 'gutter-dragging' : ''}`}\n        style={style}\n      />\n    );\n  }\n}\n\nexport default class GManSplit extends React.Component {\n  constructor(props) {\n    super(props);\n    const numPanes = React.Children.count(props.children);\n    const size = 1 / numPanes;\n    this.state = {\n      sizes: new Array(numPanes).fill(size),\n    };\n    this.elementRef = React.createRef();\n  }\n  _setSizes = (sizes) => {\n    this.setState({sizes});\n  }\n  handleMouseUpAndTouchEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.removeEventListener(\"touchmove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    this.setState({dragging: false});\n  };\n  handleMouseAndTouchMove = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      gutterSize = defaultGutterSize,\n      direction = defaultDirection,\n      minSize = defaultMinSize,\n      computeNewSizesFn = computeNewSizes,\n      onSetSizes,\n      sizes: propSizes,\n    } = this.props;\n    const {\n      prevPaneNdx,\n      mouseStart,\n      startSizes,\n      sizes: stateSizes,\n    } = this.state;\n    const setSizes = onSetSizes || this._setSizes;\n    const sizes = onSetSizes ? propSizes : stateSizes;\n\n    const {\n      clientAxis,\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const deltaPX = getMouseOrTouchPosition(e, clientAxis) - mouseStart;\n    const outerSizePX = this.elementRef.current[clientSize];\n\n    const newSizes = computeNewSizesFn({\n      startSizes,\n      currentSizes: sizes,\n      prevPaneNdx,\n      gutterSize,\n      minSize,\n      deltaPX,\n      outerSizePX,\n    });\n\n    setSizes(newSizes);\n  };\n  handleMouseDownAndTouchStart = (e) => {\n    console.log('split mouse down')\n    stopMobileBrowserFromScrolling(e);\n    const {\n      direction = defaultDirection,\n    } = this.props;\n    const {\n      clientAxis,\n    } = getDirectionProps(direction);\n\n    document.addEventListener(\"mousemove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.addEventListener(\"touchmove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    const gutterNdx = Array.prototype.indexOf.call(e.target.parentElement.children, e.target);\n    const prevPaneNdx = (gutterNdx - 1) / 2;    \n    this.setState({\n      startSizes: this.state.sizes.slice(),\n      mouseStart: getMouseOrTouchPosition(e, clientAxis),\n      prevPaneNdx,\n      dragging: true,\n    });\n  };\n  recomputeSizes = () => {\n    // here it's not entirely clear what to do. Maybe we need options\n    // If they user removes a child which sizes do they want? I guess\n    // since they removed a child they passed in new sizes so we should\n    // pass sizes back? Ugh!\n    //\n    // Example:\n    //\n    //   * start: 3 panes, sizes a(33%), b(33%), c(33%)\n    //   * user adjusts to sizes a(10%), b(90%), c(10%)\n    //   * user deletes pane (a)\n    //\n    // If we just continue to use the current sizes the we'd get\n    //\n    //   b(10%), c(90%)\n    //\n    // We have no way of knowing that b should get the 90%\n    //\n    // One way would be to pass responsibility for saving the sizes\n    // up to the parent. Basically if you want to add/remove children\n    // then you need need to keep their state. In that case\n    // passing an `onSetSize` prop. It's a function that will be called\n    // with an array of sizes.  Update your sizes and pass them in as\n    // props\n    //\n    // But, just so we don't completely fail if the user has not opted\n    // into managing the size state then at least do something.\n    const {sizes} = this.state;\n    const {minSize, direction, gutterSize} = this.props;\n    const {\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const numChildren = React.Children.count(this.props.children);\n    const newSizes = numChildren < sizes.length\n      // a child was removed, normalizes the sizes\n      ? normalizeSizes(sizes.slice(0, numChildren))\n      // children were added, make space for them\n      : addSpaceForChildren(sizes, numChildren, gutterSize, minSize, this.elementRef.current.parentElement[clientSize]);\n    this._setSizes(newSizes);\n  }\n  componentDidUpdate() {\n    const {children, onSetSizes} = this.props;\n    const {sizes} = this.state;\n    // we need to check if new elements were added.\n    if (onSetSizes) {\n      return; // not our responsibility\n    }\n\n    const numChildren = React.Children.count(children);\n    if (sizes.length !== numChildren) {\n      setTimeout(this.recomputeSizes);\n    }\n  }\n  render() {\n    const {\n      children, \n      direction = defaultDirection, \n      gutterSize = defaultGutterSize, \n      sizes: propSizes,\n      onSetSizes,\n      minSize,\n      ...rest\n    } = this.props;\n    const {\n      dragging,\n      prevPaneNdx,\n      sizes: stateSizes,\n    } = this.state;\n    const {\n      dimension,\n      style,\n    } = getDirectionProps(direction);\n\n    const sizes = onSetSizes ? propSizes : stateSizes;\n    const numPanes = React.Children.count(children);\n    const numGutters = numPanes - 1;\n    const totalGutterSpace = gutterSize * numGutters;\n    const gutterStyle = {[dimension]: `${gutterSize}px`};\n    const gutterReservedSizes = distribute(totalGutterSpace, numPanes);\n\n    let childNdx = 0;\n    let first = true;\n    const newChildren = [];\n    React.Children.forEach(children, (child, props) => {\n      if (!React.isValidElement(child)) {\n        return null;\n      }\n      if (!first) {\n        newChildren.push(\n          <Gutter\n            key={`gutter${newChildren.length}`}\n            direction={direction}\n            dragging={dragging}\n            current={dragging && childNdx === prevPaneNdx + 1}\n            style={gutterStyle}\n            onMouseDownAndTouchStart={this.handleMouseDownAndTouchStart}\n          />\n        );\n      }\n\n      const style = {\n        [dimension]: `calc(${sizes[childNdx] * 100}% - ${gutterReservedSizes[childNdx]}px)`,\n      };\n\n      newChildren.push(\n        <div key={`pane${newChildren.length}`} style={style}>\n          {React.cloneElement(child)}\n        </div>\n      );\n      first = false;\n      ++childNdx;\n    });\n    return (\n      <div\n        className=\"split\"\n        ref={this.elementRef}\n        style={{\n          ...this.props.style,\n          ...style,\n          ...(dragging && {userSelect: 'none'})\n        }}\n        {...rest}\n      >\n        {newChildren}\n        {dragging ? \n          <style>\n            iframe {'{'}\n              pointer-events: none !important;\n            {'}'}\n          </style> : []\n        }\n      </div>\n    );\n  }\n}\n\n/*\ndirection\nsizes\nonSetSizes\ncompute\n\n*/\n\n","import React from 'react';\nimport CodeArea from './CodeArea.js';\nimport EditLine from './EditLine.js';\nimport * as model from '../libs/model.js';\n\nexport default class TestArea extends React.Component {\n//  constructor(props) {\n//    super(props);\n//  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    const {test} = this.props;\n    model.subscribeTest(test, this.handleChange);\n  }\n  componentWillUnmount() {\n    const {test} = this.props;\n    model.unsubscribeTest(test, this.handleChange);\n  }\n  handleTitleChange = (title) => {\n    const {testNdx} = this.props;\n    model.setTestName(testNdx, title);\n  }\n  handleValueChange = (value) => {\n    const {testNdx} = this.props;\n    model.setTestCode(testNdx, value);\n  }\n  render() {\n    const {desc, test, hackKey} = this.props;\n    const {name} = test;\n    const heading = (\n      <EditLine\n        placeholder={desc}\n        value={name}\n        onChange={this.handleTitleChange}\n      />\n    );\n\n    return (\n      <CodeArea\n        key={hackKey}\n        value={test.code}\n        {...this.props}\n        heading={heading}\n        onValueChange={this.handleValueChange} />\n    );\n  }\n}","import * as model from './model.js';\nimport {isDevelopment} from './flags.js';\nimport {createURL} from './url.js';\nimport * as winMsgMgr from './WindowMessageManager';\n\nconst log = _ => _;\n//const log = console.log.bind(console);\n\n\nexport default class TestRunner extends EventTarget {\n  static lastIframe;\n  abort() {\n    if (this._abortImpl) {\n      this._abortImpl();\n    }\n  }\n  run(data) {\n    return new Promise(async(resolve, reject) => {\n      model.clearAllTestResults();\n      console.clear();\n      let errors = 0;\n\n      const runTests = (test) => {\n        return new Promise((resolve, reject) => {\n          if (TestRunner.lastIframe) {\n            TestRunner.lastIframe.src = 'about:blank';\n            TestRunner.lastIframe.remove();\n          }\n          const iframe = document.createElement('iframe');\n          TestRunner.lastIFrame = iframe;\n\n          const base = isDevelopment\n              ? 'http://localhost:8080'\n              : window.location.origin;\n          const html = `\n          <${'script'} type=\"module\" src=\"${base}/error-reporter.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/lodash.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/platform.js\"></${'script'}>\n          <${'script'} src=\"${base}/3rdparty/benchmark.js\"></${'script'}>\n          <${'script'} src=\"${base}/pre-init.js\"></${'script'}>\n          <${'script'}>\n          ${data.initialization}\n          </${'script'}>\n          <${'script'} src=\"${base}/post-init.js\"></${'script'}>\n          <${'script'}>\n          window.___model = ${JSON.stringify({\n            ...data,\n            settings: {\n              ...(data.settings && data.settings),\n              test,\n            },\n          })};\n          </${'script'}>\n          <body>\n          </body>\n          <${'script'} type=\"module\" src=\"${base}/runner.js\"></${'script'}>\n          `;\n          const runnerData = {\n            name: data.title,\n            files: [\n              {\n                name: 'html',\n                content: html,\n              },\n              {\n                name: 'css',\n                content: '',\n              },\n              {\n                name: 'javascript',\n                content: '',\n              },\n            ],\n          };\n\n          let cleanup = (result) => {\n            cleanup = () => {}; // only cleanup once\n            winMsgMgr.remove('uncaughtError', null, handleUncaughtError);\n            winMsgMgr.remove('abort', null, handleAbort);\n            winMsgMgr.remove('error', null, handleError);\n            winMsgMgr.remove('cycle', null, handleCycle);\n            winMsgMgr.remove('complete', null, handleComplete);\n            winMsgMgr.remove('gimmeDaCodez', null, handleGimmeDaCodez);\n            // keep the iframe around so the debugger can look at it.\n            // iframe.remove()\n            resolve(result);\n          };\n\n          const abort = (message = '') => {\n            // we don't just delete the iframe because the user might\n            // want to inspect it.\n            iframe.contentWindow.postMessage({type: 'abort'}, '*');\n            data.tests.forEach((test, i) => {\n              model.setTestResult(i, {aborted: true}, window.navigator.userAgent);\n            });\n            cleanup({success: !message, data: {message}});\n          };\n          this._abortImpl = abort;\n\n          const sendProgress = (ndx) => {\n            const event = new Event('progress');\n            event.data = {\n              testNdx: ndx\n            };\n            this.dispatchEvent(event);\n          }\n\n          const updateTestResults = (data) => {\n            const ndx = parseInt(data.name);\n            const newData = {...data};\n            delete newData.id;\n            delete newData.name;\n            model.setTestResult(ndx, newData, window.navigator.userAgent);\n            sendProgress(ndx + 1);\n          };\n\n          // error caught by window.addEventListener('error')\n          const handleUncaughtError = (data) => {\n            log('handleUncaughtError:', data);\n            abort(data.message);\n          };\n          // benchmark onAbort\n          const handleAbort = (data) => {\n            log('handleAbort:', data);\n            cleanup({success: false, data: {message: 'aborted because of error'}});\n          };\n          const handleStart = () => {\n            if (!test) {\n              sendProgress(0);\n            }\n          };\n          // benchmark onError\n          const handleError = (data) => {\n            log('handleError:', data);\n            ++errors;\n            updateTestResults(data);\n          };\n          // benchmark onCycle\n          const handleCycle = (data) => {\n            log('handleCycle:', data);\n            if (!test) {\n              updateTestResults(data)\n            }\n          };\n          // benchmark onComplete\n          const handleComplete = (data) => {\n            log('handleComplete:', data);\n            cleanup({success: errors === 0, data});\n          };\n          const handleGimmeDaCodez = () => {\n            iframe.contentWindow.postMessage({\n              type: 'run',\n              data: runnerData,\n            }, \"*\");\n          };\n\n          winMsgMgr.on('uncaughtError', null, handleUncaughtError);\n          winMsgMgr.on('abort', null, handleAbort);\n          winMsgMgr.on('error', null, handleError);\n          winMsgMgr.on('start', null, handleStart);\n          winMsgMgr.on('cycle', null, handleCycle);\n          winMsgMgr.on('complete', null, handleComplete);\n          winMsgMgr.on('gimmeDaCodez', null, handleGimmeDaCodez);\n\n          iframe.src = isDevelopment\n              ? createURL('http://localhost:8081/runner-03.html', {...(test && {test}), url: 'http://localhost:8080/jsbenchit-runner.js'})\n              : createURL('https://jsbenchitrunner.devcomments.org/runner-03.html', {...(test && {test}), url: 'https://jsbenchit.org/jsbenchit-runner.js'});\n          iframe.style.display = 'none';\n          document.body.appendChild(iframe);\n        });\n      }\n\n      // first run all tests the once each\n      // so if there is an error in the last test\n      // we don't have to wait for all the other\n      // tests to run to get a notified.\n      try {\n        const result = await runTests(true);\n        if (!result.success) {\n          resolve(result);\n          return;\n        }\n      } catch (e) {\n        resolve({success: false, e});\n        return;\n      }\n\n      try {\n        const result = await runTests();\n        resolve(result);\n      } catch(e) {\n        reject(e);\n      }\n    });\n  }\n};","import React from 'react';\nimport * as model from '../libs/model.js';\nimport {createTests} from '../libs/result-helper.js';\n\nexport default class Tests extends React.Component {\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    model.subscribe(model.resultsVersionKey, this.handleChange);\n  }\n  componentWillUnmount() {\n    model.unsubscribe(model.resultsVersionKey, this.handleChange);\n  }\n  render() {\n    const tests = model.getTests();\n    return createTests({tests}, React.createElement);\n  }\n}","import SubscriptionManager from './SubscriptionManager';\n\nconst kUserManagerKey = 'foobar'; // not important\n\nexport default class UserManager {\n  constructor({\n    oauthManager,\n    github,\n    addError,\n  }) {\n    this.oauthManager = oauthManager;\n    this.github = github;\n    this.subscriptionManager = new SubscriptionManager();\n    this.addError = addError;\n    oauthManager.subscribe(this._handleNewAuth);\n    this._handleNewAuth();\n    this.userData = undefined;\n  }\n  /*\n  {\n    \"login\": \"greggman\",\n    \"id\": 234804,\n    \"node_id\": \"MDQ6VXNlcjIzNDgwNA==\",\n    \"avatar_url\": \"https://avatars2.githubusercontent.com/u/234804?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/greggman\",\n    \"html_url\": \"https://github.com/greggman\",\n    \"followers_url\": \"https://api.github.com/users/greggman/followers\",\n    \"following_url\": \"https://api.github.com/users/greggman/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/greggman/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/greggman/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/greggman/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/greggman/orgs\",\n    \"repos_url\": \"https://api.github.com/users/greggman/repos\",\n    \"events_url\": \"https://api.github.com/users/greggman/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/greggman/received_events\",\n    \"type\": \"User\",\n    \"site_admin\": false,\n    \"name\": \"Greggman\",\n    \"company\": null,\n    \"blog\": \"http://games.greggman.com\",\n    \"location\": \"Earth\",\n    \"email\": \"github@greggman.com\",\n    \"hireable\": null,\n    \"bio\": \"30 years of games\\r\\n5 years of Chrome\",\n    \"twitter_username\": null,\n    \"public_repos\": 283,\n    \"public_gists\": 80,\n    \"followers\": 1037,\n    \"following\": 3,\n    \"created_at\": \"2010-04-01T08:48:05Z\",\n    \"updated_at\": \"2020-10-24T06:05:24Z\"\n  }\n  */\n  getUserData() {\n    return this.userData;\n  }\n  _handleNewAuth = async() => {\n    this.userData = undefined;\n    const pat = this.oauthManager.pat();\n    this.github.setPat(pat);\n    if (pat) {\n      try {\n        const data = await this.github.getAuthenticatedUser();\n        this.userData = data;\n      } catch (e) {\n        this.addError(e);\n      }\n    }\n    this.subscriptionManager.notify(kUserManagerKey);\n  }\n  login = () => {\n    this.oauthManager.login();\n  }\n  logout = () => {\n    this.oauthManager.logout();\n  }\n  subscribe(fn) {\n    this.subscriptionManager.subscribe(kUserManagerKey, fn);\n  }\n  unsubscribe(fn) {\n    this.subscriptionManager.unsubscribe(kUserManagerKey, fn);\n  }\n  cleanup() {\n    this.oauthManager.unsubscribe(this._handleNewAuth);\n  }\n}\n\n","import React from 'react';\n\nimport BackupManager from './BackupManager.js';\nimport { classNames } from '../libs/css-utils.js';\nimport EditLine from './EditLine.js';\nimport Footer from './Footer.js';\nimport GitHub from '../libs/GitHub.js';\nimport {storageManager} from '../globals.js';\nimport Help from './Help.js';\nimport LatestResults from './LatestResults.js';\nimport Load from './Load.js';\nimport {isGistId, loadGistFromSrc} from '../libs/loader.js';\nimport * as model from '../libs/model.js';\nimport NamedCodeArea from './NamedCodeArea.js';\nimport OAuthManager from '../libs/OAuthManager';\nimport Platforms from './Platforms.js';\nimport Save from './Save.js';\nimport ServiceContext from '../ServiceContext.js';\nimport Split from './Split.js';\nimport TestArea from './TestArea.js';\nimport TestRunner from '../libs/TestRunner.js';\nimport Tests from './Tests.js';\nimport UserManager from '../libs/UserManager.js';\n\nimport './App.css';\n\nconst noJSX = () => [];\nconst stringOrEmpty = (str, prefix = '', suffix = '') => str ? `${prefix}${str}${suffix}` : '';\nconst darkMatcher = window.matchMedia('(prefers-color-scheme: dark)');\nconst makeId = _ => `${Date.now()}+${Math.random()}`;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      path: window.location.pathname,\n      dark: darkMatcher.matches,\n      running: false,\n      loading: false,\n      dialog: noJSX,\n      dataVersion: 0,\n      gistId: '',\n      messages: [],\n      userData: {},\n      testNum: 0,\n      errorMsg: '',\n    };\n    this.github = new GitHub();\n    this.testToKeyMap = new Map();\n    this.oauthManager = new OAuthManager(storageManager);\n    this.backupManager = new BackupManager(storageManager);\n    this.userManager = new UserManager({\n      oauthManager: this.oauthManager,\n      github: this.github,\n      addError: this.addError,\n    });\n  }\n  componentDidMount() {\n    this.github.addEventListener('userdata', (e) => {\n      this.setState({\n        userData: e.data,\n      });\n    });\n    model.add('path', window.location.pathname);\n    model.subscribe('path', (newValue) => {\n      window.history.pushState({}, '', newValue);\n      this.setState({\n        path: newValue,\n      });\n    });\n    // I still am not sure how I'm supposed to handle this.\n    // Putting my model in the state itself seems wrong\n    // and doesn't actually help since I'd have to \n    // generate an entirely new state object to change any\n    // nested property.\n    //\n    // Storing the data outside I see no way to tell\n    // components to re-render except to call forceUpdate\n    // which all the documentation says \"if you call this\n    // you're doing it wrong\".\n    //\n    // Redux is a joke. 50 lines code needed to set\n    // a single field. Repeat those 50 lines for every field.\n    // Things like redux-tools make it less to type those\n    // 50 lines but they still execute 50 to 500 lines of code\n    // just to set a single value.\n    model.subscribe(model.testsVersionKey, (dataVersion) => {\n      this.setState({dataVersion})\n    });\n    // this is a hack because I can't figure out how to\n    // update the CodeMirror areas\n    model.subscribe(model.updateVersionKey, (updateVersion) => {\n      this.setState({updateVersion})\n    });\n\n    darkMatcher.addEventListener('change', () => {\n      this.setState({dark: darkMatcher.matches});\n    });\n\n    const query = Object.fromEntries(new URLSearchParams(window.location.search).entries());\n    const backup = this.backupManager.getBackup();\n    let loaded = false;\n    if (backup) {\n      try {\n        const data = JSON.parse(backup);\n        if (data.href === window.location.href) {\n          model.setData(data.data);\n          const url = new URL(data.href);\n          const {src} = Object.fromEntries(new URLSearchParams(url.search).entries());\n          if (isGistId(src)) {\n            this.setState({gistId: src, gistOwnerId: data.gistOwnerId});\n          }\n          loaded = true;\n          this.addInfo('loaded backup from local storage')\n        }\n      } catch (e) {\n        //\n      }\n      this.backupManager.clearBackup();\n    }\n    if (!loaded && query.src) {\n      this.loadData(query.src);\n    }\n    this.updateTitle();\n  }\n  componentDidUpdate() {\n    this.updateTitle();\n  }\n  updateTitle() {\n    const data = model.data;\n    document.title = data.title || 'jsBenchIt';\n  }\n  async loadData(src) {\n    this.setState({loading: true});\n    try {\n      const {data, id, rawData} = await loadGistFromSrc(src, this.github);\n      model.setData(data);\n      if (id) {\n        this.setState({\n          gistId: src,\n          gistOwnerId: rawData?.owner?.id,\n        })\n      }\n    } catch (e) {\n      console.warn(e);\n      this.addError(`could not load benchmark: src=${src} ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  addMsg = (msg, className) => {\n    switch (className) {\n      case 'error':\n        console.error(msg);\n        break;\n      default:\n        console.log(msg);\n        break;\n    }\n    this.setState({messages: [{msg:msg.toString(), className}, ...this.state.messages]});\n    setTimeout(() => {\n      this.setState({messages: this.state.messages.slice(0, this.state.messages.length - 1)});\n    }, 5000);\n  }\n  addInfo = (msg) => this.addMsg(msg, 'info');\n  addError = (msg) => this.addMsg(msg, 'error');\n  closeDialog = () => {\n    this.setState({dialog: noJSX});\n  }\n  handleNew = async() => {\n    this.backupManager.clearBackup();\n    window.location.href = window.location.origin;  // causes a reload\n  }\n  handleRun = async () => {\n    this.setState({running: true, testNum: -1, errorMsg: ''});\n    this.backupManager.setBackup(JSON.stringify({\n      href: window.location.href,\n      data: model.data,\n      gistOwnerId: this.state.gistOwnerId,\n    }));\n    // console.log('--start--');\n    try {\n      const testRunner = new TestRunner();\n      testRunner.addEventListener('progress', (e) => {\n        this.setState({testNum: e.data.testNdx});\n      });\n      this.abort = testRunner.abort.bind(testRunner);\n      const {success, data} = await testRunner.run(model.data);\n      if (!success) {\n        this.setState({errorMsg: data?.message || ''});\n        this.addError(`could not run benchmark:\\n${stringOrEmpty(data?.message)}${stringOrEmpty(data?.filename, ':')}${stringOrEmpty(data?.lineno, ':')}${stringOrEmpty(data?.colno, ':')}`);\n      }\n    } catch(e) {\n      this.addError(e);\n    }\n    this.abort = undefined;\n    this.backupManager.clearBackup();\n    // console.log('--done--');\n    this.setState({running: false});\n  }\n  handleSave = async () => {\n    this.setState({dialog: this.renderSave});\n  }\n  handleHelp = () => {\n    this.setState({dialog: this.renderHelp});\n  }\n  handleLoad = () => {\n    this.setState({dialog: this.renderLoad});\n  }\n  handleOnLoad = async() => {\n    this.setState({dialog: noJSX});\n  }\n  handleOnSave = (gistId) => {\n    window.history.pushState({}, '', `${window.location.origin}?src=${gistId}`);\n    this.setState({\n      gistId,\n      gistOwnerId: this.userManager.getUserData().id,\n    });\n  }\n  handleAbort = () => {\n    this.abort();\n  };\n  getTestKey(test) {\n    let key = this.testToKeyMap.get(test);\n    if (!key) {\n      key = makeId();\n      this.testToKeyMap.set(test, key);\n    }\n    return key;\n  }\n  renderHelp = () => {\n    return (<Help onClose={this.closeDialog} />);\n  }\n  renderLoad = () => {\n    return (\n      <Load\n        onLoad={this.handleOnLoad}\n        onClose={this.closeDialog}\n      />\n    );\n  }\n  renderSave = () => {\n    const data = model.data;\n    return (\n      <Save\n        onSave={this.handleOnSave}\n        onClose={this.closeDialog}\n        gistId={this.state.gistId}\n        gistOwnerId={this.state.gistOwnerId}\n        data={data} />\n    );\n  }\n  render() {\n    const data = model.data;\n    const {\n      running,\n      loading,\n      dialog,\n      updateVersion: hackKey,\n      userData,\n      testNum,\n      gistId,\n      errorMsg,\n    } = this.state;\n    const disabled = running;\n    const hideStyle = {\n      ...(!running && {display: 'none'}),\n    };\n    const disabledClass = classNames({disabled});\n    return (\n      <div className=\"App\">\n        <ServiceContext.Provider value={{\n          github: this.github,\n          oauthManager: this.oauthManager,\n          addError: this.addError,\n          addInfo: this.addInfo,\n          storageManager,\n          userManager: this.userManager,\n          backupManager: this.backupManager,\n        }}>\n          <div className=\"top\">\n            <div className={classNames(\"left\", {disabled})}>\n              <div className=\"name\">\n                <EditLine value={data.title} onChange={v => model.setTitle(v)} />\n                {!!userData.name && <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}>{userData.name}</a></div>}\n                {!!userData.avatarURL && <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}><img className=\"avatar\" src={userData.avatarURL} alt=\"avatar\"/></a>}\n              </div>\n            </div>\n            <div className=\"right\">\n              <div className=\"toolbar\">\n                { running\n                    ? <button tabIndex=\"1\" onClick={this.handleAbort}>Cancel</button>\n                    : <button tabIndex=\"1\" onClick={this.handleRun}>Run</button>\n                }\n                <button tabIndex=\"1\" className={disabledClass} onClick={this.handleSave}>Save</button>\n                <button tabIndex=\"1\" className={disabledClass} onClick={this.handleNew}>New</button>\n                <button tabIndex=\"1\" className={disabledClass} onClick={this.handleLoad}>Load</button>\n                <button tabIndex=\"1\" className={disabledClass} onClick={this.handleHelp}>?</button>\n              </div>\n              <div className=\"head\">\n                <div>\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href={window.location.origin}> <img src=\"/resources/images/logo.svg\" alt=\"logo\"/>\n                {window.location.hostname}</a>\n                </div>\n                <div>\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsbenchit/\">\n                  <img alt=\"github\" src=\"/resources/images/octocat-icon.svg\"/>\n                </a>\n                </div>\n              </div>\n            </div>\n          </div>\n          {\n            loading ? [] : (\n              <div className=\"bottom\">\n                <Split direction=\"horizontal\">\n                  <div className=\"left\">\n                    <NamedCodeArea\n                      key={`n1${hackKey}`}\n                      title=\"Initialization\"\n                      value={data.initialization}\n                      show={data.initialization.length > 0}\n                      onValueChange={v => model.setInitialization(v)}\n                    />\n                    <NamedCodeArea\n                      key={`n2${hackKey}`}\n                      title=\"Before Each Test\"\n                      value={data.setup}\n                      show={data.setup.length > 0}\n                      onValueChange={v => model.setSetup(v)}\n                     />\n                    {\n                      data.tests.map((test, ndx) => {\n                        const extra = (\n                          <div><button onClick={_ => model.deleteTest(ndx)}>-</button></div>\n                        );\n                        return (\n                          <TestArea\n                            key={`ca${this.getTestKey(test)}`}\n                            hackKey={hackKey}\n                            desc={`Case ${ndx + 1}`}\n                            test={test}\n                            testNdx={ndx}\n                            extra={extra}\n                          />\n                        );\n                      })\n                    }\n                    <div>\n                      <button onClick={model.addTest}>+</button>\n                    </div>\n                    <div className=\"blocked\" style={hideStyle}>\n                      <div className=\"abort\">\n                        {testNum >= 0\n                           ? <div>Testing {testNum + 1} of {data.tests.length}</div>\n                           : <div>Initializing</div>\n                        }\n                        <div>Time remaining: ~{(data.tests.length - testNum) * 5}s</div>\n                        <div><button onClick={this.handleAbort}>Stop Benchmark</button></div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"right\">\n                    {errorMsg && (\n                      <div className=\"results-group\">\n                        <div className=\"result aborted\">\n                          <div className=\"result-error\">error:{'\\n'}{errorMsg}</div>\n                        </div>\n                      </div>\n                    )}\n                    <LatestResults/>\n                    <Platforms/>\n                    <Tests/>\n                  </div>\n                </Split>\n              </div>\n            )\n          }\n          <Footer\n            gistId={gistId}\n            title={data.title}\n          />\n          {dialog()}\n          <div className=\"messages\">\n            {\n              this.state.messages.map(({msg, className}, i) => (<div className={className} key={`err${i}`}>{msg}</div>))\n            }\n          </div>\n        </ServiceContext.Provider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './scrollbars.js';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}